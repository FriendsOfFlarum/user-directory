{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/user-directory/webpack/bootstrap","webpack://@fof/user-directory/webpack/runtime/compat get default export","webpack://@fof/user-directory/webpack/runtime/define property getters","webpack://@fof/user-directory/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/user-directory/webpack/runtime/make namespace object","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'forum/components/CommentPost')\"","webpack://@fof/user-directory/./src/forum/extenders/extendCommentPost.tsx","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'forum/components/UsersSearchSource')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/components/LinkButton')\"","webpack://@fof/user-directory/./src/forum/extenders/extendUsersSearchSource.tsx","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'forum/components/IndexSidebar')\"","webpack://@fof/user-directory/./src/forum/extenders/extendIndexPage.tsx","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'forum/components/PageStructure')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/components/Page')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/utils/ItemList')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/helpers/listItems')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/components/Select')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/components/Dropdown')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/utils/extractText')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/components/LoadingIndicator')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/components/Placeholder')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'forum/components/UserCard')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/utils/humanTime')\"","webpack://@fof/user-directory/./src/forum/components/SmallUserCard.js","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/components/Icon')\"","webpack://@fof/user-directory/./src/forum/components/UserDirectoryUserCard.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryListItem.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryList.js","webpack://@fof/user-directory/./src/common/utils/SortMap.js","webpack://@fof/user-directory/./src/forum/states/UserDirectoryState.js","webpack://@fof/user-directory/./src/forum/components/CheckableButton.js","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/utils/withAttr')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/utils/KeyboardNavigatable')\"","webpack://@fof/user-directory/./src/forum/searchTypes/AbstractType.js","webpack://@fof/user-directory/./src/forum/searchTypes/TextFilter.js","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/models/Group')\"","webpack://@fof/user-directory/./src/forum/searchTypes/GroupFilter.js","webpack://@fof/user-directory/./src/forum/components/SearchField.js","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/components/Separator')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/helpers/textContrastClass')\"","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/utils/classList')\"","webpack://@fof/user-directory/./src/forum/components/UserDirectoryHero.tsx","webpack://@fof/user-directory/./src/forum/components/UserDirectoryPage.js","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@fof/user-directory/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@fof/user-directory/./src/forum/models/Text.ts","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@fof/user-directory/./src/forum/extend.ts","webpack://@fof/user-directory/./src/forum/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/CommentPost');","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nexport const linkGroupMentions = function () {\n  if (app.forum.attribute('canSeeUserDirectoryLink') && app.forum.attribute('userDirectoryLinkGroupMentions')) {\n    // @ts-ignore\n    this.$('.GroupMention').each(function () {\n      // @ts-ignore\n      if ($(this).hasClass('GroupMention--linked')) return;\n\n      // @ts-ignore\n      const name = $(this).find('.GroupMention-name').text();\n      const group = app.store.getBy('groups', 'namePlural', name.slice(1));\n      if (group) {\n        const link = $(`<a class=\"GroupMention-link\" href=\"${app.route('fof_user_directory', {\n          q: `group:${group.id()}`\n        })}\"></a>`);\n        link.on('click', function (e) {\n          // @ts-ignore\n          m.route.set(this.getAttribute('href'));\n          e.preventDefault();\n        });\n\n        // @ts-ignore\n        $(this).addClass('GroupMention--linked').wrap(link);\n      }\n    });\n  }\n};\nexport default function extendCommentPost() {\n  extend(CommentPost.prototype, 'oncreate', linkGroupMentions);\n  extend(CommentPost.prototype, 'onupdate', linkGroupMentions);\n}\nflarum.reg.add('fof-user-directory', 'forum/extenders/extendCommentPost', extendCommentPost);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/UsersSearchSource');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/LinkButton');","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport UsersSearchSource from 'flarum/forum/components/UsersSearchSource';\nimport LinkButton from 'flarum/common/components/LinkButton';\nexport default function extendUsersSearchSource() {\n  extend(UsersSearchSource.prototype, 'view', function (view, query) {\n    if (!view || !app.forum.attribute('canSeeUserDirectoryLink') || app.forum.attribute('userDirectoryDisableGlobalSearchSource')) {\n      return;\n    }\n    query = query.toLowerCase();\n    view.splice(1, 0, m(\"li\", null, m(LinkButton, {\n      className: \"Button Button--link\",\n      href: app.route('fof_user_directory', {\n        q: query\n      }),\n      icon: \"fas fa-search\"\n    }, app.translator.trans('fof-user-directory.forum.search.users_heading', {\n      query\n    }))));\n  });\n}\nflarum.reg.add('fof-user-directory', 'forum/extenders/extendUsersSearchSource', extendUsersSearchSource);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/IndexSidebar');","import IndexSidebar from 'flarum/forum/components/IndexSidebar';\nimport app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport LinkButton from 'flarum/common/components/LinkButton';\nexport default function extendIndexPage() {\n  extend(IndexSidebar.prototype, 'navItems', items => {\n    if (app.forum.attribute('canSeeUserDirectoryLink') && app.forum.attribute('canSearchUsers')) {\n      items.add('fof-user-directory', m(LinkButton, {\n        href: app.route('fof_user_directory'),\n        icon: \"far fa-address-book\"\n      }, app.translator.trans('fof-user-directory.forum.page.nav')), 85);\n    }\n  });\n}\nflarum.reg.add('fof-user-directory', 'forum/extenders/extendIndexPage', extendIndexPage);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/PageStructure');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Page');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/ItemList');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/listItems');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Select');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Dropdown');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/extractText');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Component');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/LoadingIndicator');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Placeholder');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/UserCard');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/humanTime');","import UserCard from 'flarum/forum/components/UserCard';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport humanTime from 'flarum/common/utils/humanTime';\nexport default class SmallUserCard extends UserCard {\n  //Overriding infoItems so that other extensions can separately add items to small cards\n  infoItems() {\n    const items = new ItemList();\n    const user = this.attrs.user;\n    items.add('joined', app.translator.trans('core.forum.user.joined_date_text', {\n      ago: humanTime(user.joinTime())\n    }));\n    return items;\n  }\n}\nflarum.reg.add('fof-user-directory', 'forum/components/SmallUserCard', SmallUserCard);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Icon');","import UserCard from 'flarum/forum/components/UserCard';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport humanTime from 'flarum/common/utils/humanTime';\nimport Icon from 'flarum/common/components/Icon';\nimport app from 'flarum/forum/app';\nexport default class UserDirectoryUserCard extends UserCard {\n  /**\n   * Allowing to add additonal items unique to the user directory.\n   *\n   * @return {ItemList<import('mithril').Children>}\n   */\n  infoItems() {\n    const items = super.infoItems();\n    const user = this.attrs.user;\n    if (items.has('lastSeen')) items.setPriority('lastSeen', 100);\n    if (items.has('joined')) items.setPriority('joined', 95);\n    if (items.has('points')) items.setPriority('points', 60);\n    if (items.has('best-answer-count')) items.setPriority('best-answer-count', 68);\n    if (items.has('masquerade-bio')) items.setPriority('masquerade-bio', 50);\n    items.add('discussion-count', m(\"div\", {\n      className: \"userStat\"\n    }, m(Icon, {\n      name: \"fas fa-comment\"\n    }), app.translator.trans('fof-user-directory.forum.page.usercard.discussion-count', {\n      count: user.discussionCount()\n    })), 70);\n    items.add('comment-count', m(\"div\", {\n      className: \"userStat\"\n    }, m(Icon, {\n      name: \"fas fa-comments\"\n    }), app.translator.trans('fof-user-directory.forum.page.usercard.post-count', {\n      count: user.commentCount()\n    })), 69);\n    return items;\n  }\n}\nflarum.reg.add('fof-user-directory', 'forum/components/UserDirectoryUserCard', UserDirectoryUserCard);","import Component from 'flarum/common/Component';\nimport UserCard from 'flarum/forum/components/UserCard';\nimport SmallUserCard from './SmallUserCard';\nimport UserDirectoryUserCard from './UserDirectoryUserCard';\nexport default class UserDirectoryListItem extends Component {\n  view(vnode) {\n    const {\n      user,\n      useSmallCards\n    } = this.attrs;\n    const attributes = {\n      user,\n      className: `UserCard--directory${useSmallCards ? ' UserCard--small' : ''}`,\n      controlsButtonClassName: 'Button Button--icon Button--flat'\n    };\n    return m(\"div\", {\n      className: \"User\"\n    }, useSmallCards ? SmallUserCard.component(attributes) : UserDirectoryUserCard.component(attributes));\n  }\n}\nflarum.reg.add('fof-user-directory', 'forum/components/UserDirectoryListItem', UserDirectoryListItem);","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport UserDirectoryListItem from './UserDirectoryListItem';\n\n/**\n * Based on Flarum's DiscussionList\n */\nexport default class UserDirectoryList extends Component {\n  view() {\n    const {\n      state\n    } = this.attrs;\n    const params = state.getParams();\n    const useSmallCards = app.forum.attribute('userDirectorySmallCards');\n    let loading;\n    if (state.isLoading()) {\n      loading = LoadingIndicator.component();\n    } else if (state.moreResults) {\n      loading = Button.component({\n        className: 'Button',\n        onclick: state.loadMore.bind(state)\n      }, app.translator.trans('fof-user-directory.forum.page.load_more_button'));\n    }\n    if (state.empty()) {\n      const text = app.translator.trans('fof-user-directory.forum.page.empty_text');\n      return m(\"div\", {\n        className: \"DiscussionList\"\n      }, Placeholder.component({\n        text\n      }));\n    }\n    return m(\"div\", {\n      className: 'UserDirectoryList' + (state.isSearchResults() ? ' UserDirectoryList--searchResults' : '') + (useSmallCards ? ' UserDirectoryList--small-cards' : '')\n    }, m(\"ul\", {\n      className: \"UserDirectoryList-users\"\n    }, state.users.map(user => {\n      return m(\"li\", {\n        key: user.id(),\n        \"data-id\": user.id()\n      }, UserDirectoryListItem.component({\n        user,\n        params,\n        useSmallCards\n      }));\n    })), m(\"div\", {\n      className: \"UserDirectoryList-loadMore\"\n    }, loading));\n  }\n}\nflarum.reg.add('fof-user-directory', 'forum/components/UserDirectoryList', UserDirectoryList);","/**\n * The sort options.\n * We use a class and not just a POJO/function because we want extensions to be able to extend it\n */\nexport default class SortMap {\n  sortMap() {\n    return {\n      username_az: 'username',\n      username_za: '-username',\n      newest: '-joinedAt',\n      oldest: 'joinedAt',\n      most_discussions: '-discussionCount',\n      least_discussions: 'discussionCount'\n    };\n  }\n}\nflarum.reg.add('fof-user-directory', 'common/utils/SortMap', SortMap);","/**\n * Based on Flarum's DiscussionListState\n */\nimport SortMap from '../../common/utils/SortMap';\nexport default class UserDirectoryState {\n  constructor(params, app) {\n    if (params === void 0) {\n      params = {};\n    }\n    if (app === void 0) {\n      app = window.app;\n    }\n    this.params = params;\n    this.app = app;\n    this.users = [];\n    this.moreResults = false;\n    this.loading = false;\n    this.qBuilder = {};\n  }\n  requestParams() {\n    const params = {\n      include: [],\n      filter: {}\n    };\n    const sortKey = this.params.sort || app.forum.attribute('userDirectoryDefaultSort');\n\n    // sort might be set to null if no sort params has been passed\n    params.sort = this.sortMap()[sortKey];\n    if (this.params.q) {\n      params.filter.q = this.params.q;\n    }\n    return params;\n  }\n  sortMap() {\n    return {\n      default: '',\n      ...new SortMap().sortMap()\n    };\n  }\n  getParams() {\n    return this.params;\n  }\n  clear() {\n    this.users = [];\n    m.redraw();\n  }\n  refreshParams(newParams) {\n    if (!this.hasUsers() || Object.keys(newParams).some(key => this.getParams()[key] !== newParams[key])) {\n      const q = '';\n      this.params = newParams;\n      if (newParams.qBuilder) {\n        Object.assign(this.qBuilder, newParams.qBuilder || {});\n        this.params.q = Object.values(this.qBuilder).join(' ').trim();\n      }\n      if (!this.params.q && q) {\n        this.params.q = q;\n      }\n      this.refresh();\n    }\n  }\n  refresh() {\n    this.loading = true;\n    this.clear();\n    return this.loadResults().then(results => {\n      this.users = [];\n      this.parseResults(results);\n    }, () => {\n      this.loading = false;\n      m.redraw();\n    });\n  }\n  loadResults(offset) {\n    const preloadedUsers = this.app.preloadedApiDocument();\n    if (preloadedUsers) {\n      return Promise.resolve(preloadedUsers);\n    }\n    const params = this.requestParams();\n    params.page = {\n      offset\n    };\n    params.include = params.include.join(',');\n    return this.app.store.find('users', params);\n  }\n  loadMore() {\n    this.loading = true;\n    this.loadResults(this.users.length).then(this.parseResults.bind(this));\n  }\n  parseResults(results) {\n    this.users.push(...results);\n    this.loading = false;\n    this.moreResults = !!results.payload.links && !!results.payload.links.next;\n    m.redraw();\n    return results;\n  }\n  hasUsers() {\n    return this.users.length > 0;\n  }\n  isLoading() {\n    return this.loading;\n  }\n  isSearchResults() {\n    return !!this.params.q;\n  }\n  empty() {\n    return !this.hasUsers() && !this.isLoading();\n  }\n}\nflarum.reg.add('fof-user-directory', 'forum/states/UserDirectoryState', UserDirectoryState);","import Button from 'flarum/common/components/Button';\nimport Icon from 'flarum/common/components/Icon';\nexport default class CheckableButton extends Button {\n  /**\n   * Get the template for the button's content.\n   *\n   * @return {*}\n   * @protected\n   */\n  getButtonContent(children) {\n    const prev = super.getButtonContent(children);\n    if (this.attrs.checked) prev.push(m(Icon, {\n      name: \"fas fa-check\",\n      className: \"Button-icon ButtonCheck\"\n    }));\n    return prev;\n  }\n}\nflarum.reg.add('fof-user-directory', 'forum/components/CheckableButton', CheckableButton);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/withAttr');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/KeyboardNavigatable');","/**\n * @abstract\n */\nexport default class AbstractType {\n  constructor() {\n    this.suggestions = [];\n    this.loading = false;\n  }\n\n  /**\n   * The `type` property of the Models used in suggestions and applied filters for this type\n   * @return {String}\n   */\n  resourceType() {\n    //\n  }\n\n  /**\n   * Executed when the search query changes\n   * The method should update this.suggestions with the new results\n   * If asynchronous loading is used, this.loading should be set to true during the process\n   * @param {String} query\n   */\n  search(query) {\n    //\n  }\n\n  /**\n   * Renders the \"kind\" label next to the value indicating what kind of information that result is\n   * Should probably just be a translated text\n   * @param {Model} resource\n   * @return {vnode}\n   */\n  renderKind(resource) {\n    //\n  }\n\n  /**\n   * Renders the Label containing the suggestion's value\n   * Should be a vdom template using the .UserDirectorySearchLabel class or similar\n   * @param {Model} resource\n   * @return {vnode}\n   */\n  renderLabel(resource) {\n    //\n  }\n\n  /**\n   * Applies a filter on a params object to use in the page request\n   * @param {Object} params Object. Might or might not contain a `q` property or `sort` property. In the future, `filters` object might be supported\n   * @param {Model} resource\n   */\n  applyFilter(params, resource) {\n    //\n  }\n\n  /**\n   * Used to populate the search field on page load with values from the querystring\n   * A promise must be returned, and the UI will auto-update once the promise returns\n   * @param {Object} params Object with a `q` and `sort` property. `filters` might be supported in the future\n   * @return {Promise<Model[]>}\n   */\n  initializeFromParams(params) {\n    //\n  }\n}\nflarum.reg.add('fof-user-directory', 'forum/searchTypes/AbstractType', AbstractType);","import app from 'flarum/forum/app';\nimport AbstractType from './AbstractType';\n\n/* global m */\n\nexport default class TextFilter extends AbstractType {\n  resourceType() {\n    return 'fof-user-directory-text';\n  }\n  search(query) {\n    if (!query) {\n      this.suggestions = [];\n      return;\n    }\n    this.suggestions = [app.store.createRecord('fof-user-directory-text', {\n      attributes: {\n        text: query\n      }\n    })];\n  }\n  renderKind() {\n    return app.translator.trans('fof-user-directory.forum.search.kinds.text');\n  }\n  renderLabel(resource) {\n    return m('.UserDirectorySearchLabel', resource.text());\n  }\n  applyFilter(params, resource) {\n    params.q = params.q ? params.q + ' ' : '';\n    params.q += resource.text();\n  }\n  initializeFromParams(params) {\n    if (!params.q) {\n      return Promise.resolve([]);\n    }\n    return Promise.resolve(params.q.split(' ')\n    // Words with : are gambits and we will ignore them\n    .filter(word => word.indexOf(':') === -1).map(word => app.store.createRecord('fof-user-directory-text', {\n      attributes: {\n        text: word\n      }\n    })));\n  }\n}\nflarum.reg.add('fof-user-directory', 'forum/searchTypes/TextFilter', TextFilter);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/Group');","import app from 'flarum/forum/app';\nimport Group from 'flarum/common/models/Group';\nimport Icon from 'flarum/common/components/Icon';\nimport AbstractType from './AbstractType';\n\n/* global m */\n\nexport default class GroupFilter extends AbstractType {\n  resourceType() {\n    return 'groups';\n  }\n  search(query) {\n    this.suggestions = [];\n    if (!query) {\n      return;\n    }\n    query = query.toLowerCase();\n    app.store.all('groups').forEach(group => {\n      // Do not allow Guest group as it wouldn't do anything\n      if (group.id() === Group.GUEST_ID) {\n        return;\n      }\n      if (group.nameSingular().toLowerCase().indexOf(query) !== -1 || group.namePlural().toLowerCase().indexOf(query) !== -1) {\n        this.suggestions.push(group);\n      }\n    });\n  }\n  renderKind() {\n    return app.translator.trans('fof-user-directory.forum.search.kinds.group');\n  }\n  renderLabel(group) {\n    return m('.UserDirectorySearchLabel', group.color() ? {\n      className: 'colored',\n      style: {\n        backgroundColor: group.color()\n      }\n    } : {}, [group.icon() ? [Icon.component({\n      name: group.icon()\n    }), ' '] : null, group.namePlural()]);\n  }\n  applyFilter(params, group) {\n    params.q = params.q ? params.q + ' ' : '';\n    params.q += 'group:' + group.id();\n  }\n  initializeFromParams(params) {\n    if (!params.q) {\n      return Promise.resolve([]);\n    }\n    const qWithSpacesAround = ' ' + params.q + ' ';\n    const groups = [];\n    const queryGroups = qWithSpacesAround.split(' ').filter(q => q.startsWith('group:'));\n    app.store.all('groups').forEach(group => {\n      queryGroups.forEach(queryGroup => {\n        const groupIds = queryGroup.replace('group:', '').split(',');\n        if (groupIds.includes(group.id())) {\n          groups.push(group);\n        }\n      });\n    });\n    return Promise.resolve(groups);\n  }\n}\nflarum.reg.add('fof-user-directory', 'forum/searchTypes/GroupFilter', GroupFilter);","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport KeyboardNavigatable from 'flarum/common/utils/KeyboardNavigatable';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport TextFilter from '../searchTypes/TextFilter';\nimport GroupFilter from '../searchTypes/GroupFilter';\nexport default class SearchField extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.searchIndex = 0;\n    this.navigator = new KeyboardNavigatable();\n    this.navigator.when(event => {\n      // Do not handle keyboard when TAB is pressed and there's nothing in field\n      // Without this it's impossible to TAB out of the field\n      return event.key !== 'Tab' || !!this.filter;\n    }).onUp(() => {\n      if (this.searchIndex > 0) {\n        this.searchIndex--;\n        m.redraw();\n      }\n    }).onDown(() => {\n      if (this.searchIndex < this.allSuggestions().length - 1) {\n        this.searchIndex++;\n        m.redraw();\n      }\n    }).onSelect(() => {\n      if (this.filter) {\n        this.selectResult(this.allSuggestions()[this.searchIndex]);\n        m.redraw();\n      } else {\n        this.applyFiltering();\n      }\n    }).onRemove(() => {\n      this.appliedFilters.pop();\n    });\n    this.availableFilters = this.filterTypes().toArray();\n    this.appliedFilters = [];\n    this.filter = '';\n    this.focused = false;\n\n    // When the page loads, initialize UI with filters from the parameters\n    this.availableFilters.forEach(filter => {\n      filter.initializeFromParams({\n        sort: m.route.param('sort'),\n        q: m.route.param('q')\n      }).then(resources => {\n        this.appliedFilters.push(...resources);\n        m.redraw();\n      });\n    });\n  }\n  view() {\n    const suggestions = this.allSuggestions();\n    const loading = this.availableFilters.some(filter => filter.loading);\n    return m(\"div\", {\n      className: \"Form-group Usersearchbox\"\n    }, m(\"label\", {\n      className: `UserDirectorySearchInput FormControl ${this.focused ? 'focus' : ''}`\n    }, m(\"span\", {\n      className: \"UserDirectorySearchInput-selected\"\n    }, this.appliedFilters.map((recipient, index) => m(\"span\", {\n      className: \"UserDirectorySearchInput-filter\",\n      onclick: () => {\n        this.appliedFilters.splice(index, 1);\n        this.applyFiltering();\n      },\n      title: this.searchResultKind(recipient)\n    }, this.recipientLabel(recipient)))), m(\"input\", {\n      className: \"FormControl\",\n      placeholder: app.translator.trans('fof-user-directory.forum.search.field.placeholder'),\n      value: this.filter,\n      oninput: withAttr('value', value => {\n        this.filter = value;\n        this.performNewSearch();\n      }),\n      onkeydown: this.navigator.navigate.bind(this.navigator),\n      onfocus: () => {\n        this.focused = true;\n      },\n      onblur: () => {\n        this.focused = false;\n      }\n    }), loading && m(LoadingIndicator, null), !!suggestions.length && m(\"ul\", {\n      className: \"Dropdown-menu\"\n    }, suggestions.map((result, index) => m(\"li\", {\n      className: this.searchIndex === index ? 'active' : '',\n      onclick: () => {\n        this.selectResult(result);\n        this.applyFiltering();\n      }\n    }, m(\"button\", {\n      type: \"button\"\n    }, m(\"span\", {\n      className: \"UserDirectorySearchKind\"\n    }, this.searchResultKind(result)), this.recipientLabel(result)))))));\n  }\n  filterTypes() {\n    const items = new ItemList();\n    items.add('text', new TextFilter(), 10);\n    items.add('group', new GroupFilter(), 20);\n    return items;\n  }\n  filterForResource(resource) {\n    return this.availableFilters.find(f => f.resourceType() === resource.data.type);\n  }\n  recipientLabel(resource) {\n    const filter = this.filterForResource(resource);\n    if (filter) {\n      return filter.renderLabel(resource);\n    }\n    return '[unknown]';\n  }\n  searchResultKind(resource) {\n    const filter = this.filterForResource(resource);\n    if (filter) {\n      return filter.renderKind(resource);\n    }\n    return '[unknown]';\n  }\n  selectResult(result) {\n    if (!result) {\n      return;\n    }\n    this.appliedFilters.push(result);\n    this.clearSuggestions();\n  }\n  clearSuggestions() {\n    this.filter = '';\n    this.availableFilters.forEach(filter => {\n      filter.search('');\n    });\n  }\n  allSuggestions() {\n    return [].concat(...this.availableFilters.map(filter => filter.suggestions));\n  }\n  performNewSearch() {\n    this.searchIndex = 0;\n    this.availableFilters.forEach(filter => {\n      filter.search(this.filter);\n    });\n    this.attrs.state.refreshParams({\n      ...this.attrs.state.getParams(),\n      qBuilder: this.qBuilder()\n    });\n  }\n  qBuilder(params) {\n    if (params === void 0) {\n      params = {};\n    }\n    this.appliedFilters.forEach(resource => {\n      const filter = this.filterForResource(resource);\n      if (filter) {\n        filter.applyFilter(params, resource);\n      } else {\n        console.warn('Cannot find filter class for resource', resource);\n      }\n    });\n    return {\n      filter: `${this.filter} ${params.q || ''}`\n    };\n  }\n  applyFiltering() {\n    const params = {\n      sort: m.route.param('sort')\n    };\n    this.qBuilder(params);\n    m.route.set(app.route('fof_user_directory', params));\n  }\n}\nflarum.reg.add('fof-user-directory', 'forum/components/SearchField', SearchField);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Separator');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/textContrastClass');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/classList');","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Icon from 'flarum/common/components/Icon';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport classList from 'flarum/common/utils/classList';\nimport ItemList from 'flarum/common/utils/ItemList';\nexport default class UserDirectoryHero extends Component {\n  view() {\n    const color = this.heroColor();\n    return m(\"header\", {\n      className: classList('Hero', 'UserDirectoryHero', {\n        'UserDirectoryHero--colored': color,\n        [textContrastClass(color)]: color\n      }),\n      style: color ? {\n        '--hero-bg': color\n      } : undefined\n    }, m(\"div\", {\n      className: \"container\"\n    }, this.viewItems().toArray()));\n  }\n  viewItems() {\n    const items = new ItemList();\n    items.add('content', m(\"div\", {\n      className: \"containerNarrow\"\n    }, this.contentItems().toArray()), 80);\n    return items;\n  }\n  contentItems() {\n    const items = new ItemList();\n    items.add('user-directory-title', m(\"h1\", {\n      className: \"Hero-title\"\n    }, m(Icon, {\n      name: this.heroIcon()\n    }), \" \", app.translator.trans('fof-user-directory.forum.hero.title')), 100);\n    return items;\n  }\n  heroColor() {\n    // Example return a color string to display a colored hero\n    //return app.forum.attribute<string>('themeSecondaryColor');\n    return null;\n  }\n  heroIcon() {\n    return 'far fa-address-book';\n  }\n}\nflarum.reg.add('fof-user-directory', 'forum/components/UserDirectoryHero', UserDirectoryHero);","import IndexSidebar from 'flarum/forum/components/IndexSidebar';\nimport PageStructure from 'flarum/forum/components/PageStructure';\nimport app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\nimport Select from 'flarum/common/components/Select';\nimport Button from 'flarum/common/components/Button';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport extractText from 'flarum/common/utils/extractText';\nimport UserDirectoryList from './UserDirectoryList';\nimport UserDirectoryState from '../states/UserDirectoryState';\nimport CheckableButton from './CheckableButton';\nimport SearchField from './SearchField';\nimport Separator from 'flarum/common/components/Separator';\nimport UserDirectoryHero from './UserDirectoryHero';\n\n/**\n * This page re-uses Flarum's IndexPage CSS classes\n */\nexport default class UserDirectoryPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.state = new UserDirectoryState({});\n    this.state.refreshParams(app.search.state.params());\n    this.bodyClass = 'User--directory';\n    let idSegments = [];\n    if (this.params().q) {\n      Array.from(this.params().q.matchAll(/group:([\\d,]+)/g)).forEach(match => {\n        idSegments.push(match[1]);\n      });\n    }\n    this.enabledGroupFilters = idSegments.join(',').split(',').filter(id => id);\n    this.enabledSpecialGroupFilters = [];\n    if (app.initializers.has('flarum-suspend') && app.forum.attribute('hasSuspendPermission')) {\n      // If there is a special group filter int the params, enable it here\n      if (this.params()?.q?.includes('is:suspended')) {\n        this.enabledSpecialGroupFilters['flarum-suspend'] = 'is:suspended';\n      }\n    }\n    app.history.push('users', app.translator.trans('fof-user-directory.forum.header.back_to_user_directory_tooltip'));\n  }\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    app.setTitle(extractText(app.translator.trans('fof-user-directory.forum.page.nav')));\n  }\n  view() {\n    return m(PageStructure, {\n      className: \"UserDirectoryPage\",\n      hero: () => m(UserDirectoryHero, null),\n      sidebar: () => m(IndexSidebar, null)\n    }, m(\"div\", {\n      className: \"IndexPage-toolbar\"\n    }, m(\"ul\", {\n      className: \"IndexPage-toolbar-view\"\n    }, listItems(this.viewItems().toArray())), m(\"ul\", {\n      className: \"IndexPage-toolbar-action\"\n    }, listItems(this.actionItems().toArray()))), m(UserDirectoryList, {\n      state: this.state\n    }));\n  }\n  viewItems() {\n    const items = new ItemList();\n    const sortMap = this.state.sortMap();\n    const sortOptions = {};\n    for (const i in sortMap) {\n      sortOptions[i] = app.translator.trans('fof-user-directory.lib.sort.' + i);\n    }\n    items.add('sort', Select.component({\n      options: sortOptions,\n      value: this.state.getParams().sort || app.forum.attribute('userDirectoryDefaultSort'),\n      onchange: this.changeParams.bind(this)\n    }), 100);\n    items.add('filterGroups', Dropdown.component({\n      caretIcon: 'fas fa-filter',\n      label: app.translator.trans('fof-user-directory.forum.page.filter_button'),\n      buttonClassName: 'Button',\n      className: 'GroupFilterDropdown'\n    }, this.groupItems().toArray()), 80);\n    items.add('search', SearchField.component({\n      state: this.state\n    }), 60);\n    return items;\n  }\n  groupItems() {\n    const items = new ItemList();\n    app.store.all('groups').filter(group => group.id() !== '2' && group.id() !== '3').forEach(group => {\n      items.add(group.namePlural(), CheckableButton.component({\n        className: 'GroupFilterButton',\n        icon: group.icon(),\n        checked: this.enabledGroupFilters.includes(group.id()),\n        onclick: () => {\n          const id = group.id();\n          if (this.enabledGroupFilters.includes(id)) {\n            this.enabledGroupFilters = this.enabledGroupFilters.filter(e => e != id);\n          } else {\n            this.enabledGroupFilters.push(id);\n            // Empty the special group filters\n            this.enabledSpecialGroupFilters = [];\n          }\n          this.changeParams(this.params().sort);\n        }\n      }, group.namePlural()));\n    });\n    if (app.initializers.has('flarum-suspend') && app.forum.attribute('hasSuspendPermission')) {\n      items.add('suspend', CheckableButton.component({\n        className: 'GroupFilterButton',\n        icon: 'fas fa-ban',\n        checked: this.enabledSpecialGroupFilters['flarum-suspend'] === 'is:suspended',\n        onclick: () => {\n          const id = 'flarum-suspend';\n          if (this.enabledSpecialGroupFilters[id] === 'is:suspended') {\n            this.enabledSpecialGroupFilters[id] = '';\n          } else {\n            this.enabledSpecialGroupFilters[id] = 'is:suspended';\n            // Empty the group filters\n            this.enabledGroupFilters = [];\n          }\n          this.changeParams(this.params().sort);\n        }\n      }, app.translator.trans('flarum-suspend.forum.user_badge.suspended_tooltip')), 90);\n      items.add('seperator', Separator.component(), 50);\n    }\n    return items;\n  }\n  actionItems() {\n    const items = new ItemList();\n    items.add('refresh', Button.component({\n      title: app.translator.trans('fof-user-directory.forum.page.refresh_tooltip'),\n      icon: 'fas fa-sync',\n      className: 'Button Button--icon',\n      onclick: () => {\n        this.state.refresh();\n        if (app.session.user) {\n          app.store.find('users', app.session.user.id());\n          m.redraw();\n        }\n      }\n    }));\n    return items;\n  }\n\n  /**\n   * Redirect to the index page using the given sort parameter.\n   *\n   * @param {String} sort\n   */\n  changeParams(sort) {\n    const params = this.params();\n    if (sort === app.forum.attribute('userDirectoryDefaultSort')) {\n      delete params.sort;\n    } else {\n      params.sort = sort;\n    }\n    let moreQ = '';\n    for (const filter in this.enabledSpecialGroupFilters) {\n      moreQ += this.enabledSpecialGroupFilters[filter] + ' ';\n    }\n    if (this.enabledGroupFilters.length > 0) {\n      const groupsQ = this.enabledGroupFilters.reduce((prev, curr) => {\n        return `${prev}${prev ? ' ' : ''}group:${curr}`;\n      }, '');\n      params.qBuilder = {\n        groups: groupsQ\n      };\n    } else {\n      params.qBuilder = {\n        groups: '',\n        q: moreQ.trim()\n      };\n    }\n    this.state.refreshParams(params);\n    const routeParams = {\n      ...params\n    };\n    delete routeParams.qBuilder;\n    m.route.set(app.route('fof_user_directory', routeParams));\n  }\n  stickyParams() {\n    return {\n      sort: m.route.param('sort'),\n      q: m.route.param('q')\n    };\n  }\n  params() {\n    return this.stickyParams();\n  }\n}\nflarum.reg.add('fof-user-directory', 'forum/components/UserDirectoryPage', UserDirectoryPage);","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Model from 'flarum/common/Model';\n\n/**\n * Special model used only client-side to hold a free text search value in the search field\n */\nexport default class Text extends Model {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"text\", Model.attribute('text'));\n  }\n}\nflarum.reg.add('fof-user-directory', 'forum/models/Text', Text);","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import Extend from 'flarum/common/extenders';\nimport UserDirectoryPage from './components/UserDirectoryPage';\nimport Text from './models/Text';\nexport default [new Extend.Routes() //\n.add('fof_user_directory', '/users', UserDirectoryPage), new Extend.Store() //\n.add('fof-user-directory-text', Text)];","import app from 'flarum/forum/app';\nimport extendCommentPost from './extenders/extendCommentPost';\nimport extendUsersSearchSource from './extenders/extendUsersSearchSource';\nimport extendIndexPage from './extenders/extendIndexPage';\nexport { default as extend } from './extend';\napp.initializers.add('fof-user-directory', function () {\n  extendCommentPost();\n  extendUsersSearchSource();\n  extendIndexPage();\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","reg","linkGroupMentions","attribute","this","$","each","hasClass","name","find","text","group","getBy","slice","link","q","id","on","e","m","route","set","getAttribute","preventDefault","addClass","wrap","extendCommentPost","extend","add","extendUsersSearchSource","view","query","toLowerCase","splice","className","href","icon","trans","extendIndexPage","items","SmallUserCard","infoItems","user","attrs","app","translator","ago","joinTime","UserDirectoryUserCard","super","has","setPriority","count","discussionCount","commentCount","UserDirectoryListItem","vnode","useSmallCards","attributes","controlsButtonClassName","component","UserDirectoryList","state","params","getParams","loading","isLoading","moreResults","onclick","loadMore","bind","empty","isSearchResults","users","map","SortMap","sortMap","username_az","username_za","newest","oldest","most_discussions","least_discussions","UserDirectoryState","constructor","window","qBuilder","requestParams","include","filter","sortKey","sort","forum","default","clear","redraw","refreshParams","newParams","hasUsers","keys","some","assign","values","join","trim","refresh","loadResults","then","results","parseResults","offset","preloadedUsers","preloadedApiDocument","Promise","resolve","page","store","length","push","payload","links","next","CheckableButton","getButtonContent","children","prev","checked","AbstractType","suggestions","resourceType","search","renderKind","resource","renderLabel","applyFilter","initializeFromParams","TextFilter","createRecord","split","word","indexOf","GroupFilter","all","forEach","nameSingular","namePlural","color","style","backgroundColor","qWithSpacesAround","groups","queryGroups","startsWith","queryGroup","replace","includes","SearchField","oninit","searchIndex","navigator","when","event","onUp","onDown","allSuggestions","onSelect","selectResult","applyFiltering","onRemove","appliedFilters","pop","availableFilters","filterTypes","toArray","focused","param","resources","recipient","index","title","searchResultKind","recipientLabel","placeholder","oninput","performNewSearch","onkeydown","navigate","onfocus","onblur","result","type","filterForResource","f","data","clearSuggestions","concat","console","warn","UserDirectoryHero","heroColor","undefined","viewItems","contentItems","heroIcon","UserDirectoryPage","bodyClass","idSegments","Array","from","matchAll","match","enabledGroupFilters","enabledSpecialGroupFilters","oncreate","hero","sidebar","actionItems","sortOptions","i","options","onchange","changeParams","caretIcon","label","buttonClassName","groupItems","moreQ","groupsQ","reduce","curr","routeParams","stickyParams","_typeof","iterator","Text","r","t","arguments","toPrimitive","TypeError","String","toPropertyKey","configurable","writable"],"sourceRoot":""}