{"version":3,"sources":["webpack://@fof/user-directory/webpack/bootstrap","webpack://@fof/user-directory/external \"flarum.core.compat['app']\"","webpack://@fof/user-directory/external \"flarum.core.compat['extend']\"","webpack://@fof/user-directory/external \"flarum.core.compat['Component']\"","webpack://@fof/user-directory/external \"flarum.core.compat['components/IndexPage']\"","webpack://@fof/user-directory/external \"flarum.core.compat['components/Select']\"","webpack://@fof/user-directory/external \"flarum.core.compat['components/LinkButton']\"","webpack://@fof/user-directory/external \"flarum.core.compat['components/Button']\"","webpack://@fof/user-directory/external \"flarum.core.compat['helpers/listItems']\"","webpack://@fof/user-directory/external \"flarum.core.compat['utils/ItemList']\"","webpack://@fof/user-directory/external \"flarum.core.compat['components/UsersSearchSource']\"","webpack://@fof/user-directory/external \"flarum.core.compat['components/Page']\"","webpack://@fof/user-directory/external \"flarum.core.compat['components/DiscussionComposer']\"","webpack://@fof/user-directory/external \"flarum.core.compat['components/LogInModal']\"","webpack://@fof/user-directory/external \"flarum.core.compat['components/SelectDropdown']\"","webpack://@fof/user-directory/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@fof/user-directory/external \"flarum.core.compat['components/Placeholder']\"","webpack://@fof/user-directory/external \"flarum.core.compat['components/UserCard']\"","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryListItem.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryList.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryPage.js","webpack://@fof/user-directory/./src/forum/index.js","webpack://@fof/user-directory/./forum.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_inheritsLoose","subClass","superClass","constructor","__proto__","UserDirectoryListItem","view","user","this","props","card","UserCard","component","className","controlsButtonClassName","Component","UserDirectoryList","init","loading","moreResults","users","refresh","params","LoadingIndicator","Button","children","app","translator","trans","onclick","loadMore","length","text","Placeholder","map","username","data-id","requestParams","include","filter","sort","sortMap","q","relevance","default","username_az","username_za","newest","oldest","seen_recent","seen_oldest","most_discussions","least_discussions","clear","_this","loadResults","then","results","parseResults","redraw","offset","preloadedUsers","preloadedApiDocument","deferred","resolve","promise","page","join","store","find","push","apply","payload","links","next","lazyRedraw","removeUser","index","indexOf","splice","addUser","unshift","UserDirectoryPage","_Page","previous","cache","fofUserDirectoryList","keys","some","bodyClass","onunload","scrollTop","$","window","IndexPage","hero","listItems","sidebarItems","toArray","viewItems","actionItems","render","config","isInitialized","context","arguments","extend","css","setTitle","setTitleCount","height","scroll","setTimeout","items","replace","SelectDropdown","navItems","buttonClassName","stickyParams","add","LinkButton","href","route","icon","ItemList","sortOptions","Select","options","onchange","changeSort","title","session","id","searching","clearSearch","routeName","param","newDiscussion","composeNewDiscussion","modal","show","LogInModal","onlogin","DiscussionComposer","composer","load","Page","initializers","routes","fof_user_directory","path","UsersSearchSource","query","toLowerCase","forum","attribute","__webpack_exports__","UserDirectoryPage_UserDirectoryPage"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['components/UsersSearchSource'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/DiscussionComposer'];","module.exports = flarum.core.compat['components/LogInModal'];","module.exports = flarum.core.compat['components/SelectDropdown'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Placeholder'];","module.exports = flarum.core.compat['components/UserCard'];","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Component from 'flarum/Component';\nimport UserCard from 'flarum/components/UserCard';\n\nexport default class UserDirectoryListItem extends Component {\n    view() {\n        const user = this.props.user;\n        let\n            card = UserCard.component({\n                user,\n                className: 'UserCard--directory',\n                controlsButtonClassName: 'Button Button--icon Button--flat'\n            });\n\n        return (\n            <div className=\"User\">\n                {card}\n            </div>\n        );\n    }\n}\n","import app from 'flarum/app';\nimport Component from 'flarum/Component';\nimport Button from 'flarum/components/Button';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport Placeholder from 'flarum/components/Placeholder';\nimport UserDirectoryListItem from './UserDirectoryListItem';\n\n/**\n * The `DiscussionList` component displays a list of discussions.\n *\n * ### Props\n *\n * - `params` A map of parameters used to construct a refined parameter object\n *   to send along in the API request to get discussion results.\n */\nexport default class UserDirectoryList extends Component {\n  init() {\n    /**\n     * Whether or not discussion results are loading.\n     *\n     * @type {Boolean}\n     */\n    this.loading = true;\n\n    /**\n     * Whether or not there are more results that can be loaded.\n     *\n     * @type {Boolean}\n     */\n    this.moreResults = false;\n\n    /**\n     * The users in the user directory list.\n     *\n     * @type {User[]}\n     */\n    this.users = [];\n\n    this.refresh();\n  }\n\n  view() {\n    const params = this.props.params;\n    let loading;\n\n    if (this.loading) {\n      loading = LoadingIndicator.component();\n    } else if (this.moreResults) {\n      loading = Button.component({\n        children: app.translator.trans('core.forum.discussion_list.load_more_button'),\n        className: 'Button',\n        onclick: this.loadMore.bind(this)\n      });\n    }\n\n    if (this.users.length === 0 && !this.loading) {\n      const text = app.translator.trans('core.forum.discussion_list.empty_text');\n      return (\n        <div className=\"DiscussionList\">\n          {Placeholder.component({text})}\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"UserDirectoryList\">\n          {this.users.map(user => {\n            return (\n              <div key={user.username()} data-id={user.username()}>\n                {UserDirectoryListItem.component({user, params})}\n              </div>\n            );\n          })}\n        <div className=\"UserDirectoryList-loadMore\">\n          {loading}\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Get the parameters that should be passed in the API request to get\n   * discussion results.\n   *\n   * @return {Object}\n   * @api\n   */\n  requestParams() {\n    const params = {include: [], filter: {}};\n\n    params.sort = this.sortMap()[this.props.params.sort];\n\n    if (this.props.params.q) {\n      params.filter.q = this.props.params.q;\n    }\n\n    return params;\n  }\n\n  /**\n   * Get a map of sort keys (which appear in the URL, and are used for\n   * translation) to the API sort value that they represent.\n   *\n   * @return {Object}\n   */\n  sortMap() {\n    const map = {};\n\n    if (this.props.params.q) {\n      map.relevance = '';\n    } else {\n        map.default = '';\n    }\n    map.username_az = 'username';\n    map.username_za = '-username';\n    map.newest = '-joinedAt';\n    map.oldest = 'joinedAt';\n    map.seen_recent = '-lastSeenAt';\n    map.seen_oldest = 'lastSeenAt';\n    map.most_discussions = '-discussionCount';\n    map.least_discussions = 'discussionCount';\n\n    return map;\n  }\n\n  /**\n   * Clear and reload the discussion list.\n   *\n   * @public\n   */\n  refresh(clear = true) {\n    if (clear) {\n      this.loading = true;\n      this.users = [];\n    }\n\n    return this.loadResults(0).then(\n      results => {\n        this.users = [];\n        this.parseResults(results);\n      },\n      () => {\n        this.loading = false;\n        m.redraw();\n      }\n    );\n  }\n\n  /**\n   * Load a new page of discussion results.\n   *\n   * @param {Integer} offset The index to start the page at.\n   * @return {Promise}\n   */\n  loadResults(offset) {\n    const preloadedUsers = app.preloadedApiDocument();\n\n    if (preloadedUsers) {\n      return m.deferred().resolve(preloadedUsers).promise;\n    }\n\n    const params = this.requestParams();\n    params.page = {offset};\n    params.include = params.include.join(',');\n\n    return app.store.find('users', params);\n  }\n\n  /**\n   * Load the next page of discussion results.\n   *\n   * @public\n   */\n  loadMore() {\n    this.loading = true;\n\n    this.loadResults(this.users.length)\n      .then(this.parseResults.bind(this));\n  }\n\n  /**\n   * Parse results and append them to the discussion list.\n   *\n   * @param {Discussion[]} results\n   * @return {Discussion[]}\n   */\n  parseResults(results) {\n    [].push.apply(this.users, results);\n\n    this.loading = false;\n    this.moreResults = !!results.payload.links.next;\n\n    m.lazyRedraw();\n\n    return results;\n  }\n\n  /**\n   * Remove a discussion from the list if it is present.\n   *\n   * @param {Discussion} discussion\n   * @public\n   */\n  removeUser(user) {\n    const index = this.users.indexOf(user);\n\n    if (index !== -1) {\n      this.users.splice(index, 1);\n    }\n  }\n\n  /**\n   * Add a discussion to the top of the list.\n   *\n   * @param {Discussion} discussion\n   * @public\n   */\n  addUser(user) {\n    this.users.unshift(user);\n  }\n}\n","import {extend} from 'flarum/extend';\nimport app from 'flarum/app';\nimport Page from 'flarum/components/Page';\nimport ItemList from 'flarum/utils/ItemList';\nimport listItems from 'flarum/helpers/listItems';\nimport IndexPage from 'flarum/components/IndexPage';\nimport DiscussionComposer from 'flarum/components/DiscussionComposer';\nimport LogInModal from 'flarum/components/LogInModal';\nimport Select from 'flarum/components/Select';\nimport Button from 'flarum/components/Button';\nimport LinkButton from 'flarum/components/LinkButton';\nimport SelectDropdown from 'flarum/components/SelectDropdown';\nimport UserDirectoryList from './UserDirectoryList';\n\n/**\n * The `IndexPage` component displays the index page, including the welcome\n * hero, the sidebar, and the discussion list.\n */\nexport default class UserDirectoryPage extends Page {\n    init() {\n        super.init();\n\n\n        // If the user is coming from the discussion list, then they have either\n        // just switched one of the parameters (filter, sort, search) or they\n        // probably want to refresh the results. We will clear the discussion list\n        // cache so that results are reloaded.\n        if (app.previous instanceof UserDirectoryPage) {\n            app.cache.fofUserDirectoryList = null;\n        }\n\n        const params = this.params();\n\n        if (app.cache.fofUserDirectoryList) {\n            // Compare the requested parameters (sort, search query) to the ones that\n            // are currently present in the cached discussion list. If they differ, we\n            // will clear the cache and set up a new discussion list component with\n            // the new parameters.\n            Object.keys(params).some(key => {\n                if (app.cache.fofUserDirectoryList.props.params[key] !== params[key]) {\n                    app.cache.fofUserDirectoryList = null;\n                    return true;\n                }\n            });\n        }\n\n        if (!app.cache.fofUserDirectoryList) {\n            app.cache.fofUserDirectoryList = new UserDirectoryList({params});\n        }\n\n        this.bodyClass = 'User--directory';\n    }\n\n    onunload() {\n        // Save the scroll position so we can restore it when we return to the\n        // discussion list.\n        app.cache.scrollTop = $(window).scrollTop();\n    }\n\n    view() {\n        return (\n            <div className=\"IndexPage\">\n                {IndexPage.prototype.hero()}\n                <div className=\"container\">\n                    <div className=\"sideNavContainer\">\n                        <nav className=\"IndexPage-nav sideNav\">\n                            <ul>{listItems(this.sidebarItems().toArray())}</ul>\n                        </nav>\n                        <div className=\"IndexPage-results sideNavOffset\">\n                            <div className=\"IndexPage-toolbar\">\n                                <ul className=\"IndexPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\n                                <ul className=\"IndexPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n                            </div>\n                            {app.cache.fofUserDirectoryList.render()}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    config(isInitialized, context) {\n        super.config(...arguments);\n\n        if (isInitialized) return;\n\n        extend(context, 'onunload', () => $('#app').css('min-height', ''));\n\n        app.setTitle('');\n        app.setTitleCount(0);\n\n        // Work out the difference between the height of this hero and that of the\n        // previous hero. Maintain the same scroll position relative to the bottom\n        // of the hero so that the sidebar doesn't jump around.\n        const scrollTop = app.cache.scrollTop;\n\n        $('#app').css('min-height', $(window).height());\n\n        // Scroll to the remembered position. We do this after a short delay so that\n        // it happens after the browser has done its own \"back button\" scrolling,\n        // which isn't right. https://github.com/flarum/core/issues/835\n        const scroll = () => $(window).scrollTop(scrollTop);\n        scroll();\n        setTimeout(scroll, 1);\n    }\n\n    /**\n     * Build an item list for the sidebar of the index page. By default this is a\n     * \"New Discussion\" button, and then a DropdownSelect component containing a\n     * list of navigation items.\n     *\n     * @return {ItemList}\n     */\n    sidebarItems() {\n        const items = IndexPage.prototype.sidebarItems();\n\n        items.replace('nav',\n            SelectDropdown.component({\n                children: this.navItems(this).toArray(),\n                buttonClassName: 'Button',\n                className: 'App-titleControl'\n            })\n        );\n\n        return items;\n    }\n\n    /**\n     * Build an item list for the navigation in the sidebar of the index page. By\n     * default this is just the 'All Discussions' link.\n     *\n     * @return {ItemList}\n     */\n    navItems() {\n        const items = IndexPage.prototype.navItems();\n        const params = this.stickyParams();\n\n        items.add('fof-user-directory',\n            LinkButton.component({\n                href: app.route('fof_user_directory', params),\n                children: app.translator.trans('fof-user-directory.forum.page.nav'),\n                icon: 'far fa-address-book'\n            }),\n            85\n        );\n\n        return items;\n    }\n\n    /**\n     * Build an item list for the part of the toolbar which is concerned with how\n     * the results are displayed. By default this is just a select box to change\n     * the way discussions are sorted.\n     *\n     * @return {ItemList}\n     */\n    viewItems() {\n        const items = new ItemList();\n        const sortMap = app.cache.fofUserDirectoryList.sortMap();\n\n        const sortOptions = {};\n        for (const i in sortMap) {\n            sortOptions[i] = app.translator.trans('fof-user-directory.forum.page.sort.' + i);\n        }\n\n        items.add('sort',\n            Select.component({\n                options: sortOptions,\n                value: this.params().sort || Object.keys(sortMap)[0],\n                onchange: this.changeSort.bind(this)\n            })\n        );\n\n        return items;\n    }\n\n    /**\n     * Build an item list for the part of the toolbar which is about taking action\n     * on the results. By default this is just a \"mark all as read\" button.\n     *\n     * @return {ItemList}\n     */\n    actionItems() {\n        const items = new ItemList();\n\n        items.add('refresh',\n            Button.component({\n                title: app.translator.trans('core.forum.index.refresh_tooltip'),\n                icon: 'fas fa-sync',\n                className: 'Button Button--icon',\n                onclick: () => {\n                    app.cache.fofUserDirectoryList.refresh();\n                    if (app.session.user) {\n                        app.store.find('users', app.session.user.id());\n                        m.redraw();\n                    }\n                }\n            })\n        );\n\n        return items;\n    }\n\n    /**\n     * Return the current search query, if any. This is implemented to activate\n     * the search box in the header.\n     *\n     * @see Search\n     * @return {String}\n     */\n    searching() {\n        return this.params().q;\n    }\n\n    /**\n     * Redirect to the index page without a search filter. This is called when the\n     * 'x' is clicked in the search box in the header.\n     *\n     * @see Search\n     */\n    clearSearch() {\n        const params = this.params();\n        delete params.q;\n\n        m.route(app.route(this.props.routeName, params));\n    }\n\n    /**\n     * Redirect to the index page using the given sort parameter.\n     *\n     * @param {String} sort\n     */\n    changeSort(sort) {\n        const params = this.params();\n\n        if (sort === Object.keys(app.cache.fofUserDirectoryList.sortMap())[0]) {\n            delete params.sort;\n        } else {\n            params.sort = sort;\n        }\n\n        m.route(app.route(this.props.routeName, params));\n    }\n\n    /**\n     * Get URL parameters that stick between filter changes.\n     *\n     * @return {Object}\n     */\n    stickyParams() {\n        return {\n            sort: m.route.param('sort'),\n            q: m.route.param('q')\n        };\n    }\n\n    /**\n     * Get parameters to pass to the UserDirectoryList component.\n     *\n     * @return {Object}\n     */\n    params() {\n        const params = this.stickyParams();\n\n        params.filter = m.route.param('filter');\n\n        return params;\n    }\n\n    /**\n     * Log the user in and then open the composer for a new discussion.\n     *\n     * @return {Promise}\n     */\n    newDiscussion() {\n        const deferred = m.deferred();\n\n        if (app.session.user) {\n            this.composeNewDiscussion(deferred);\n        } else {\n            app.modal.show(\n                new LogInModal({\n                    onlogin: this.composeNewDiscussion.bind(this, deferred)\n                })\n            );\n        }\n\n        return deferred.promise;\n    }\n\n    /**\n     * Initialize the composer for a new discussion.\n     *\n     * @param {Deferred} deferred\n     * @return {Promise}\n     */\n    composeNewDiscussion(deferred) {\n        const component = new DiscussionComposer({user: app.session.user});\n\n        app.composer.load(component);\n        app.composer.show();\n\n        deferred.resolve(component);\n\n        return deferred.promise;\n    }\n}\n","import {extend} from 'flarum/extend';\nimport app from 'flarum/app';\nimport UsersSearchSource from 'flarum/components/UsersSearchSource';\nimport LinkButton from 'flarum/components/LinkButton';\nimport IndexPage from 'flarum/components/IndexPage';\nimport UserDirectoryPage from './components/UserDirectoryPage';\n\n// Allow other extensions to extend the page\nexport {UserDirectoryPage};\n\napp.initializers.add('fof-user-directory', app => {\n    app.routes.fof_user_directory = {path: '/users', component: UserDirectoryPage.component()};\n\n    extend(UsersSearchSource.prototype, 'view', function (view, query) {\n        if (!view) {\n            return;\n        }\n\n        query = query.toLowerCase();\n\n        view.splice(1, 0, <li>\n            {LinkButton.component({\n                icon: 'fas fa-search',\n                children: app.translator.trans('fof-user-directory.forum.search.users_heading', {query}),\n                href: app.route('fof_user_directory', {q: query}),\n            })}\n        </li>);\n    });\n\n    extend(IndexPage.prototype, 'navItems', items => {\n        if (app.forum.attribute('canSeeUserDirectoryLink')) {\n            items.add('fof-user-directory',\n                LinkButton.component({\n                    href: app.route('fof_user_directory'),\n                    children: app.translator.trans('fof-user-directory.forum.page.nav'),\n                    icon: 'far fa-address-book'\n                }),\n                85\n            );\n        }\n    });\n});\n","export * from './src/forum';\n"],"sourceRoot":""}