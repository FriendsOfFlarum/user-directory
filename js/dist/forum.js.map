{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,gPCL9D,MAAM,EAA+BC,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,a,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,8B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCAzC,SAASC,IAYtB,OAXAA,EAAWf,OAAOgB,OAAShB,OAAOgB,OAAOC,OAAS,SAAUC,GAC1D,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAASF,UAAUD,GACvB,IAAK,IAAIrB,KAAOwB,EACVtB,OAAOM,UAAUC,eAAeC,KAAKc,EAAQxB,KAC/CoB,EAAOpB,GAAOwB,EAAOxB,GAG3B,CACA,OAAOoB,CACT,EACOH,EAASQ,MAAMC,KAAMJ,UAC9B,CCbe,SAASK,EAAgB1B,EAAG2B,GAKzC,OAJAD,EAAkBzB,OAAO2B,eAAiB3B,OAAO2B,eAAeV,OAAS,SAAyBlB,EAAG2B,GAEnG,OADA3B,EAAE6B,UAAYF,EACP3B,CACT,EACO0B,EAAgB1B,EAAG2B,EAC5B,CCLe,SAASG,EAAeC,EAAUC,GAC/CD,EAASxB,UAAYN,OAAOgC,OAAOD,EAAWzB,WAC9CwB,EAASxB,UAAU2B,YAAcH,EACjCH,EAAeG,EAAUC,EAC3B,CCLA,MAAM,EAA+BnB,OAAOC,KAAKC,OAAO,0B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,yB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,oC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,8B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,oB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,sC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,6B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,0B,aCInCoB,EAAa,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAZ,MAAA,KAAAH,YAAA,KAS/B,OAT+BS,EAAAK,EAAAC,GAAAD,EAAA5B,UAEhC8B,UAAA,WACE,IAAMC,EAAQ,IAAIC,KACZC,EAAOf,KAAKgB,MAAMD,KAIxB,OAFAF,EAAMI,IAAI,SAAUC,IAAIC,WAAWC,MAAM,mCAAoC,CAAEC,IAAKC,IAAUP,EAAKQ,eAE5FV,CACT,EAACH,CAAA,CAT+B,CAASc,KCJ3C,MAAM,EAA+BpC,OAAOC,KAAKC,OAAO,uB,aCMnCmC,EAAqB,SAAAd,GAAA,SAAAc,IAAA,OAAAd,EAAAZ,MAAA,KAAAH,YAAA,KAuCvC,OAvCuCS,EAAAoB,EAAAd,GAAAc,EAAA3C,UAMxC8B,UAAA,WACE,IAAMC,EAAKF,EAAA7B,UAAS8B,UAAS5B,KAAC,MACxB+B,EAAOf,KAAKgB,MAAMD,KA8BxB,OA5BIF,EAAMa,IAAI,aAAab,EAAMc,YAAY,WAAY,KACrDd,EAAMa,IAAI,WAAWb,EAAMc,YAAY,SAAU,IACjDd,EAAMa,IAAI,WAAWb,EAAMc,YAAY,SAAU,IACjDd,EAAMa,IAAI,sBAAsBb,EAAMc,YAAY,oBAAqB,IACvEd,EAAMa,IAAI,mBAAmBb,EAAMc,YAAY,iBAAkB,IAErEd,EAAMI,IACJ,mBACAW,EAAA,OAAKC,UAAU,YACZC,IAAK,kBACLZ,IAAAA,WAAeE,MAAM,0DAA2D,CAC/EW,MAAOhB,EAAKiB,qBAGhB,IAGFnB,EAAMI,IACJ,gBACAW,EAAA,OAAKC,UAAU,YACZC,IAAK,mBACLZ,IAAAA,WAAeE,MAAM,oDAAqD,CACzEW,MAAOhB,EAAKkB,kBAGhB,IAGKpB,CACT,EAACY,CAAA,CAvCuC,CAASD,KCD9BU,EAAqB,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAApC,MAAA,KAAAH,YAAA,KAWvC,OAXuCS,EAAA6B,EAAAC,GAAAD,EAAApD,UACxCsD,KAAA,SAAKC,GACH,IAAAC,EAAgCtC,KAAKgB,MAA7BD,EAAIuB,EAAJvB,KAAMwB,EAAaD,EAAbC,cAERC,EAAa,CACjBzB,KAAAA,EACAc,UAAW,uBAAsBU,EAAgB,mBAAqB,IACtEE,wBAAyB,oCAG3B,OAAOb,EAAA,OAAKC,UAAU,QAAQU,EAAgB7B,EAAcgC,UAAUF,GAAcf,EAAsBiB,UAAUF,GACtH,EAACN,CAAA,CAXuC,CAASS,KCK9BC,EAAiB,SAAAT,GAAA,SAAAS,IAAA,OAAAT,EAAApC,MAAA,KAAAH,YAAA,KA6CnC,OA7CmCS,EAAAuC,EAAAT,GAAAS,EAAA9D,UACpCsD,KAAA,WACE,IAIIS,EAJIC,EAAU9C,KAAKgB,MAAf8B,MAEFC,EAASD,EAAME,YACfT,EAAgBrB,IAAAA,MAAU+B,UAAU,2BAe1C,GAZIH,EAAMI,YACRL,EAAUM,IAAAA,YACDL,EAAMM,cACfP,EAAUQ,IAAAA,UACR,CACExB,UAAW,SACXyB,QAASR,EAAMS,SAAS9D,KAAKqD,IAE/B5B,IAAAA,WAAeE,MAAM,oDAIrB0B,EAAMU,QAAS,CACjB,IAAMC,EAAOvC,IAAAA,WAAeE,MAAM,4CAClC,OAAOQ,EAAA,OAAKC,UAAU,kBAAkB6B,IAAAA,UAAsB,CAAED,KAAAA,IAClE,CAEA,OACE7B,EAAA,OACEC,UACE,qBACCiB,EAAMa,kBAAoB,oCAAsC,KAChEpB,EAAgB,kCAAoC,KAGvDX,EAAA,MAAIC,UAAU,2BACXiB,EAAMc,MAAMC,KAAI,SAAC9C,GAChB,OACEa,EAAA,MAAItD,IAAKyC,EAAK+C,KAAM,UAAS/C,EAAK+C,MAC/B5B,EAAsBQ,UAAU,CAAE3B,KAAAA,EAAMgC,OAAAA,EAAQR,cAAAA,IAGvD,KAEFX,EAAA,OAAKC,UAAU,8BAA8BgB,GAGnD,EAACD,CAAA,CA7CmC,CAASD,KCN1BoB,EAAO,oBAAAA,IAAA,CAUzB,OAVyBA,EAAAjF,UAC1BkF,QAAA,WACE,MAAO,CACLC,YAAa,WACbC,YAAa,YACbC,OAAQ,YACRC,OAAQ,WACRC,iBAAkB,mBAClBC,kBAAmB,kBAEvB,EAACP,CAAA,CAVyB,GCCPQ,EAAkB,WACrC,SAAAA,EAAYxB,EAAa7B,QAAP,IAAN6B,IAAAA,EAAS,CAAC,QAAM,IAAH7B,IAAAA,EAAMsD,OAAOtD,KACpClB,KAAK+C,OAASA,EAEd/C,KAAKkB,IAAMA,EAEXlB,KAAK4D,MAAQ,GAEb5D,KAAKoD,aAAc,EAEnBpD,KAAK6C,SAAU,EAEf7C,KAAKyE,SAAW,CAAC,CACnB,CAAC,IAAAC,EAAAH,EAAAzF,UAiHA,OAjHA4F,EAEDC,cAAA,WACE,IAAM5B,EAAS,CAAE6B,QAAS,GAAIC,OAAQ,CAAC,GAEjCC,EAAU9E,KAAK+C,OAAOgC,MAAQ7D,IAAI8D,MAAM/B,UAAU,4BASxD,OANAF,EAAOgC,KAAO/E,KAAKgE,UAAUc,GAEzB9E,KAAK+C,OAAOkC,IACdlC,EAAO8B,OAAOI,EAAIjF,KAAK+C,OAAOkC,GAGzBlC,CACT,EAAC2B,EAEDV,QAAA,WACE,OAAAzE,EAAA,CACE2F,QAAS,KACN,IAAInB,GAAUC,UAErB,EAACU,EAED1B,UAAA,WACE,OAAOhD,KAAK+C,MACd,EAAC2B,EAEDS,MAAA,WACEnF,KAAK4D,MAAQ,GACbhC,EAAEwD,QACJ,EAACV,EAEDW,cAAA,SAAcC,GAAW,IAAAC,EAAA,KAClBvF,KAAKwF,aAAchH,OAAOiH,KAAKH,GAAWI,MAAK,SAACpH,GAAG,OAAKiH,EAAKvC,YAAY1E,KAASgH,EAAUhH,EAAI,MAEnG0B,KAAK+C,OAASuC,EAEVA,EAAUb,WACZjG,OAAOgB,OAAOQ,KAAKyE,SAAUa,EAAUb,UAAY,CAAC,GACpDzE,KAAK+C,OAAOkC,EAAIzG,OAAOmH,OAAO3F,KAAKyE,UAAUmB,KAAK,KAAKC,QAGpD7F,KAAK+C,OAAOkC,EAIjBjF,KAAK8F,UAET,EAACpB,EAEDoB,QAAA,WAAU,IAAAC,EAAA,KAKR,OAJA/F,KAAK6C,SAAU,EAEf7C,KAAKmF,QAEEnF,KAAKgG,cAAcC,MACxB,SAACC,GACCH,EAAKnC,MAAQ,GACbmC,EAAKI,aAAaD,EACpB,IACA,WACEH,EAAKlD,SAAU,EACfjB,EAAEwD,QACJ,GAEJ,EAACV,EAEDsB,YAAA,SAAYI,GACV,IAAMC,EAAiBrG,KAAKkB,IAAIoF,uBAEhC,GAAID,EACF,OAAOE,QAAQC,QAAQH,GAGzB,IAAMtD,EAAS/C,KAAK2E,gBAIpB,OAHA5B,EAAO0D,KAAO,CAAEL,OAAAA,GAChBrD,EAAO6B,QAAU7B,EAAO6B,QAAQgB,KAAK,KAE9B5F,KAAKkB,IAAIwF,MAAMC,KAAK,QAAS5D,EACtC,EAAC2B,EAEDnB,SAAA,WACEvD,KAAK6C,SAAU,EAEf7C,KAAKgG,YAAYhG,KAAK4D,MAAM/D,QAAQoG,KAAKjG,KAAKmG,aAAa1G,KAAKO,MAClE,EAAC0E,EAEDyB,aAAA,SAAaD,GAAS,IAAAU,EAQpB,OAPAA,EAAA5G,KAAK4D,OAAMiD,KAAI9G,MAAA6G,EAAIV,GAEnBlG,KAAK6C,SAAU,EACf7C,KAAKoD,cAAgB8C,EAAQY,QAAQC,SAAWb,EAAQY,QAAQC,MAAMC,KAEtEpF,EAAEwD,SAEKc,CACT,EAACxB,EAEDc,SAAA,WACE,OAAOxF,KAAK4D,MAAM/D,OAAS,CAC7B,EAAC6E,EAEDxB,UAAA,WACE,OAAOlD,KAAK6C,OACd,EAAC6B,EAEDf,gBAAA,WACE,QAAS3D,KAAK+C,OAAOkC,CACvB,EAACP,EAEDlB,MAAA,WACE,OAAQxD,KAAKwF,aAAexF,KAAKkD,WACnC,EAACqB,CAAA,CA9HoC,GCFlB0C,EAAe,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAnH,MAAA,KAAAH,YAAA,KAajC,OAbiCS,EAAA4G,EAAAC,GAAAD,EAAAnI,UAOlCqI,iBAAA,SAAiBC,GACf,IAAMC,EAAIH,EAAApI,UAASqI,iBAAgBnI,KAAC,KAAAoI,GAIpC,OAFIpH,KAAKgB,MAAMsG,SAASD,EAAKR,KAAK/E,IAAK,eAAgB,CAAED,UAAW,6BAE7DwF,CACT,EAACJ,CAAA,CAbiC,CAAS5D,KCH7C,MAAM,EAA+BjE,OAAOC,KAAKC,OAAO,yB,cCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,oC,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,kB,eCGnCiI,GAAY,WAC/B,SAAAA,IACEvH,KAAKwH,YAAc,GACnBxH,KAAK6C,SAAU,CACjB,CAEA,IAAA6B,EAAA6C,EAAAzI,UAuDC,OAvDD4F,EAIA+C,aAAA,WACE,EAGF/C,EAMAgD,OAAA,SAAOC,GACL,EAGFjD,EAMAkD,WAAA,SAAWC,GACT,EAGFnD,EAMAoD,YAAA,SAAYD,GACV,EAGFnD,EAKAqD,YAAA,SAAYhF,EAAQ8E,GAClB,EAGFnD,EAMAsD,qBAAA,SAAqBjF,GACnB,EACDwE,CAAA,CA7D8B,GCEZU,GAAU,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAnI,MAAA,KAAAH,YAAA,KAAAS,EAAA4H,EAAAC,GAAA,IAAAxD,EAAAuD,EAAAnJ,UAmD5B,OAnD4B4F,EAC7B+C,aAAA,WACE,MAAO,yBACT,EAAC/C,EAEDgD,OAAA,SAAOC,GAML3H,KAAKwH,YALAG,EAKc,CACjBzG,IAAAA,MAAUiH,aAAa,0BAA2B,CAChD3F,WAAY,CACViB,KAAMkE,MAPS,EAWvB,EAACjD,EAEDkD,WAAA,WACE,OAAO1G,IAAAA,WAAeE,MAAM,6CAC9B,EAACsD,EAEDoD,YAAA,SAAYD,GACV,OAAOjG,EAAE,4BAA6BiG,EAASpE,OACjD,EAACiB,EAEDqD,YAAA,SAAYhF,EAAQ8E,GAClB9E,EAAOkC,EAAIlC,EAAOkC,EAAIlC,EAAOkC,EAAI,IAAM,GACvClC,EAAOkC,GAAK4C,EAASpE,MACvB,EAACiB,EAEDsD,qBAAA,SAAqBjF,GACnB,OAAKA,EAAOkC,EAILsB,QAAQC,QACbzD,EAAOkC,EACJmD,MAAM,KAENvD,QAAO,SAACwD,GAAI,OAA4B,IAAvBA,EAAKC,QAAQ,IAAW,IACzCzE,KAAI,SAACwE,GAAI,OACRnH,IAAAA,MAAUiH,aAAa,0BAA2B,CAChD3F,WAAY,CACViB,KAAM4E,IAER,KAbC9B,QAAQC,QAAQ,GAgB3B,EAACyB,CAAA,CAnD4B,CAASV,ICLxC,MAAM,GAA+BnI,OAAOC,KAAKC,OAAO,uB,eCOnCiJ,GAAW,SAAAL,GAAA,SAAAK,IAAA,OAAAL,EAAAnI,MAAA,KAAAH,YAAA,KAAAS,EAAAkI,EAAAL,GAAA,IAAAxD,EAAA6D,EAAAzJ,UAuE7B,OAvE6B4F,EAC9B+C,aAAA,WACE,MAAO,QACT,EAAC/C,EAEDgD,OAAA,SAAOC,GAAO,IAAApC,EAAA,KACZvF,KAAKwH,YAAc,GAEdG,IAILA,EAAQA,EAAMa,cAEdtH,IAAAA,MAAUuH,IAAI,UAAUC,SAAQ,SAACC,GAE3BA,EAAM7E,OAAS8E,KAAAA,YAIwC,IAAvDD,EAAME,eAAeL,cAAcF,QAAQX,KAAsE,IAArDgB,EAAMG,aAAaN,cAAcF,QAAQX,IACvGpC,EAAKiC,YAAYX,KAAK8B,GAE1B,IACF,EAACjE,EAEDkD,WAAA,WACE,OAAO1G,IAAAA,WAAeE,MAAM,8CAC9B,EAACsD,EAEDoD,YAAA,SAAYa,GACV,OAAO/G,EACL,4BACA+G,EAAMI,QACF,CACElH,UAAW,UACXmH,MAAO,CACLC,gBAAiBN,EAAMI,UAG3B,CAAC,EACL,CAACJ,EAAM7G,OAAS,CAACA,IAAK6G,EAAM7G,QAAS,KAAO,KAAM6G,EAAMG,cAE5D,EAACpE,EAEDqD,YAAA,SAAYhF,EAAQ4F,GAClB5F,EAAOkC,EAAIlC,EAAOkC,EAAIlC,EAAOkC,EAAI,IAAM,GACvClC,EAAOkC,GAAK,SAAW0D,EAAM7E,IAC/B,EAACY,EAEDsD,qBAAA,SAAqBjF,GACnB,IAAKA,EAAOkC,EACV,OAAOsB,QAAQC,QAAQ,IAGzB,IAAM0C,EAAoB,IAAMnG,EAAOkC,EAAI,IAErCkE,EAAS,GAETC,EAAcF,EAAkBd,MAAM,KAAKvD,QAAO,SAACI,GAAC,OAAKA,EAAEoE,WAAW,SAAS,IAWrF,OATAnI,IAAAA,MAAUuH,IAAI,UAAUC,SAAQ,SAACC,GAC/BS,EAAYV,SAAQ,SAACY,GACFA,EAAWC,QAAQ,SAAU,IAAInB,MAAM,KAC3CoB,SAASb,EAAM7E,OAC1BqF,EAAOtC,KAAK8B,EAEhB,GACF,IAEOpC,QAAQC,QAAQ2C,EACzB,EAACZ,CAAA,CAvE6B,CAAShB,ICEpBkC,GAAW,SAAAtH,GAAA,SAAAsH,IAAA,OAAAtH,EAAApC,MAAA,KAAAH,YAAA,KAAAS,EAAAoJ,EAAAtH,GAAA,IAAAuC,EAAA+E,EAAA3K,UA0M7B,OA1M6B4F,EAC9BgF,OAAA,SAAOrH,GAAO,IAAAkD,EAAA,KACZpD,EAAArD,UAAM4K,OAAM1K,KAAC,KAAAqD,GAEbrC,KAAK2J,YAAc,EACnB3J,KAAK4J,UAAY,IAAIC,MACrB7J,KAAK4J,UACFE,MAAK,SAACC,GAGL,MAAqB,QAAdA,EAAMzL,OAAmBiH,EAAKV,MACvC,IACCmF,MAAK,WACAzE,EAAKoE,YAAc,IACrBpE,EAAKoE,cACL/H,EAAEwD,SAEN,IACC6E,QAAO,WACF1E,EAAKoE,YAAcpE,EAAK2E,iBAAiBrK,OAAS,IACpD0F,EAAKoE,cACL/H,EAAEwD,SAEN,IACC+E,UAAS,WACJ5E,EAAKV,QACPU,EAAK6E,aAAa7E,EAAK2E,iBAAiB3E,EAAKoE,cAC7C/H,EAAEwD,UAEFG,EAAK8E,gBAET,IACCC,UAAS,WACR/E,EAAKgF,eAAeC,KACtB,IAEFxK,KAAKyK,iBAAmBzK,KAAK0K,cAAcC,UAC3C3K,KAAKuK,eAAiB,GAEtBvK,KAAK6E,OAAS,GACd7E,KAAK4K,SAAU,EAGf5K,KAAKyK,iBAAiB/B,SAAQ,SAAC7D,GAC7BA,EACGmD,qBAAqB,CACpBjD,KAAMnD,EAAEiJ,MAAMC,MAAM,QACpB7F,EAAGrD,EAAEiJ,MAAMC,MAAM,OAElB7E,MAAK,SAAC8E,GAAc,IAAAC,GACnBA,EAAAzF,EAAKgF,gBAAe1D,KAAI9G,MAAAiL,EAAID,GAC5BnJ,EAAEwD,QACJ,GACJ,GACF,EAACV,EAEDtC,KAAA,WAAO,IAAA2D,EAAA,KACCyB,EAAcxH,KAAKkK,iBAEnBrH,EAAU7C,KAAKyK,iBAAiB/E,MAAK,SAACb,GAAM,OAAKA,EAAOhC,OAAO,IAErE,OACEjB,EAAA,OAAKC,UAAU,4BACbD,EAAA,SAAOC,UAAS,yCAA0C7B,KAAK4K,QAAU,QAAU,KACjFhJ,EAAA,QAAMC,UAAU,qCACb7B,KAAKuK,eAAe1G,KAAI,SAACoH,EAAWC,GAAK,OACxCtJ,EAAA,QACEC,UAAU,kCACVyB,QAAS,WACPyC,EAAKwE,eAAeY,OAAOD,EAAO,GAClCnF,EAAKsE,gBACP,EACAe,MAAOrF,EAAKsF,iBAAiBJ,IAE5BlF,EAAKuF,eAAeL,GAChB,KAGXrJ,EAAA,SACEC,UAAU,cACV0J,YAAarK,IAAAA,WAAeE,MAAM,qDAClCjC,MAAOa,KAAK6E,OACZ2G,QAASC,KAAS,SAAS,SAACtM,GAC1B4G,EAAKlB,OAAS1F,EACd4G,EAAK2F,kBACP,IACAC,UAAW3L,KAAK4J,UAAUgC,SAASnM,KAAKO,KAAK4J,WAC7CiC,QAAS,WACP9F,EAAK6E,SAAU,CACjB,EACAkB,OAAQ,WACN/F,EAAK6E,SAAU,CACjB,IAED/H,GAAWjB,EAACuB,IAAgB,QAC1BqE,EAAY3H,QACb+B,EAAA,MAAIC,UAAU,iBACX2F,EAAY3D,KAAI,SAACkI,EAAQb,GAAK,OAC7BtJ,EAAA,MACEC,UAAWkE,EAAK4D,cAAgBuB,EAAQ,SAAW,GACnD5H,QAAS,WACPyC,EAAKqE,aAAa2B,GAClBhG,EAAKsE,gBACP,GAEAzI,EAAA,UAAQoK,KAAK,UACXpK,EAAA,QAAMC,UAAU,2BAA2BkE,EAAKsF,iBAAiBU,IAChEhG,EAAKuF,eAAeS,IAEpB,MAOnB,EAACrH,EAEDgG,YAAA,WACE,IAAM7J,EAAQ,IAAIC,MAKlB,OAHAD,EAAMI,IAAI,OAAQ,IAAIgH,GAAc,IACpCpH,EAAMI,IAAI,QAAS,IAAIsH,GAAe,IAE/B1H,CACT,EAAC6D,EAEDuH,kBAAA,SAAkBpE,GAChB,OAAO7H,KAAKyK,iBAAiB9D,MAAK,SAACuF,GAAC,OAAKA,EAAEzE,iBAAmBI,EAASsE,KAAKH,IAAI,GAClF,EAACtH,EAED4G,eAAA,SAAezD,GACb,IAAMhD,EAAS7E,KAAKiM,kBAAkBpE,GAEtC,OAAIhD,EACKA,EAAOiD,YAAYD,GAGrB,WACT,EAACnD,EAED2G,iBAAA,SAAiBxD,GACf,IAAMhD,EAAS7E,KAAKiM,kBAAkBpE,GAEtC,OAAIhD,EACKA,EAAO+C,WAAWC,GAGpB,WACT,EAACnD,EAED0F,aAAA,SAAa2B,GACNA,IAIL/L,KAAKuK,eAAe1D,KAAKkF,GACzB/L,KAAKoM,mBACP,EAAC1H,EAED0H,iBAAA,WACEpM,KAAK6E,OAAS,GACd7E,KAAKyK,iBAAiB/B,SAAQ,SAAC7D,GAC7BA,EAAO6C,OAAO,GAChB,GACF,EAAChD,EAEDwF,eAAA,WAAiB,IAAAmC,EACf,OAAOA,EAAA,IAAGC,OAAMvM,MAAAsM,EAAIrM,KAAKyK,iBAAiB5G,KAAI,SAACgB,GAAM,OAAKA,EAAO2C,WAAW,IAC9E,EAAC9C,EAEDgH,iBAAA,WAAmB,IAAAa,EAAA,KACjBvM,KAAK2J,YAAc,EAEnB3J,KAAKyK,iBAAiB/B,SAAQ,SAAC7D,GAC7BA,EAAO6C,OAAO6E,EAAK1H,OACrB,IAEA7E,KAAKgB,MAAM8B,MAAMuC,cAAa9F,EAAC,CAAC,EAAIS,KAAKgB,MAAM8B,MAAME,YAAa,CAAAyB,SAAUzE,KAAKyE,aACnF,EAACC,EAEDD,SAAA,SAAS1B,GAAa,IAAAyJ,EAAA,KAUpB,YAVa,IAANzJ,IAAAA,EAAS,CAAC,GACjB/C,KAAKuK,eAAe7B,SAAQ,SAACb,GAC3B,IAAMhD,EAAS2H,EAAKP,kBAAkBpE,GAElChD,EACFA,EAAOkD,YAAYhF,EAAQ8E,GAE3B4E,QAAQC,KAAK,wCAAyC7E,EAE1D,IACO,CAAEhD,OAAW7E,KAAK6E,OAAM,KAAI9B,EAAOkC,GAAK,IACjD,EAACP,EAED2F,eAAA,WACE,IAAMtH,EAAS,CACbgC,KAAMnD,EAAEiJ,MAAMC,MAAM,SAGtB9K,KAAKyE,SAAS1B,GAEdnB,EAAEiJ,MAAM8B,IAAIzL,IAAAA,MAAU,qBAAsB6B,GAC9C,EAAC0G,CAAA,CA1M6B,CAAS9G,KCTzC,MAAM,GAA+BvD,OAAOC,KAAKC,OAAO,+B,eCoBnCsN,GAAiB,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAA9M,MAAA,KAAAH,YAAA,KAAAS,EAAAuM,EAAAC,GAAA,IAAAnI,EAAAkI,EAAA9N,UA2RnC,OA3RmC4F,EACpCgF,OAAA,SAAOrH,GACLwK,EAAA/N,UAAM4K,OAAM1K,KAAC,KAAAqD,GAEbrC,KAAK8C,MAAQ,IAAIyB,EAAmB,CAAC,GACrCvE,KAAK8C,MAAMuC,cAAcnE,IAAAA,OAAW6B,UAEpC/C,KAAK8M,UAAY,kBAEjB,IAY2FC,EAAAC,EAZvFC,EAAa,GACbjN,KAAK+C,SAASkC,GAChBiI,MAAMC,KAAKnN,KAAK+C,SAASkC,EAAEmI,SAAS,oBAAoB1E,SAAQ,SAAC2E,GAC/DJ,EAAWpG,KAAKwG,EAAM,GACxB,IAEFrN,KAAKsN,oBAAsBL,EACxBrH,KAAK,KACLwC,MAAM,KACNvD,QAAO,SAACf,GAAE,OAAKA,CAAE,IAEpB9D,KAAKuN,2BAA6B,GAC9BrM,IAAAA,aAAiBQ,IAAI,mBAAqBR,IAAAA,MAAU+B,UAAU,yBAE/C,OAAjB8J,EAAI/M,KAAK+C,WAAW,OAAHiK,EAAbD,EAAe9H,IAAf+H,EAAkBxD,SAAS,kBAC7BxJ,KAAKuN,2BAA2B,kBAAoB,gBAIxDrM,IAAAA,QAAY2F,KAAK,QAAS3F,IAAAA,WAAeE,MAAM,kEACjD,EAACsD,EAED8I,SAAA,SAASnL,GACPwK,EAAA/N,UAAM0O,SAAQxO,KAAC,KAAAqD,GAEfnB,IAAAA,SAAauM,IAAYvM,IAAAA,WAAeE,MAAM,sCAChD,EAACsD,EAEDtC,KAAA,WACE,OACER,EAAA,OAAKC,UAAU,aACZ6L,IAAAA,UAAoBC,OACrB/L,EAAA,OAAKC,UAAU,aACbD,EAAA,OAAKC,UAAU,oBACbD,EAAA,OAAKC,UAAU,yBACbD,EAAA,UAAKgM,IAAU5N,KAAK6N,eAAelD,aAErC/I,EAAA,OAAKC,UAAU,mCACbD,EAAA,OAAKC,UAAU,qBACbD,EAAA,MAAIC,UAAU,0BAA0B+L,IAAU5N,KAAK8N,YAAYnD,YACnE/I,EAAA,MAAIC,UAAU,4BAA4B+L,IAAU5N,KAAK+N,cAAcpD,aAEzE/I,EAACgB,EAAiB,CAACE,MAAO9C,KAAK8C,WAM3C,EAEA4B,EAMAmJ,aAAA,WACE,IAAMhN,EAAQ6M,IAAAA,UAAoBG,eAalC,OAXAhN,EAAMmN,WACJ,MACAC,IAAAA,UACE,CACEC,gBAAiB,SACjBrM,UAAW,oBAEb7B,KAAKmO,WAAWxD,YAIb9J,CACT,EAEA6D,EAMAyJ,SAAA,WACE,IAAMtN,EAAQ6M,IAAAA,UAAoBS,WAC5BpL,EAAS/C,KAAKoO,eAcpB,OAZAvN,EAAMI,IACJ,qBACAoN,IAAAA,UACE,CACEC,KAAMpN,IAAAA,MAAU,qBAAsB6B,GACtCjB,KAAM,uBAERZ,IAAAA,WAAeE,MAAM,sCAEvB,IAGKP,CACT,EAAC6D,EAEDoJ,UAAA,WACE,IAAMjN,EAAQ,IAAIC,KACZkD,EAAUhE,KAAK8C,MAAMkB,UAErBuK,EAAc,CAAC,EACrB,IAAK,IAAM5O,KAAKqE,EACduK,EAAY5O,GAAKuB,IAAAA,WAAeE,MAAM,+BAAiCzB,GAmCzE,OAhCAkB,EAAMI,IACJ,OACAuN,IAAAA,UAAiB,CACfC,QAASF,EACTpP,MAAOa,KAAK8C,MAAME,YAAY+B,MAAQ7D,IAAAA,MAAU+B,UAAU,4BAC1DyL,SAAU1O,KAAK2O,aAAalP,KAAKO,QAEnC,KAGFa,EAAMI,IACJ,eACA2N,IAAAA,UACE,CACEC,UAAW,gBACXC,MAAO5N,IAAAA,WAAeE,MAAM,+CAC5B8M,gBAAiB,cACjBrM,UAAW,uBAEb7B,KAAK+O,aAAapE,WAEpB,IAGF9J,EAAMI,IACJ,SACAwI,GAAY/G,UAAU,CACpBI,MAAO9C,KAAK8C,QAEd,IAGKjC,CACT,EAAC6D,EAEDqK,WAAA,WAAa,IAAAxJ,EAAA,KACL1E,EAAQ,IAAIC,KA4DlB,OA1DAI,IAAAA,MACGuH,IAAI,UACJ5D,QAAO,SAAC8D,GAAK,MAAoB,MAAfA,EAAM7E,MAA+B,MAAf6E,EAAM7E,IAAY,IAC1D4E,SAAQ,SAACC,GACR9H,EAAMI,IACJ0H,EAAMG,aACN7B,EAAgBvE,UACd,CACEb,UAAW,oBACXC,KAAM6G,EAAM7G,OACZwF,QAAS/B,EAAK+H,oBAAoB9D,SAASb,EAAM7E,MACjDR,QAAS,WACP,IAAMQ,EAAK6E,EAAM7E,KACbyB,EAAK+H,oBAAoB9D,SAAS1F,GACpCyB,EAAK+H,oBAAsB/H,EAAK+H,oBAAoBzI,QAAO,SAACmK,GAAC,OAAKA,GAAKlL,CAAE,KAEzEyB,EAAK+H,oBAAoBzG,KAAK/C,GAE9ByB,EAAKgI,2BAA6B,IAGpChI,EAAKoJ,aAAapJ,EAAKxC,SAASgC,KAClC,GAEF4D,EAAMG,cAGZ,IAEE5H,IAAAA,aAAiBQ,IAAI,mBAAqBR,IAAAA,MAAU+B,UAAU,0BAChEpC,EAAMI,IACJ,UACAgG,EAAgBvE,UACd,CACEb,UAAW,oBACXC,KAAM,aACNwF,QAA+D,iBAAtDtH,KAAKuN,2BAA2B,kBACzCjK,QAAS,WACP,IAAMQ,EAAK,iBACiC,iBAAxCyB,EAAKgI,2BAA2BzJ,GAClCyB,EAAKgI,2BAA2BzJ,GAAM,IAEtCyB,EAAKgI,2BAA2BzJ,GAAM,eAEtCyB,EAAK+H,oBAAsB,IAG7B/H,EAAKoJ,aAAapJ,EAAKxC,SAASgC,KAClC,GAEF7D,IAAAA,WAAeE,MAAM,sDAEvB,IAGFP,EAAMI,IAAI,YAAagO,KAAAA,YAAuB,KAGzCpO,CACT,EAAC6D,EAEDqJ,YAAA,WAAc,IAAAhI,EAAA,KACNlF,EAAQ,IAAIC,KAkBlB,OAhBAD,EAAMI,IACJ,UACAoC,IAAAA,UAAiB,CACf+H,MAAOlK,IAAAA,WAAeE,MAAM,iDAC5BU,KAAM,cACND,UAAW,sBACXyB,QAAS,WACPyC,EAAKjD,MAAMgD,UACP5E,IAAAA,QAAYH,OACdG,IAAAA,MAAUyF,KAAK,QAASzF,IAAAA,QAAYH,KAAK+C,MACzClC,EAAEwD,SAEN,KAIGvE,CACT,EAEA6D,EAKAiK,aAAA,SAAa5J,GACX,IAAMhC,EAAS/C,KAAK+C,SAEhBgC,IAAS7D,IAAAA,MAAU+B,UAAU,mCACxBF,EAAOgC,KAEdhC,EAAOgC,KAAOA,EAGhB,IAAImK,EAAQ,GACZ,IAAK,IAAMrK,KAAU7E,KAAKuN,2BACxB2B,GAASlP,KAAKuN,2BAA2B1I,GAAU,IAGrD,GAAI7E,KAAKsN,oBAAoBzN,OAAS,EAAG,CACvC,IAAMsP,EAAUnP,KAAKsN,oBAAoB8B,QAAO,SAAC/H,EAAMgI,GACrD,OAAUhI,GAAOA,EAAO,IAAM,IAAE,SAASgI,CAC3C,GAAG,IAEHtM,EAAO0B,SAAW,CAAE0E,OAAQgG,EAC9B,MACEpM,EAAO0B,SAAW,CAAE0E,OAAQ,GAAIlE,EAAGiK,EAAMrJ,QAG3C7F,KAAK8C,MAAMuC,cAActC,GAEzB,IAAMuM,EAAW/P,EAAA,GAAQwD,UAClBuM,EAAY7K,SAEnB7C,EAAEiJ,MAAM8B,IAAIzL,IAAAA,MAAU,qBAAsBoO,GAC9C,EAAC5K,EAED0J,aAAA,WACE,MAAO,CACLrJ,KAAMnD,EAAEiJ,MAAMC,MAAM,QACpB7F,EAAGrD,EAAEiJ,MAAMC,MAAM,KAErB,EAACpG,EAED3B,OAAA,WACE,OAAO/C,KAAKoO,cACd,EAACxB,CAAA,CA3RmC,CAAS2C,KCpB/C,MAAM,GAA+BnQ,OAAOC,KAAKC,OAAO,gB,eCKnCkQ,GAAI,SAAAC,GAAA,SAAAD,IAAA,QAAAjK,EAAAmK,EAAA9P,UAAAC,OAAA8P,EAAA,IAAAzC,MAAAwC,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAAD,EAAAC,GAAAhQ,UAAAgQ,GACO,OADPrK,EAAAkK,EAAAzQ,KAAAe,MAAA0P,EAAA,OAAAnD,OAAAqD,KAAA,MACvBlM,KAAOoM,KAAAA,UAAgB,QAAOtK,CAAA,QADPlF,EAAAmP,EAAAC,GACOD,CAAA,CADP,CAASK,MCGrBC,GAAa,CACxB7I,gBAAAA,EACAwC,YAAAA,GACA/I,cAAAA,EACAkC,kBAAAA,EACAV,sBAAAA,EACA0K,kBAAAA,GACAnL,sBAAAA,GCXWsO,GAAc,CACzBxI,aAAAA,GACAgB,YAAAA,GACAN,WAAAA,ICUW+H,GAAoB,WAC3B9O,IAAAA,MAAU+B,UAAU,4BAA8B/B,IAAAA,MAAU+B,UAAU,mCACxEjD,KAAKiQ,EAAE,iBAAiBC,MAAK,WAC3B,IAAID,EAAEjQ,MAAMmQ,SAAS,wBAArB,CAEA,IAAMC,EAAOH,EAAEjQ,MAAM2G,KAAK,sBAAsBlD,OAC1CkF,EAAQzH,IAAAA,MAAUmP,MAAM,SAAU,aAAcD,EAAKE,MAAM,IAEjE,GAAI3H,EAAO,CACT,IAAM4H,EAAON,EAAE,sCAAsC/O,IAAAA,MAAU,qBAAsB,CAAE+D,EAAG,SAAS0D,EAAM7E,OAAS,UAElHyM,EAAKC,GAAG,SAAS,SAAUxB,GACzBpN,EAAEiJ,MAAM8B,IAAI3M,KAAKyQ,aAAa,SAC9BzB,EAAE0B,gBACJ,IAEAT,EAAEjQ,MAAM2Q,SAAS,wBAAwBC,KAAKL,EAChD,CAdoD,CAetD,GAEJ,EAEArP,IAAAA,aAAiBD,IAAI,sBAAsB,SAACC,GAC1CA,EAAI2P,OAAOC,mBAAqB,CAC9BC,KAAM,SACNrO,UAAWkK,IAGb1L,EAAIwF,MAAMsK,OAAO,2BAA6BxB,IAE9CyB,EAAAA,EAAAA,QAAOC,IAAAA,UAA6B,QAAQ,SAAU9O,EAAMuF,GACrDvF,GAASlB,EAAI8D,MAAM/B,UAAU,6BAA8B/B,EAAI8D,MAAM/B,UAAU,4CAIpF0E,EAAQA,EAAMa,cAEdpG,EAAK+I,OACH,EACA,EACAvJ,EACE,KACAyM,IAAAA,UACE,CACEC,KAAMpN,EAAI2J,MAAM,qBAAsB,CAAE5F,EAAG0C,IAC3C7F,KAAM,iBAERZ,EAAIC,WAAWC,MAAM,gDAAiD,CAAEuG,MAAAA,OAIhF,KAEAsJ,EAAAA,EAAAA,QAAOvD,IAAAA,UAAqB,YAAY,SAAC7M,GACnCK,EAAI8D,MAAM/B,UAAU,4BAA8B/B,EAAI8D,MAAM/B,UAAU,mBACxEpC,EAAMI,IACJ,qBACAoN,IAAAA,UACE,CACEC,KAAMpN,EAAI2J,MAAM,sBAChB/I,KAAM,uBAERZ,EAAIC,WAAWC,MAAM,sCAEvB,GAGN,KAEA6P,EAAAA,EAAAA,QAAOE,IAAAA,UAAuB,WAAYnB,KAC1CiB,EAAAA,EAAAA,QAAOE,IAAAA,UAAuB,WAAYnB,GAC5C,G","sources":["webpack://@fof/user-directory/webpack/bootstrap","webpack://@fof/user-directory/webpack/runtime/compat get default export","webpack://@fof/user-directory/webpack/runtime/define property getters","webpack://@fof/user-directory/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/user-directory/webpack/runtime/make namespace object","webpack://@fof/user-directory/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/UsersSearchSource']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Page']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/SelectDropdown']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/components/UserCard']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/humanTime']\"","webpack://@fof/user-directory/./src/forum/components/SmallUserCard.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/user-directory/./src/forum/components/UserDirectoryUserCard.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryListItem.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryList.js","webpack://@fof/user-directory/./src/common/utils/SortMap.js","webpack://@fof/user-directory/./src/forum/states/UserDirectoryState.js","webpack://@fof/user-directory/./src/forum/components/CheckableButton.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/KeyboardNavigatable']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['utils/ItemList']\"","webpack://@fof/user-directory/./src/forum/searchTypes/AbstractType.js","webpack://@fof/user-directory/./src/forum/searchTypes/TextFilter.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/models/Group']\"","webpack://@fof/user-directory/./src/forum/searchTypes/GroupFilter.js","webpack://@fof/user-directory/./src/forum/components/SearchField.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@fof/user-directory/./src/forum/components/UserDirectoryPage.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/user-directory/./src/forum/models/Text.ts","webpack://@fof/user-directory/./src/forum/components/index.js","webpack://@fof/user-directory/./src/forum/searchTypes/index.js","webpack://@fof/user-directory/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/UsersSearchSource'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/SelectDropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Placeholder'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserCard'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/humanTime'];","import UserCard from 'flarum/forum/components/UserCard';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport humanTime from 'flarum/common/utils/humanTime';\n\nexport default class SmallUserCard extends UserCard {\n  //Overriding infoItems so that other extensions can separately add items to small cards\n  infoItems() {\n    const items = new ItemList();\n    const user = this.attrs.user;\n\n    items.add('joined', app.translator.trans('core.forum.user.joined_date_text', { ago: humanTime(user.joinTime()) }));\n\n    return items;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import UserCard from 'flarum/forum/components/UserCard';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport humanTime from 'flarum/common/utils/humanTime';\nimport icon from 'flarum/common/helpers/icon';\nimport app from 'flarum/forum/app';\n\nexport default class UserDirectoryUserCard extends UserCard {\n  /**\n   * Allowing to add additonal items unique to the user directory.\n   *\n   * @return {ItemList<import('mithril').Children>}\n   */\n  infoItems() {\n    const items = super.infoItems();\n    const user = this.attrs.user;\n\n    if (items.has('lastSeen')) items.setPriority('lastSeen', 100);\n    if (items.has('joined')) items.setPriority('joined', 95);\n    if (items.has('points')) items.setPriority('points', 60);\n    if (items.has('best-answer-count')) items.setPriority('best-answer-count', 68);\n    if (items.has('masquerade-bio')) items.setPriority('masquerade-bio', 50);\n\n    items.add(\n      'discussion-count',\n      <div className=\"userStat\">\n        {icon('fas fa-comment')}\n        {app.translator.trans('fof-user-directory.forum.page.usercard.discussion-count', {\n          count: user.discussionCount(),\n        })}\n      </div>,\n      70\n    );\n\n    items.add(\n      'comment-count',\n      <div className=\"userStat\">\n        {icon('fas fa-comments')}\n        {app.translator.trans('fof-user-directory.forum.page.usercard.post-count', {\n          count: user.commentCount(),\n        })}\n      </div>,\n      69\n    );\n\n    return items;\n  }\n}\n","import Component from 'flarum/common/Component';\nimport UserCard from 'flarum/forum/components/UserCard';\nimport SmallUserCard from './SmallUserCard';\nimport UserDirectoryUserCard from './UserDirectoryUserCard';\n\nexport default class UserDirectoryListItem extends Component {\n  view(vnode) {\n    const { user, useSmallCards } = this.attrs;\n\n    const attributes = {\n      user,\n      className: `UserCard--directory${useSmallCards ? ' UserCard--small' : ''}`,\n      controlsButtonClassName: 'Button Button--icon Button--flat',\n    };\n\n    return <div className=\"User\">{useSmallCards ? SmallUserCard.component(attributes) : UserDirectoryUserCard.component(attributes)}</div>;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport UserDirectoryListItem from './UserDirectoryListItem';\n\n/**\n * Based on Flarum's DiscussionList\n */\nexport default class UserDirectoryList extends Component {\n  view() {\n    const { state } = this.attrs;\n\n    const params = state.getParams();\n    const useSmallCards = app.forum.attribute('userDirectorySmallCards');\n    let loading;\n\n    if (state.isLoading()) {\n      loading = LoadingIndicator.component();\n    } else if (state.moreResults) {\n      loading = Button.component(\n        {\n          className: 'Button',\n          onclick: state.loadMore.bind(state),\n        },\n        app.translator.trans('fof-user-directory.forum.page.load_more_button')\n      );\n    }\n\n    if (state.empty()) {\n      const text = app.translator.trans('fof-user-directory.forum.page.empty_text');\n      return <div className=\"DiscussionList\">{Placeholder.component({ text })}</div>;\n    }\n\n    return (\n      <div\n        className={\n          'UserDirectoryList' +\n          (state.isSearchResults() ? ' UserDirectoryList--searchResults' : '') +\n          (useSmallCards ? ' UserDirectoryList--small-cards' : '')\n        }\n      >\n        <ul className=\"UserDirectoryList-users\">\n          {state.users.map((user) => {\n            return (\n              <li key={user.id()} data-id={user.id()}>\n                {UserDirectoryListItem.component({ user, params, useSmallCards })}\n              </li>\n            );\n          })}\n        </ul>\n        <div className=\"UserDirectoryList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n}\n","/**\n * The sort options.\n * We use a class and not just a POJO/function because we want extensions to be able to extend it\n */\nexport default class SortMap {\n  sortMap() {\n    return {\n      username_az: 'username',\n      username_za: '-username',\n      newest: '-joinedAt',\n      oldest: 'joinedAt',\n      most_discussions: '-discussionCount',\n      least_discussions: 'discussionCount',\n    };\n  }\n}\n","/**\n * Based on Flarum's DiscussionListState\n */\nimport SortMap from '../../common/utils/SortMap';\n\nexport default class UserDirectoryState {\n  constructor(params = {}, app = window.app) {\n    this.params = params;\n\n    this.app = app;\n\n    this.users = [];\n\n    this.moreResults = false;\n\n    this.loading = false;\n\n    this.qBuilder = {};\n  }\n\n  requestParams() {\n    const params = { include: [], filter: {} };\n\n    const sortKey = this.params.sort || app.forum.attribute('userDirectoryDefaultSort');\n\n    // sort might be set to null if no sort params has been passed\n    params.sort = this.sortMap()[sortKey];\n\n    if (this.params.q) {\n      params.filter.q = this.params.q;\n    }\n\n    return params;\n  }\n\n  sortMap() {\n    return {\n      default: '',\n      ...new SortMap().sortMap(),\n    };\n  }\n\n  getParams() {\n    return this.params;\n  }\n\n  clear() {\n    this.users = [];\n    m.redraw();\n  }\n\n  refreshParams(newParams) {\n    if (!this.hasUsers() || Object.keys(newParams).some((key) => this.getParams()[key] !== newParams[key])) {\n      const q = '';\n      this.params = newParams;\n\n      if (newParams.qBuilder) {\n        Object.assign(this.qBuilder, newParams.qBuilder || {});\n        this.params.q = Object.values(this.qBuilder).join(' ').trim();\n      }\n\n      if (!this.params.q && q) {\n        this.params.q = q;\n      }\n\n      this.refresh();\n    }\n  }\n\n  refresh() {\n    this.loading = true;\n\n    this.clear();\n\n    return this.loadResults().then(\n      (results) => {\n        this.users = [];\n        this.parseResults(results);\n      },\n      () => {\n        this.loading = false;\n        m.redraw();\n      }\n    );\n  }\n\n  loadResults(offset) {\n    const preloadedUsers = this.app.preloadedApiDocument();\n\n    if (preloadedUsers) {\n      return Promise.resolve(preloadedUsers);\n    }\n\n    const params = this.requestParams();\n    params.page = { offset };\n    params.include = params.include.join(',');\n\n    return this.app.store.find('users', params);\n  }\n\n  loadMore() {\n    this.loading = true;\n\n    this.loadResults(this.users.length).then(this.parseResults.bind(this));\n  }\n\n  parseResults(results) {\n    this.users.push(...results);\n\n    this.loading = false;\n    this.moreResults = !!results.payload.links && !!results.payload.links.next;\n\n    m.redraw();\n\n    return results;\n  }\n\n  hasUsers() {\n    return this.users.length > 0;\n  }\n\n  isLoading() {\n    return this.loading;\n  }\n\n  isSearchResults() {\n    return !!this.params.q;\n  }\n\n  empty() {\n    return !this.hasUsers() && !this.isLoading();\n  }\n}\n","import Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\n\nexport default class CheckableButton extends Button {\n  /**\n   * Get the template for the button's content.\n   *\n   * @return {*}\n   * @protected\n   */\n  getButtonContent(children) {\n    const prev = super.getButtonContent(children);\n\n    if (this.attrs.checked) prev.push(icon('fas fa-check', { className: 'Button-icon ButtonCheck' }));\n\n    return prev;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/KeyboardNavigatable'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/ItemList'];","/**\n * @abstract\n */\nexport default class AbstractType {\n  constructor() {\n    this.suggestions = [];\n    this.loading = false;\n  }\n\n  /**\n   * The `type` property of the Models used in suggestions and applied filters for this type\n   * @return {String}\n   */\n  resourceType() {\n    //\n  }\n\n  /**\n   * Executed when the search query changes\n   * The method should update this.suggestions with the new results\n   * If asynchronous loading is used, this.loading should be set to true during the process\n   * @param {String} query\n   */\n  search(query) {\n    //\n  }\n\n  /**\n   * Renders the \"kind\" label next to the value indicating what kind of information that result is\n   * Should probably just be a translated text\n   * @param {Model} resource\n   * @return {vnode}\n   */\n  renderKind(resource) {\n    //\n  }\n\n  /**\n   * Renders the Label containing the suggestion's value\n   * Should be a vdom template using the .UserDirectorySearchLabel class or similar\n   * @param {Model} resource\n   * @return {vnode}\n   */\n  renderLabel(resource) {\n    //\n  }\n\n  /**\n   * Applies a filter on a params object to use in the page request\n   * @param {Object} params Object. Might or might not contain a `q` property or `sort` property. In the future, `filters` object might be supported\n   * @param {Model} resource\n   */\n  applyFilter(params, resource) {\n    //\n  }\n\n  /**\n   * Used to populate the search field on page load with values from the querystring\n   * A promise must be returned, and the UI will auto-update once the promise returns\n   * @param {Object} params Object with a `q` and `sort` property. `filters` might be supported in the future\n   * @return {Promise<Model[]>}\n   */\n  initializeFromParams(params) {\n    //\n  }\n}\n","import app from 'flarum/forum/app';\nimport AbstractType from './AbstractType';\n\n/* global m */\n\nexport default class TextFilter extends AbstractType {\n  resourceType() {\n    return 'fof-user-directory-text';\n  }\n\n  search(query) {\n    if (!query) {\n      this.suggestions = [];\n      return;\n    }\n\n    this.suggestions = [\n      app.store.createRecord('fof-user-directory-text', {\n        attributes: {\n          text: query,\n        },\n      }),\n    ];\n  }\n\n  renderKind() {\n    return app.translator.trans('fof-user-directory.forum.search.kinds.text');\n  }\n\n  renderLabel(resource) {\n    return m('.UserDirectorySearchLabel', resource.text());\n  }\n\n  applyFilter(params, resource) {\n    params.q = params.q ? params.q + ' ' : '';\n    params.q += resource.text();\n  }\n\n  initializeFromParams(params) {\n    if (!params.q) {\n      return Promise.resolve([]);\n    }\n\n    return Promise.resolve(\n      params.q\n        .split(' ')\n        // Words with : are gambits and we will ignore them\n        .filter((word) => word.indexOf(':') === -1)\n        .map((word) =>\n          app.store.createRecord('fof-user-directory-text', {\n            attributes: {\n              text: word,\n            },\n          })\n        )\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Group'];","import app from 'flarum/forum/app';\nimport Group from 'flarum/common/models/Group';\nimport icon from 'flarum/common/helpers/icon';\nimport AbstractType from './AbstractType';\n\n/* global m */\n\nexport default class GroupFilter extends AbstractType {\n  resourceType() {\n    return 'groups';\n  }\n\n  search(query) {\n    this.suggestions = [];\n\n    if (!query) {\n      return;\n    }\n\n    query = query.toLowerCase();\n\n    app.store.all('groups').forEach((group) => {\n      // Do not allow Guest group as it wouldn't do anything\n      if (group.id() === Group.GUEST_ID) {\n        return;\n      }\n\n      if (group.nameSingular().toLowerCase().indexOf(query) !== -1 || group.namePlural().toLowerCase().indexOf(query) !== -1) {\n        this.suggestions.push(group);\n      }\n    });\n  }\n\n  renderKind() {\n    return app.translator.trans('fof-user-directory.forum.search.kinds.group');\n  }\n\n  renderLabel(group) {\n    return m(\n      '.UserDirectorySearchLabel',\n      group.color()\n        ? {\n            className: 'colored',\n            style: {\n              backgroundColor: group.color(),\n            },\n          }\n        : {},\n      [group.icon() ? [icon(group.icon()), ' '] : null, group.namePlural()]\n    );\n  }\n\n  applyFilter(params, group) {\n    params.q = params.q ? params.q + ' ' : '';\n    params.q += 'group:' + group.id();\n  }\n\n  initializeFromParams(params) {\n    if (!params.q) {\n      return Promise.resolve([]);\n    }\n\n    const qWithSpacesAround = ' ' + params.q + ' ';\n\n    const groups = [];\n\n    const queryGroups = qWithSpacesAround.split(' ').filter((q) => q.startsWith('group:'));\n\n    app.store.all('groups').forEach((group) => {\n      queryGroups.forEach((queryGroup) => {\n        const groupIds = queryGroup.replace('group:', '').split(',');\n        if (groupIds.includes(group.id())) {\n          groups.push(group);\n        }\n      });\n    });\n\n    return Promise.resolve(groups);\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport KeyboardNavigatable from 'flarum/common/utils/KeyboardNavigatable';\nimport ItemList from 'flarum/utils/ItemList';\nimport TextFilter from '../searchTypes/TextFilter';\nimport GroupFilter from '../searchTypes/GroupFilter';\n\nexport default class SearchField extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.searchIndex = 0;\n    this.navigator = new KeyboardNavigatable();\n    this.navigator\n      .when((event) => {\n        // Do not handle keyboard when TAB is pressed and there's nothing in field\n        // Without this it's impossible to TAB out of the field\n        return event.key !== 'Tab' || !!this.filter;\n      })\n      .onUp(() => {\n        if (this.searchIndex > 0) {\n          this.searchIndex--;\n          m.redraw();\n        }\n      })\n      .onDown(() => {\n        if (this.searchIndex < this.allSuggestions().length - 1) {\n          this.searchIndex++;\n          m.redraw();\n        }\n      })\n      .onSelect(() => {\n        if (this.filter) {\n          this.selectResult(this.allSuggestions()[this.searchIndex]);\n          m.redraw();\n        } else {\n          this.applyFiltering();\n        }\n      })\n      .onRemove(() => {\n        this.appliedFilters.pop();\n      });\n\n    this.availableFilters = this.filterTypes().toArray();\n    this.appliedFilters = [];\n\n    this.filter = '';\n    this.focused = false;\n\n    // When the page loads, initialize UI with filters from the parameters\n    this.availableFilters.forEach((filter) => {\n      filter\n        .initializeFromParams({\n          sort: m.route.param('sort'),\n          q: m.route.param('q'),\n        })\n        .then((resources) => {\n          this.appliedFilters.push(...resources);\n          m.redraw();\n        });\n    });\n  }\n\n  view() {\n    const suggestions = this.allSuggestions();\n\n    const loading = this.availableFilters.some((filter) => filter.loading);\n\n    return (\n      <div className=\"Form-group Usersearchbox\">\n        <label className={`UserDirectorySearchInput FormControl ${this.focused ? 'focus' : ''}`}>\n          <span className=\"UserDirectorySearchInput-selected\">\n            {this.appliedFilters.map((recipient, index) => (\n              <span\n                className=\"UserDirectorySearchInput-filter\"\n                onclick={() => {\n                  this.appliedFilters.splice(index, 1);\n                  this.applyFiltering();\n                }}\n                title={this.searchResultKind(recipient)}\n              >\n                {this.recipientLabel(recipient)}\n              </span>\n            ))}\n          </span>\n          <input\n            className=\"FormControl\"\n            placeholder={app.translator.trans('fof-user-directory.forum.search.field.placeholder')}\n            value={this.filter}\n            oninput={withAttr('value', (value) => {\n              this.filter = value;\n              this.performNewSearch();\n            })}\n            onkeydown={this.navigator.navigate.bind(this.navigator)}\n            onfocus={() => {\n              this.focused = true;\n            }}\n            onblur={() => {\n              this.focused = false;\n            }}\n          />\n          {loading && <LoadingIndicator />}\n          {!!suggestions.length && (\n            <ul className=\"Dropdown-menu\">\n              {suggestions.map((result, index) => (\n                <li\n                  className={this.searchIndex === index ? 'active' : ''}\n                  onclick={() => {\n                    this.selectResult(result);\n                    this.applyFiltering();\n                  }}\n                >\n                  <button type=\"button\">\n                    <span className=\"UserDirectorySearchKind\">{this.searchResultKind(result)}</span>\n                    {this.recipientLabel(result)}\n                  </button>\n                </li>\n              ))}\n            </ul>\n          )}\n        </label>\n      </div>\n    );\n  }\n\n  filterTypes() {\n    const items = new ItemList();\n\n    items.add('text', new TextFilter(), 10);\n    items.add('group', new GroupFilter(), 20);\n\n    return items;\n  }\n\n  filterForResource(resource) {\n    return this.availableFilters.find((f) => f.resourceType() === resource.data.type);\n  }\n\n  recipientLabel(resource) {\n    const filter = this.filterForResource(resource);\n\n    if (filter) {\n      return filter.renderLabel(resource);\n    }\n\n    return '[unknown]';\n  }\n\n  searchResultKind(resource) {\n    const filter = this.filterForResource(resource);\n\n    if (filter) {\n      return filter.renderKind(resource);\n    }\n\n    return '[unknown]';\n  }\n\n  selectResult(result) {\n    if (!result) {\n      return;\n    }\n\n    this.appliedFilters.push(result);\n    this.clearSuggestions();\n  }\n\n  clearSuggestions() {\n    this.filter = '';\n    this.availableFilters.forEach((filter) => {\n      filter.search('');\n    });\n  }\n\n  allSuggestions() {\n    return [].concat(...this.availableFilters.map((filter) => filter.suggestions));\n  }\n\n  performNewSearch() {\n    this.searchIndex = 0;\n\n    this.availableFilters.forEach((filter) => {\n      filter.search(this.filter);\n    });\n\n    this.attrs.state.refreshParams({ ...this.attrs.state.getParams(), qBuilder: this.qBuilder() });\n  }\n\n  qBuilder(params = {}) {\n    this.appliedFilters.forEach((resource) => {\n      const filter = this.filterForResource(resource);\n\n      if (filter) {\n        filter.applyFilter(params, resource);\n      } else {\n        console.warn('Cannot find filter class for resource', resource);\n      }\n    });\n    return { filter: `${this.filter} ${params.q || ''}` };\n  }\n\n  applyFiltering() {\n    const params = {\n      sort: m.route.param('sort'),\n    };\n\n    this.qBuilder(params);\n\n    m.route.set(app.route('fof_user_directory', params));\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Select from 'flarum/common/components/Select';\nimport Button from 'flarum/common/components/Button';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport extractText from 'flarum/common/utils/extractText';\nimport UserDirectoryList from './UserDirectoryList';\nimport UserDirectoryState from '../states/UserDirectoryState';\nimport CheckableButton from './CheckableButton';\nimport SearchField from './SearchField';\nimport Separator from 'flarum/common/components/Separator';\n\n/**\n * This page re-uses Flarum's IndexPage CSS classes\n */\nexport default class UserDirectoryPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.state = new UserDirectoryState({});\n    this.state.refreshParams(app.search.params());\n\n    this.bodyClass = 'User--directory';\n\n    let idSegments = [];\n    if (this.params().q) {\n      Array.from(this.params().q.matchAll(/group:([\\d,]+)/g)).forEach((match) => {\n        idSegments.push(match[1]);\n      });\n    }\n    this.enabledGroupFilters = idSegments\n      .join(',')\n      .split(',')\n      .filter((id) => id);\n\n    this.enabledSpecialGroupFilters = [];\n    if (app.initializers.has('flarum-suspend') && app.forum.attribute('hasSuspendPermission')) {\n      // If there is a special group filter int the params, enable it here\n      if (this.params()?.q?.includes('is:suspended')) {\n        this.enabledSpecialGroupFilters['flarum-suspend'] = 'is:suspended';\n      }\n    }\n\n    app.history.push('users', app.translator.trans('fof-user-directory.forum.header.back_to_user_directory_tooltip'));\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    app.setTitle(extractText(app.translator.trans('fof-user-directory.forum.page.nav')));\n  }\n\n  view() {\n    return (\n      <div className=\"IndexPage\">\n        {IndexPage.prototype.hero()}\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"IndexPage-nav sideNav\">\n              <ul>{listItems(this.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"IndexPage-results sideNavOffset\">\n              <div className=\"IndexPage-toolbar\">\n                <ul className=\"IndexPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\n                <ul className=\"IndexPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n              </div>\n              <UserDirectoryList state={this.state} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Our own sidebar. Re-uses Index.sidebarItems as the base\n   * Elements added here will only show up on the user directory page\n   *\n   * @return {ItemList}\n   */\n  sidebarItems() {\n    const items = IndexPage.prototype.sidebarItems();\n\n    items.setContent(\n      'nav',\n      SelectDropdown.component(\n        {\n          buttonClassName: 'Button',\n          className: 'App-titleControl',\n        },\n        this.navItems().toArray()\n      )\n    );\n\n    return items;\n  }\n\n  /**\n   * Our own sidebar navigation. Re-uses Index.navItems as the base\n   * Elements added here will only show up on the user directory page\n   *\n   * @return {ItemList}\n   */\n  navItems() {\n    const items = IndexPage.prototype.navItems();\n    const params = this.stickyParams();\n\n    items.add(\n      'fof-user-directory',\n      LinkButton.component(\n        {\n          href: app.route('fof_user_directory', params),\n          icon: 'far fa-address-book',\n        },\n        app.translator.trans('fof-user-directory.forum.page.nav')\n      ),\n      85\n    );\n\n    return items;\n  }\n\n  viewItems() {\n    const items = new ItemList();\n    const sortMap = this.state.sortMap();\n\n    const sortOptions = {};\n    for (const i in sortMap) {\n      sortOptions[i] = app.translator.trans('fof-user-directory.lib.sort.' + i);\n    }\n\n    items.add(\n      'sort',\n      Select.component({\n        options: sortOptions,\n        value: this.state.getParams().sort || app.forum.attribute('userDirectoryDefaultSort'),\n        onchange: this.changeParams.bind(this),\n      }),\n      100\n    );\n\n    items.add(\n      'filterGroups',\n      Dropdown.component(\n        {\n          caretIcon: 'fas fa-filter',\n          label: app.translator.trans('fof-user-directory.forum.page.filter_button'),\n          buttonClassName: 'FormControl',\n          className: 'GroupFilterDropdown',\n        },\n        this.groupItems().toArray()\n      ),\n      80\n    );\n\n    items.add(\n      'search',\n      SearchField.component({\n        state: this.state,\n      }),\n      60\n    );\n\n    return items;\n  }\n\n  groupItems() {\n    const items = new ItemList();\n\n    app.store\n      .all('groups')\n      .filter((group) => group.id() !== '2' && group.id() !== '3')\n      .forEach((group) => {\n        items.add(\n          group.namePlural(),\n          CheckableButton.component(\n            {\n              className: 'GroupFilterButton',\n              icon: group.icon(),\n              checked: this.enabledGroupFilters.includes(group.id()),\n              onclick: () => {\n                const id = group.id();\n                if (this.enabledGroupFilters.includes(id)) {\n                  this.enabledGroupFilters = this.enabledGroupFilters.filter((e) => e != id);\n                } else {\n                  this.enabledGroupFilters.push(id);\n                  // Empty the special group filters\n                  this.enabledSpecialGroupFilters = [];\n                }\n\n                this.changeParams(this.params().sort);\n              },\n            },\n            group.namePlural()\n          )\n        );\n      });\n\n    if (app.initializers.has('flarum-suspend') && app.forum.attribute('hasSuspendPermission')) {\n      items.add(\n        'suspend',\n        CheckableButton.component(\n          {\n            className: 'GroupFilterButton',\n            icon: 'fas fa-ban',\n            checked: this.enabledSpecialGroupFilters['flarum-suspend'] === 'is:suspended',\n            onclick: () => {\n              const id = 'flarum-suspend';\n              if (this.enabledSpecialGroupFilters[id] === 'is:suspended') {\n                this.enabledSpecialGroupFilters[id] = '';\n              } else {\n                this.enabledSpecialGroupFilters[id] = 'is:suspended';\n                // Empty the group filters\n                this.enabledGroupFilters = [];\n              }\n\n              this.changeParams(this.params().sort);\n            },\n          },\n          app.translator.trans('flarum-suspend.forum.user_badge.suspended_tooltip')\n        ),\n        90\n      );\n\n      items.add('seperator', Separator.component(), 50);\n    }\n\n    return items;\n  }\n\n  actionItems() {\n    const items = new ItemList();\n\n    items.add(\n      'refresh',\n      Button.component({\n        title: app.translator.trans('fof-user-directory.forum.page.refresh_tooltip'),\n        icon: 'fas fa-sync',\n        className: 'Button Button--icon',\n        onclick: () => {\n          this.state.refresh();\n          if (app.session.user) {\n            app.store.find('users', app.session.user.id());\n            m.redraw();\n          }\n        },\n      })\n    );\n\n    return items;\n  }\n\n  /**\n   * Redirect to the index page using the given sort parameter.\n   *\n   * @param {String} sort\n   */\n  changeParams(sort) {\n    const params = this.params();\n\n    if (sort === app.forum.attribute('userDirectoryDefaultSort')) {\n      delete params.sort;\n    } else {\n      params.sort = sort;\n    }\n\n    let moreQ = '';\n    for (const filter in this.enabledSpecialGroupFilters) {\n      moreQ += this.enabledSpecialGroupFilters[filter] + ' ';\n    }\n\n    if (this.enabledGroupFilters.length > 0) {\n      const groupsQ = this.enabledGroupFilters.reduce((prev, curr) => {\n        return `${prev}${prev ? ' ' : ''}group:${curr}`;\n      }, '');\n\n      params.qBuilder = { groups: groupsQ };\n    } else {\n      params.qBuilder = { groups: '', q: moreQ.trim() };\n    }\n\n    this.state.refreshParams(params);\n\n    const routeParams = { ...params };\n    delete routeParams.qBuilder;\n\n    m.route.set(app.route('fof_user_directory', routeParams));\n  }\n\n  stickyParams() {\n    return {\n      sort: m.route.param('sort'),\n      q: m.route.param('q'),\n    };\n  }\n\n  params() {\n    return this.stickyParams();\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\n/**\n * Special model used only client-side to hold a free text search value in the search field\n */\nexport default class Text extends Model {\n  text = Model.attribute('text');\n}\n","import CheckableButton from './CheckableButton';\nimport SearchField from './SearchField';\nimport SmallUserCard from './SmallUserCard';\nimport UserDirectoryList from './UserDirectoryList';\nimport UserDirectoryListItem from './UserDirectoryListItem';\nimport UserDirectoryPage from './UserDirectoryPage';\nimport UserDirectoryUserCard from './UserDirectoryUserCard';\n\nexport const components = {\n  CheckableButton,\n  SearchField,\n  SmallUserCard,\n  UserDirectoryList,\n  UserDirectoryListItem,\n  UserDirectoryPage,\n  UserDirectoryUserCard,\n};\n","import AbstractType from './AbstractType';\nimport GroupFilter from './GroupFilter';\nimport TextFilter from './TextFilter';\n\nexport const searchTypes = {\n  AbstractType,\n  GroupFilter,\n  TextFilter,\n};\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport UsersSearchSource from 'flarum/common/components/UsersSearchSource';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport UserDirectoryPage from './components/UserDirectoryPage';\nimport UserDirectoryList from './components/UserDirectoryList';\nimport UserDirectoryListItem from './components/UserDirectoryListItem';\nimport UserDirectoryState from './states/UserDirectoryState';\nimport SortMap from '../common/utils/SortMap';\nimport CheckableButton from './components/CheckableButton';\nimport Text from './models/Text';\n\n// Allow other extensions to extend the page\nexport { UserDirectoryPage, UserDirectoryList, UserDirectoryListItem, UserDirectoryState, SortMap, CheckableButton };\n\nexport const linkGroupMentions = function () {\n  if (app.forum.attribute('canSeeUserDirectoryLink') && app.forum.attribute('userDirectoryLinkGroupMentions')) {\n    this.$('.GroupMention').each(function () {\n      if ($(this).hasClass('GroupMention--linked')) return;\n\n      const name = $(this).find('.GroupMention-name').text();\n      const group = app.store.getBy('groups', 'namePlural', name.slice(1));\n\n      if (group) {\n        const link = $(`<a class=\"GroupMention-link\" href=\"${app.route('fof_user_directory', { q: `group:${group.id()}` })}\"></a>`);\n\n        link.on('click', function (e) {\n          m.route.set(this.getAttribute('href'));\n          e.preventDefault();\n        });\n\n        $(this).addClass('GroupMention--linked').wrap(link);\n      }\n    });\n  }\n};\n\napp.initializers.add('fof-user-directory', (app) => {\n  app.routes.fof_user_directory = {\n    path: '/users',\n    component: UserDirectoryPage,\n  };\n\n  app.store.models['fof-user-directory-text'] = Text;\n\n  extend(UsersSearchSource.prototype, 'view', function (view, query) {\n    if (!view || !app.forum.attribute('canSeeUserDirectoryLink') || app.forum.attribute('userDirectoryDisableGlobalSearchSource')) {\n      return;\n    }\n\n    query = query.toLowerCase();\n\n    view.splice(\n      1,\n      0,\n      m(\n        'li',\n        LinkButton.component(\n          {\n            href: app.route('fof_user_directory', { q: query }),\n            icon: 'fas fa-search',\n          },\n          app.translator.trans('fof-user-directory.forum.search.users_heading', { query })\n        )\n      )\n    );\n  });\n\n  extend(IndexPage.prototype, 'navItems', (items) => {\n    if (app.forum.attribute('canSeeUserDirectoryLink') && app.forum.attribute('canSearchUsers')) {\n      items.add(\n        'fof-user-directory',\n        LinkButton.component(\n          {\n            href: app.route('fof_user_directory'),\n            icon: 'far fa-address-book',\n          },\n          app.translator.trans('fof-user-directory.forum.page.nav')\n        ),\n        85\n      );\n    }\n  });\n\n  extend(CommentPost.prototype, 'oncreate', linkGroupMentions);\n  extend(CommentPost.prototype, 'onupdate', linkGroupMentions);\n});\n\nexport * from './components';\nexport * from './searchTypes';\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_extends","assign","bind","target","i","arguments","length","source","apply","this","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","SmallUserCard","_UserCard","infoItems","items","ItemList","user","attrs","add","app","translator","trans","ago","humanTime","joinTime","UserCard","UserDirectoryUserCard","has","setPriority","m","className","icon","count","discussionCount","commentCount","UserDirectoryListItem","_Component","view","vnode","_this$attrs","useSmallCards","attributes","controlsButtonClassName","component","Component","UserDirectoryList","loading","state","params","getParams","attribute","isLoading","LoadingIndicator","moreResults","Button","onclick","loadMore","empty","text","Placeholder","isSearchResults","users","map","id","SortMap","sortMap","username_az","username_za","newest","oldest","most_discussions","least_discussions","UserDirectoryState","window","qBuilder","_proto","requestParams","include","filter","sortKey","sort","forum","q","default","clear","redraw","refreshParams","newParams","_this","hasUsers","keys","some","values","join","trim","refresh","_this2","loadResults","then","results","parseResults","offset","preloadedUsers","preloadedApiDocument","Promise","resolve","page","store","find","_this$users","push","payload","links","next","CheckableButton","_Button","getButtonContent","children","prev","checked","AbstractType","suggestions","resourceType","search","query","renderKind","resource","renderLabel","applyFilter","initializeFromParams","TextFilter","_AbstractType","createRecord","split","word","indexOf","GroupFilter","toLowerCase","all","forEach","group","Group","nameSingular","namePlural","color","style","backgroundColor","qWithSpacesAround","groups","queryGroups","startsWith","queryGroup","replace","includes","SearchField","oninit","searchIndex","navigator","KeyboardNavigatable","when","event","onUp","onDown","allSuggestions","onSelect","selectResult","applyFiltering","onRemove","appliedFilters","pop","availableFilters","filterTypes","toArray","focused","route","param","resources","_this$appliedFilters","recipient","index","splice","title","searchResultKind","recipientLabel","placeholder","oninput","withAttr","performNewSearch","onkeydown","navigate","onfocus","onblur","result","type","filterForResource","f","data","clearSuggestions","_ref","concat","_this3","_this4","console","warn","set","UserDirectoryPage","_Page","bodyClass","_this$params","_this$params$q","idSegments","Array","from","matchAll","match","enabledGroupFilters","enabledSpecialGroupFilters","oncreate","extractText","IndexPage","hero","listItems","sidebarItems","viewItems","actionItems","setContent","SelectDropdown","buttonClassName","navItems","stickyParams","LinkButton","href","sortOptions","Select","options","onchange","changeParams","Dropdown","caretIcon","label","groupItems","e","Separator","moreQ","groupsQ","reduce","curr","routeParams","Page","Text","_Model","_len","args","_key","Model","components","searchTypes","linkGroupMentions","$","each","hasClass","name","getBy","slice","link","on","getAttribute","preventDefault","addClass","wrap","routes","fof_user_directory","path","models","extend","UsersSearchSource","CommentPost"],"sourceRoot":""}