{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,gPCL9D,MAAM,EAA+BC,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,a,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,8B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCAzC,SAASC,IAYtB,OAXAA,EAAWf,OAAOgB,OAAShB,OAAOgB,OAAOC,OAAS,SAAUC,GAC1D,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAASF,UAAUD,GACvB,IAAK,IAAIrB,KAAOwB,EACVtB,OAAOM,UAAUC,eAAeC,KAAKc,EAAQxB,KAC/CoB,EAAOpB,GAAOwB,EAAOxB,GAG1B,CACD,OAAOoB,CACR,EACMH,EAASQ,MAAMC,KAAMJ,UAC7B,CCbc,SAASK,EAAgB1B,EAAG2B,GAKzC,OAJAD,EAAkBzB,OAAO2B,eAAiB3B,OAAO2B,eAAeV,OAAS,SAAyBlB,EAAG2B,GAEnG,OADA3B,EAAE6B,UAAYF,EACP3B,CACR,EACM0B,EAAgB1B,EAAG2B,EAC3B,CCLc,SAASG,EAAeC,EAAUC,GAC/CD,EAASxB,UAAYN,OAAOgC,OAAOD,EAAWzB,WAC9CwB,EAASxB,UAAU2B,YAAcH,EACjCH,EAAeG,EAAUC,EAC1B,CCLD,MAAM,EAA+BnB,OAAOC,KAAKC,OAAO,0B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,yB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,oC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,8B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,oB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,sC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,6B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,0B,aCInCoB,EAAAA,SAAAA,G,4EAEnBC,UAAA,WACE,IAAMC,EAAQ,IAAIC,KACZC,EAAOd,KAAKe,MAAMD,KAIxB,OAFAF,EAAMI,IAAI,SAAUC,IAAIC,WAAWC,MAAM,mCAAoC,CAAEC,IAAKC,IAAUP,EAAKQ,eAE5FV,CACR,E,EATkBF,CAAsBa,KCJ3C,MAAM,EAA+BnC,OAAOC,KAAKC,OAAO,uB,aCMnCkC,EAAAA,SAAAA,G,4EAMnBb,UAAA,WACE,IAAMC,EAAQ,EAAH,UAASD,UAAT,WACLG,EAAOd,KAAKe,MAAMD,KA8BxB,OA5BIF,EAAMa,IAAI,aAAab,EAAMc,YAAY,WAAY,KACrDd,EAAMa,IAAI,WAAWb,EAAMc,YAAY,SAAU,IACjDd,EAAMa,IAAI,WAAWb,EAAMc,YAAY,SAAU,IACjDd,EAAMa,IAAI,sBAAsBb,EAAMc,YAAY,oBAAqB,IACvEd,EAAMa,IAAI,mBAAmBb,EAAMc,YAAY,iBAAkB,IAErEd,EAAMI,IACJ,mBACA,SAAKW,UAAU,YACZC,IAAK,kBACLX,IAAAA,WAAeE,MAAM,0DAA2D,CAC/EU,MAAOf,EAAKgB,qBAGhB,IAGFlB,EAAMI,IACJ,gBACA,SAAKW,UAAU,YACZC,IAAK,mBACLX,IAAAA,WAAeE,MAAM,oDAAqD,CACzEU,MAAOf,EAAKiB,kBAGhB,IAGKnB,CACR,E,EAvCkBY,CAA8BD,KCD9BS,EAAAA,SAAAA,G,4EACnBC,KAAA,SAAKC,GACH,MAAgClC,KAAKe,MAA7BD,EAAR,EAAQA,KAAMqB,EAAd,EAAcA,cAERC,EAAa,CACjBtB,KAAAA,EACAa,UAAW,uBAAsBQ,EAAgB,mBAAqB,IACtEE,wBAAyB,oCAG3B,OAAO,SAAKV,UAAU,QAAQQ,EAAgBzB,EAAc4B,UAAUF,GAAcZ,EAAsBc,UAAUF,GACrH,E,EAXkBJ,CAA8BO,KCK9BC,EAAAA,SAAAA,G,4EACnBP,KAAA,WACE,IAIIQ,EAJIC,EAAU1C,KAAKe,MAAf2B,MAEFC,EAASD,EAAME,YACfT,EAAgBlB,IAAAA,MAAU4B,UAAU,2BAe1C,GAZIH,EAAMI,YACRL,EAAUM,IAAAA,YACDL,EAAMM,cACfP,EAAUQ,IAAAA,UACR,CACEtB,UAAW,SACXuB,QAASR,EAAMS,SAAS1D,KAAKiD,IAE/BzB,IAAAA,WAAeE,MAAM,oDAIrBuB,EAAMU,QAAS,CACjB,IAAMC,EAAOpC,IAAAA,WAAeE,MAAM,4CAClC,OAAO,SAAKQ,UAAU,kBAAkB2B,IAAAA,UAAsB,CAAED,KAAAA,IACjE,CAED,OACE,SACE1B,UACE,qBACCe,EAAMa,kBAAoB,oCAAsC,KAChEpB,EAAgB,kCAAoC,KAGvD,QAAIR,UAAU,2BACXe,EAAMc,MAAMC,KAAI,SAAC3C,GAChB,OACE,QAAIxC,IAAKwC,EAAK4C,KAAM,UAAS5C,EAAK4C,MAC/B1B,EAAsBM,UAAU,CAAExB,KAAAA,EAAM6B,OAAAA,EAAQR,cAAAA,IAGtD,KAEH,SAAKR,UAAU,8BAA8Bc,GAGlD,E,EA7CkBD,CAA0BD,KCN1BoB,EAAAA,W,iCACnBC,QAAA,WACE,MAAO,CACLC,YAAa,WACbC,YAAa,YACbC,OAAQ,YACRC,OAAQ,WACRC,iBAAkB,mBAClBC,kBAAmB,kBAEtB,E,EAVkBP,GCCAQ,EAAAA,WACnB,WAAYxB,EAAa1B,QAAkB,IAA/B0B,IAAAA,EAAS,CAAC,QAAqB,IAAlB1B,IAAAA,EAAMmD,OAAOnD,KACpCjB,KAAK2C,OAASA,EAEd3C,KAAKiB,IAAMA,EAEXjB,KAAKwD,MAAQ,GAEbxD,KAAKgD,aAAc,EAEnBhD,KAAKyC,SAAU,EAEfzC,KAAKqE,SAAW,CAAC,CAClB,C,2BAEDC,cAAA,WACE,IAAM3B,EAAS,CAAE4B,QAAS,GAAIC,OAAQ,CAAC,GAEjCC,EAAUzE,KAAK2C,OAAO+B,MAAQzD,IAAI0D,MAAM9B,UAAU,4BASxD,OANAF,EAAO+B,KAAO1E,KAAK4D,UAAUa,GAEzBzE,KAAK2C,OAAOiC,IACdjC,EAAO6B,OAAOI,EAAI5E,KAAK2C,OAAOiC,GAGzBjC,CACR,E,EAEDiB,QAAA,WACE,OAAO,GACLiB,QAAS,KACN,IAAIlB,GAAUC,UAEpB,E,EAEDhB,UAAA,WACE,OAAO5C,KAAK2C,MACb,E,EAEDmC,MAAA,WACE9E,KAAKwD,MAAQ,GACbuB,EAAEC,QACH,E,EAEDC,cAAA,SAAcC,GAAW,WAClBlF,KAAKmF,aAAc3G,OAAO4G,KAAKF,GAAWG,MAAK,SAAC/G,GAAD,OAAS,EAAKsE,YAAYtE,KAAS4G,EAAU5G,EAA7C,MAElD0B,KAAK2C,OAASuC,EAEVA,EAAUb,WACZ7F,OAAOgB,OAAOQ,KAAKqE,SAAUa,EAAUb,UAAY,CAAC,GACpDrE,KAAK2C,OAAOiC,EAAIpG,OAAO8G,OAAOtF,KAAKqE,UAAUkB,KAAK,KAAKC,QAGpDxF,KAAK2C,OAAOiC,EAIjB5E,KAAKyF,UAER,E,EAEDA,QAAA,WAAU,WAKR,OAJAzF,KAAKyC,SAAU,EAEfzC,KAAK8E,QAEE9E,KAAK0F,cAAcC,MACxB,SAACC,GACC,EAAKpC,MAAQ,GACb,EAAKqC,aAAaD,EACnB,IACD,WACE,EAAKnD,SAAU,EACfsC,EAAEC,QACH,GAEJ,E,EAEDU,YAAA,SAAYI,GACV,IAAMC,EAAiB/F,KAAKiB,IAAI+E,uBAEhC,GAAID,EACF,OAAOE,QAAQC,QAAQH,GAGzB,IAAMpD,EAAS3C,KAAKsE,gBAIpB,OAHA3B,EAAOwD,KAAO,CAAEL,OAAAA,GAChBnD,EAAO4B,QAAU5B,EAAO4B,QAAQgB,KAAK,KAE9BvF,KAAKiB,IAAImF,MAAMC,KAAK,QAAS1D,EACrC,E,EAEDQ,SAAA,WACEnD,KAAKyC,SAAU,EAEfzC,KAAK0F,YAAY1F,KAAKwD,MAAM3D,QAAQ8F,KAAK3F,KAAK6F,aAAapG,KAAKO,MACjE,E,EAED6F,aAAA,SAAaD,GAAS,MAQpB,OAPA,EAAA5F,KAAKwD,OAAM8C,KAAX,QAAmBV,GAEnB5F,KAAKyC,SAAU,EACfzC,KAAKgD,cAAgB4C,EAAQW,QAAQC,SAAWZ,EAAQW,QAAQC,MAAMC,KAEtE1B,EAAEC,SAEKY,CACR,E,EAEDT,SAAA,WACE,OAAOnF,KAAKwD,MAAM3D,OAAS,CAC5B,E,EAEDiD,UAAA,WACE,OAAO9C,KAAKyC,OACb,E,EAEDc,gBAAA,WACE,QAASvD,KAAK2C,OAAOiC,CACtB,E,EAEDxB,MAAA,WACE,OAAQpD,KAAKmF,aAAenF,KAAK8C,WAClC,E,EA9HkBqB,GCFAuC,EAAAA,SAAAA,G,4EAOnBC,iBAAA,SAAiBC,GACf,IAAMC,EAAO,EAAH,UAASF,iBAAT,UAA0BC,GAIpC,OAFI5G,KAAKe,MAAM+F,SAASD,EAAKP,KAAK1E,IAAK,eAAgB,CAAED,UAAW,6BAE7DkF,CACR,E,EAbkBH,CAAwBzD,KCH7C,MAAM,EAA+B7D,OAAOC,KAAKC,OAAO,yB,cCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,oC,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,kB,eCGnCyH,GAAAA,WACnB,aACE/G,KAAKgH,YAAc,GACnBhH,KAAKyC,SAAU,CAChB,C,2BAMDwE,aAAA,WAEC,E,EAQDC,OAAA,SAAOC,GAEN,E,EAQDC,WAAA,SAAWC,GAEV,E,EAQDC,YAAA,SAAYD,GAEX,E,EAODE,YAAA,SAAY5E,EAAQ0E,GAEnB,E,EAQDG,qBAAA,SAAqB7E,GAEpB,E,EA7DkBoE,GCEAU,GAAAA,SAAAA,G,oFACnBR,aAAA,WACE,MAAO,yBACR,E,EAEDC,OAAA,SAAOC,GAMLnH,KAAKgH,YALAG,EAKc,CACjBlG,IAAAA,MAAUyG,aAAa,0BAA2B,CAChDtF,WAAY,CACViB,KAAM8D,MAPS,EAWtB,E,EAEDC,WAAA,WACE,OAAOnG,IAAAA,WAAeE,MAAM,6CAC7B,E,EAEDmG,YAAA,SAAYD,GACV,OAAOtC,EAAE,4BAA6BsC,EAAShE,OAChD,E,EAEDkE,YAAA,SAAY5E,EAAQ0E,GAClB1E,EAAOiC,EAAIjC,EAAOiC,EAAIjC,EAAOiC,EAAI,IAAM,GACvCjC,EAAOiC,GAAKyC,EAAShE,MACtB,E,EAEDmE,qBAAA,SAAqB7E,GACnB,OAAKA,EAAOiC,EAILqB,QAAQC,QACbvD,EAAOiC,EACJ+C,MAAM,KAENnD,QAAO,SAACoD,GAAD,OAAiC,IAAvBA,EAAKC,QAAQ,IAAvB,IACPpE,KAAI,SAACmE,GAAD,OACH3G,IAAAA,MAAUyG,aAAa,0BAA2B,CAChDtF,WAAY,CACViB,KAAMuE,IAHP,KARA3B,QAAQC,QAAQ,GAgB1B,E,EAnDkBuB,CAAmBV,ICLxC,MAAM,GAA+B3H,OAAOC,KAAKC,OAAO,uB,eCOnCwI,GAAAA,SAAAA,G,oFACnBb,aAAA,WACE,MAAO,QACR,E,EAEDC,OAAA,SAAOC,GAAO,WACZnH,KAAKgH,YAAc,GAEdG,IAILA,EAAQA,EAAMY,cAEd9G,IAAAA,MAAU+G,IAAI,UAAUC,SAAQ,SAACC,GAE3BA,EAAMxE,OAASyE,KAAAA,YAIwC,IAAvDD,EAAME,eAAeL,cAAcF,QAAQV,KAAsE,IAArDe,EAAMG,aAAaN,cAAcF,QAAQV,IACvG,EAAKH,YAAYV,KAAK4B,GAEzB,IACF,E,EAEDd,WAAA,WACE,OAAOnG,IAAAA,WAAeE,MAAM,8CAC7B,E,EAEDmG,YAAA,SAAYY,GACV,OAAOnD,EACL,4BACAmD,EAAMI,QACF,CACE3G,UAAW,UACX4G,MAAO,CACLC,gBAAiBN,EAAMI,UAG3B,CAAC,EACL,CAACJ,EAAMtG,OAAS,CAACA,IAAKsG,EAAMtG,QAAS,KAAO,KAAMsG,EAAMG,cAE3D,E,EAEDd,YAAA,SAAY5E,EAAQuF,GAClBvF,EAAOiC,EAAIjC,EAAOiC,EAAIjC,EAAOiC,EAAI,IAAM,GACvCjC,EAAOiC,GAAK,SAAWsD,EAAMxE,IAC9B,E,EAED8D,qBAAA,SAAqB7E,GACnB,IAAKA,EAAOiC,EACV,OAAOqB,QAAQC,QAAQ,IAGzB,IAAMuC,EAAoB,IAAM9F,EAAOiC,EAAI,IAErC8D,EAAS,GAETC,EAAcF,EAAkBd,MAAM,KAAKnD,QAAO,SAACI,GAAD,OAAOA,EAAEgE,WAAW,SAApB,IAWxD,OATA3H,IAAAA,MAAU+G,IAAI,UAAUC,SAAQ,SAACC,GAC/BS,EAAYV,SAAQ,SAACY,GACFA,EAAWC,QAAQ,SAAU,IAAInB,MAAM,KAC3CoB,SAASb,EAAMxE,OAC1BgF,EAAOpC,KAAK4B,EAEf,GACF,IAEMjC,QAAQC,QAAQwC,EACxB,E,EAvEkBZ,CAAoBf,ICEpBiC,GAAAA,SAAAA,G,oFACnBC,OAAA,SAAO/G,GAAO,WACZ,YAAM+G,OAAN,UAAa/G,GAEblC,KAAKkJ,YAAc,EACnBlJ,KAAKmJ,UAAY,IAAIC,MACrBpJ,KAAKmJ,UACFE,MAAK,SAACC,GAGL,MAAqB,QAAdA,EAAMhL,OAAmB,EAAKkG,MACtC,IACA+E,MAAK,WACA,EAAKL,YAAc,IACrB,EAAKA,cACLnE,EAAEC,SAEL,IACAwE,QAAO,WACF,EAAKN,YAAc,EAAKO,iBAAiB5J,OAAS,IACpD,EAAKqJ,cACLnE,EAAEC,SAEL,IACA0E,UAAS,WACJ,EAAKlF,QACP,EAAKmF,aAAa,EAAKF,iBAAiB,EAAKP,cAC7CnE,EAAEC,UAEF,EAAK4E,gBAER,IACAC,UAAS,WACR,EAAKC,eAAeC,KACrB,IAEH/J,KAAKgK,iBAAmBhK,KAAKiK,cAAcC,UAC3ClK,KAAK8J,eAAiB,GAEtB9J,KAAKwE,OAAS,GACdxE,KAAKmK,SAAU,EAGfnK,KAAKgK,iBAAiB/B,SAAQ,SAACzD,GAC7BA,EACGgD,qBAAqB,CACpB9C,KAAMK,EAAEqF,MAAMC,MAAM,QACpBzF,EAAGG,EAAEqF,MAAMC,MAAM,OAElB1E,MAAK,SAAC2E,GAAc,OACnB,IAAKR,gBAAexD,KAApB,QAA4BgE,GAC5BvF,EAAEC,QACH,GACJ,GACF,E,EAED/C,KAAA,WAAO,WACC+E,EAAchH,KAAKyJ,iBAEnBhH,EAAUzC,KAAKgK,iBAAiB3E,MAAK,SAACb,GAAD,OAAYA,EAAO/B,OAAnB,IAE3C,OACE,SAAKd,UAAU,4BACb,WAAOA,UAAS,yCAA0C3B,KAAKmK,QAAU,QAAU,KACjF,UAAMxI,UAAU,qCACb3B,KAAK8J,eAAerG,KAAI,SAAC8G,EAAWC,GAAZ,OACvB,UACE7I,UAAU,kCACVuB,QAAS,WACP,EAAK4G,eAAeW,OAAOD,EAAO,GAClC,EAAKZ,gBACN,EACDc,MAAO,EAAKC,iBAAiBJ,IAE5B,EAAKK,eAAeL,GATA,KAa3B,WACE5I,UAAU,cACVkJ,YAAa5J,IAAAA,WAAeE,MAAM,qDAClChC,MAAOa,KAAKwE,OACZsG,QAASC,KAAS,SAAS,SAAC5L,GAC1B,EAAKqF,OAASrF,EACd,EAAK6L,kBACN,IACDC,UAAWjL,KAAKmJ,UAAU+B,SAASzL,KAAKO,KAAKmJ,WAC7CgC,QAAS,WACP,EAAKhB,SAAU,CAChB,EACDiB,OAAQ,WACN,EAAKjB,SAAU,CAChB,IAEF1H,GAAW,EAAC,IAAD,QACTuE,EAAYnH,QACb,QAAI8B,UAAU,iBACXqF,EAAYvD,KAAI,SAAC4H,EAAQb,GAAT,OACf,QACE7I,UAAW,EAAKuH,cAAgBsB,EAAQ,SAAW,GACnDtH,QAAS,WACP,EAAKyG,aAAa0B,GAClB,EAAKzB,gBACN,GAED,YAAQ0B,KAAK,UACX,UAAM3J,UAAU,2BAA2B,EAAKgJ,iBAAiBU,IAChE,EAAKT,eAAeS,IAVV,MAmB5B,E,EAEDpB,YAAA,WACE,IAAMrJ,EAAQ,IAAIC,MAKlB,OAHAD,EAAMI,IAAI,OAAQ,IAAIyG,GAAc,IACpC7G,EAAMI,IAAI,QAAS,IAAI8G,GAAe,IAE/BlH,CACR,E,EAED2K,kBAAA,SAAkBlE,GAChB,OAAOrH,KAAKgK,iBAAiB3D,MAAK,SAACmF,GAAD,OAAOA,EAAEvE,iBAAmBI,EAASoE,KAAKH,IAA1C,GACnC,E,EAEDV,eAAA,SAAevD,GACb,IAAM7C,EAASxE,KAAKuL,kBAAkBlE,GAEtC,OAAI7C,EACKA,EAAO8C,YAAYD,GAGrB,WACR,E,EAEDsD,iBAAA,SAAiBtD,GACf,IAAM7C,EAASxE,KAAKuL,kBAAkBlE,GAEtC,OAAI7C,EACKA,EAAO4C,WAAWC,GAGpB,WACR,E,EAEDsC,aAAA,SAAa0B,GACNA,IAILrL,KAAK8J,eAAexD,KAAK+E,GACzBrL,KAAK0L,mBACN,E,EAEDA,iBAAA,WACE1L,KAAKwE,OAAS,GACdxE,KAAKgK,iBAAiB/B,SAAQ,SAACzD,GAC7BA,EAAO0C,OAAO,GACf,GACF,E,EAEDuC,eAAA,WAAiB,MACf,OAAO,MAAGkC,OAAH,QAAa3L,KAAKgK,iBAAiBvG,KAAI,SAACe,GAAD,OAAYA,EAAOwC,WAAnB,IAC/C,E,EAEDgE,iBAAA,WAAmB,WACjBhL,KAAKkJ,YAAc,EAEnBlJ,KAAKgK,iBAAiB/B,SAAQ,SAACzD,GAC7BA,EAAO0C,OAAO,EAAK1C,OACpB,IAEDxE,KAAKe,MAAM2B,MAAMuC,cAAjB,KAAoCjF,KAAKe,MAAM2B,MAAME,YAArD,CAAkEyB,SAAUrE,KAAKqE,aAClF,E,EAEDA,SAAA,SAAS1B,GAAa,WAUpB,YAVoB,IAAbA,IAAAA,EAAS,CAAC,GACjB3C,KAAK8J,eAAe7B,SAAQ,SAACZ,GAC3B,IAAM7C,EAAS,EAAK+G,kBAAkBlE,GAElC7C,EACFA,EAAO+C,YAAY5E,EAAQ0E,GAE3BuE,QAAQC,KAAK,wCAAyCxE,EAEzD,IACM,CAAE7C,OAAWxE,KAAKwE,OAAV,KAAoB7B,EAAOiC,GAAK,IAChD,E,EAEDgF,eAAA,WACE,IAAMjH,EAAS,CACb+B,KAAMK,EAAEqF,MAAMC,MAAM,SAGtBrK,KAAKqE,SAAS1B,GAEdoC,EAAEqF,MAAM0B,IAAI7K,IAAAA,MAAU,qBAAsB0B,GAC7C,E,EA1MkBqG,CAAoBzG,KCTzC,MAAM,GAA+BnD,OAAOC,KAAKC,OAAO,+B,eCoBnCyM,GAAAA,SAAAA,G,oFACnB9C,OAAA,SAAO/G,GACL,YAAM+G,OAAN,UAAa/G,GAEblC,KAAK0C,MAAQ,IAAIyB,EAAmB,CAAC,GACrCnE,KAAK0C,MAAMuC,cAAchE,IAAAA,OAAW0B,UAEpC3C,KAAKgM,UAAY,kBAEjB,IAY2F,IAZvFC,EAAa,GACbjM,KAAK2C,SAASiC,GAChBsH,MAAMC,KAAKnM,KAAK2C,SAASiC,EAAEwH,SAAS,oBAAoBnE,SAAQ,SAACoE,GAC/DJ,EAAW3F,KAAK+F,EAAM,GACvB,IAEHrM,KAAKsM,oBAAsBL,EACxB1G,KAAK,KACLoC,MAAM,KACNnD,QAAO,SAACd,GAAD,OAAQA,CAAR,IAEV1D,KAAKuM,2BAA6B,GAC9BtL,IAAAA,aAAiBQ,IAAI,mBAAqBR,IAAAA,MAAU4B,UAAU,yBAEhE,SAAI7C,KAAK2C,WAAT,SAAI,EAAeiC,IAAf,EAAkBmE,SAAS,kBAC7B/I,KAAKuM,2BAA2B,kBAAoB,gBAIxDtL,IAAAA,QAAYqF,KAAK,QAASrF,IAAAA,WAAeE,MAAM,kEAChD,E,EAEDqL,SAAA,SAAStK,GACP,YAAMsK,SAAN,UAAetK,GAEfjB,IAAAA,SAAawL,IAAYxL,IAAAA,WAAeE,MAAM,sCAC/C,E,EAEDc,KAAA,WACE,OACE,SAAKN,UAAU,aACZ+K,IAAAA,UAAoBC,OACrB,SAAKhL,UAAU,aACb,SAAKA,UAAU,oBACb,SAAKA,UAAU,yBACb,YAAKiL,IAAU5M,KAAK6M,eAAe3C,aAErC,SAAKvI,UAAU,mCACb,SAAKA,UAAU,qBACb,QAAIA,UAAU,0BAA0BiL,IAAU5M,KAAK8M,YAAY5C,YACnE,QAAIvI,UAAU,4BAA4BiL,IAAU5M,KAAK+M,cAAc7C,aAEzE,EAAC1H,EAAD,CAAmBE,MAAO1C,KAAK0C,WAM1C,E,EAQDmK,aAAA,WACE,IAAMjM,EAAQ8L,IAAAA,UAAoBG,eAalC,OAXAjM,EAAMoM,WACJ,MACAC,IAAAA,UACE,CACEC,gBAAiB,SACjBvL,UAAW,oBAEb3B,KAAKmN,WAAWjD,YAIbtJ,CACR,E,EAQDuM,SAAA,WACE,IAAMvM,EAAQ8L,IAAAA,UAAoBS,WAC5BxK,EAAS3C,KAAKoN,eAcpB,OAZAxM,EAAMI,IACJ,qBACAqM,IAAAA,UACE,CACEC,KAAMrM,IAAAA,MAAU,qBAAsB0B,GACtCf,KAAM,uBAERX,IAAAA,WAAeE,MAAM,sCAEvB,IAGKP,CACR,E,EAEDkM,UAAA,WACE,IAAMlM,EAAQ,IAAIC,KACZ+C,EAAU5D,KAAK0C,MAAMkB,UAErB2J,EAAc,CAAC,EACrB,IAAK,IAAM5N,KAAKiE,EACd2J,EAAY5N,GAAKsB,IAAAA,WAAeE,MAAM,+BAAiCxB,GAmCzE,OAhCAiB,EAAMI,IACJ,OACAwM,IAAAA,UAAiB,CACfC,QAASF,EACTpO,MAAOa,KAAK0C,MAAME,YAAY8B,MAAQzD,IAAAA,MAAU4B,UAAU,4BAC1D6K,SAAU1N,KAAK2N,aAAalO,KAAKO,QAEnC,KAGFY,EAAMI,IACJ,eACA4M,IAAAA,UACE,CACEC,UAAW,gBACXC,MAAO7M,IAAAA,WAAeE,MAAM,+CAC5B+L,gBAAiB,cACjBvL,UAAW,uBAEb3B,KAAK+N,aAAa7D,WAEpB,IAGFtJ,EAAMI,IACJ,SACAgI,GAAY1G,UAAU,CACpBI,MAAO1C,KAAK0C,QAEd,IAGK9B,CACR,E,EAEDmN,WAAA,WAAa,WACLnN,EAAQ,IAAIC,KA4DlB,OA1DAI,IAAAA,MACG+G,IAAI,UACJxD,QAAO,SAAC0D,GAAD,MAA0B,MAAfA,EAAMxE,MAA+B,MAAfwE,EAAMxE,IAAvC,IACPuE,SAAQ,SAACC,GACRtH,EAAMI,IACJkH,EAAMG,aACN3B,EAAgBpE,UACd,CACEX,UAAW,oBACXC,KAAMsG,EAAMtG,OACZkF,QAAS,EAAKwF,oBAAoBvD,SAASb,EAAMxE,MACjDR,QAAS,WACP,IAAMQ,EAAKwE,EAAMxE,KACb,EAAK4I,oBAAoBvD,SAASrF,GACpC,EAAK4I,oBAAsB,EAAKA,oBAAoB9H,QAAO,SAACwJ,GAAD,OAAOA,GAAKtK,CAAZ,KAE3D,EAAK4I,oBAAoBhG,KAAK5C,GAE9B,EAAK6I,2BAA6B,IAGpC,EAAKoB,aAAa,EAAKhL,SAAS+B,KACjC,GAEHwD,EAAMG,cAGX,IAECpH,IAAAA,aAAiBQ,IAAI,mBAAqBR,IAAAA,MAAU4B,UAAU,0BAChEjC,EAAMI,IACJ,UACA0F,EAAgBpE,UACd,CACEX,UAAW,oBACXC,KAAM,aACNkF,QAA+D,iBAAtD9G,KAAKuM,2BAA2B,kBACzCrJ,QAAS,WACP,IAAMQ,EAAK,iBACiC,iBAAxC,EAAK6I,2BAA2B7I,GAClC,EAAK6I,2BAA2B7I,GAAM,IAEtC,EAAK6I,2BAA2B7I,GAAM,eAEtC,EAAK4I,oBAAsB,IAG7B,EAAKqB,aAAa,EAAKhL,SAAS+B,KACjC,GAEHzD,IAAAA,WAAeE,MAAM,sDAEvB,IAGFP,EAAMI,IAAI,YAAaiN,KAAAA,YAAuB,KAGzCrN,CACR,E,EAEDmM,YAAA,WAAc,WACNnM,EAAQ,IAAIC,KAkBlB,OAhBAD,EAAMI,IACJ,UACAiC,IAAAA,UAAiB,CACfyH,MAAOzJ,IAAAA,WAAeE,MAAM,iDAC5BS,KAAM,cACND,UAAW,sBACXuB,QAAS,WACP,EAAKR,MAAM+C,UACPxE,IAAAA,QAAYH,OACdG,IAAAA,MAAUoF,KAAK,QAASpF,IAAAA,QAAYH,KAAK4C,MACzCqB,EAAEC,SAEL,KAIEpE,CACR,E,EAOD+M,aAAA,SAAajJ,GACX,IAAM/B,EAAS3C,KAAK2C,SAEhB+B,IAASzD,IAAAA,MAAU4B,UAAU,mCACxBF,EAAO+B,KAEd/B,EAAO+B,KAAOA,EAGhB,IAAIwJ,EAAQ,GACZ,IAAK,IAAM1J,KAAUxE,KAAKuM,2BACxB2B,GAASlO,KAAKuM,2BAA2B/H,GAAU,IAGrD,GAAIxE,KAAKsM,oBAAoBzM,OAAS,EAAG,CACvC,IAAMsO,EAAUnO,KAAKsM,oBAAoB8B,QAAO,SAACvH,EAAMwH,GACrD,OAAUxH,GAAOA,EAAO,IAAM,IAA9B,SAAyCwH,CAC1C,GAAE,IAEH1L,EAAO0B,SAAW,CAAEqE,OAAQyF,EAC7B,MACCxL,EAAO0B,SAAW,CAAEqE,OAAQ,GAAI9D,EAAGsJ,EAAM1I,QAG3CxF,KAAK0C,MAAMuC,cAActC,GAEzB,IAAM2L,EAAc,KAAK3L,UAClB2L,EAAYjK,SAEnBU,EAAEqF,MAAM0B,IAAI7K,IAAAA,MAAU,qBAAsBqN,GAC7C,E,EAEDlB,aAAA,WACE,MAAO,CACL1I,KAAMK,EAAEqF,MAAMC,MAAM,QACpBzF,EAAGG,EAAEqF,MAAMC,MAAM,KAEpB,E,EAED1H,OAAA,WACE,OAAO3C,KAAKoN,cACb,E,EA3RkBrB,CAA0BwC,KCpB/C,MAAM,GAA+BnP,OAAOC,KAAKC,OAAO,gB,eCKnCkP,GAAAA,SAAAA,G,wIACnBnL,KAAOoL,KAAAA,UAAgB,Q,kBADJD,CAAaC,MCGrBC,GAAa,CACxBhI,gBAAAA,EACAsC,YAAAA,GACAtI,cAAAA,EACA8B,kBAAAA,EACAR,sBAAAA,EACA+J,kBAAAA,GACAvK,sBAAAA,GCXWmN,GAAc,CACzB5H,aAAAA,GACAe,YAAAA,GACAL,WAAAA,ICUWmH,GAAoB,WAC3B3N,IAAAA,MAAU4B,UAAU,4BAA8B5B,IAAAA,MAAU4B,UAAU,mCACxE7C,KAAK6O,EAAE,iBAAiBC,MAAK,WAC3B,IAAID,EAAE7O,MAAM+O,SAAS,wBAArB,CAEA,IAAMC,EAAOH,EAAE7O,MAAMqG,KAAK,sBAAsBhD,OAC1C6E,EAAQjH,IAAAA,MAAUgO,MAAM,SAAU,aAAcD,EAAKE,MAAM,IAEjE,GAAIhH,EAAO,CACT,IAAMiH,EAAON,EAAE,sCAAsC5N,IAAAA,MAAU,qBAAsB,CAAE2D,EAAG,SAASsD,EAAMxE,OAA3F,UAEdyL,EAAKC,GAAG,SAAS,SAAUpB,GACzBjJ,EAAEqF,MAAM0B,IAAI9L,KAAKqP,aAAa,SAC9BrB,EAAEsB,gBACH,IAEDT,EAAE7O,MAAMuP,SAAS,wBAAwBC,KAAKL,EAC/C,CAdmD,CAerD,GAEJ,EAEDlO,IAAAA,aAAiBD,IAAI,sBAAsB,SAACC,GAC1CA,EAAIwO,OAAOC,mBAAqB,CAC9BC,KAAM,SACNrN,UAAWyJ,IAGb9K,EAAImF,MAAMwJ,OAAO,2BAA6BpB,IAE9CqB,EAAAA,EAAAA,QAAOC,IAAAA,UAA6B,QAAQ,SAAU7N,EAAMkF,GACrDlF,GAAShB,EAAI0D,MAAM9B,UAAU,6BAA8B5B,EAAI0D,MAAM9B,UAAU,4CAIpFsE,EAAQA,EAAMY,cAEd9F,EAAKwI,OACH,EACA,EACA1F,EACE,KACAsI,IAAAA,UACE,CACEC,KAAMrM,EAAImJ,MAAM,qBAAsB,CAAExF,EAAGuC,IAC3CvF,KAAM,iBAERX,EAAIC,WAAWC,MAAM,gDAAiD,CAAEgG,MAAAA,OAI/E,KAED0I,EAAAA,EAAAA,QAAOnD,IAAAA,UAAqB,YAAY,SAAC9L,GACnCK,EAAI0D,MAAM9B,UAAU,4BAA8B5B,EAAI0D,MAAM9B,UAAU,mBACxEjC,EAAMI,IACJ,qBACAqM,IAAAA,UACE,CACEC,KAAMrM,EAAImJ,MAAM,sBAChBxI,KAAM,uBAERX,EAAIC,WAAWC,MAAM,sCAEvB,GAGL,KAED0O,EAAAA,EAAAA,QAAOE,IAAAA,UAAuB,WAAYnB,KAC1CiB,EAAAA,EAAAA,QAAOE,IAAAA,UAAuB,WAAYnB,GAC3C,G","sources":["webpack://@fof/user-directory/webpack/bootstrap","webpack://@fof/user-directory/webpack/runtime/compat get default export","webpack://@fof/user-directory/webpack/runtime/define property getters","webpack://@fof/user-directory/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/user-directory/webpack/runtime/make namespace object","webpack://@fof/user-directory/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/UsersSearchSource']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Page']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/SelectDropdown']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/components/UserCard']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/humanTime']\"","webpack://@fof/user-directory/./src/forum/components/SmallUserCard.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/user-directory/./src/forum/components/UserDirectoryUserCard.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryListItem.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryList.js","webpack://@fof/user-directory/./src/common/utils/SortMap.js","webpack://@fof/user-directory/./src/forum/states/UserDirectoryState.js","webpack://@fof/user-directory/./src/forum/components/CheckableButton.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/KeyboardNavigatable']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['utils/ItemList']\"","webpack://@fof/user-directory/./src/forum/searchTypes/AbstractType.js","webpack://@fof/user-directory/./src/forum/searchTypes/TextFilter.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/models/Group']\"","webpack://@fof/user-directory/./src/forum/searchTypes/GroupFilter.js","webpack://@fof/user-directory/./src/forum/components/SearchField.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@fof/user-directory/./src/forum/components/UserDirectoryPage.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/user-directory/./src/forum/models/Text.ts","webpack://@fof/user-directory/./src/forum/components/index.js","webpack://@fof/user-directory/./src/forum/searchTypes/index.js","webpack://@fof/user-directory/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/UsersSearchSource'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/SelectDropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Placeholder'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserCard'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/humanTime'];","import UserCard from 'flarum/forum/components/UserCard';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport humanTime from 'flarum/common/utils/humanTime';\n\nexport default class SmallUserCard extends UserCard {\n  //Overriding infoItems so that other extensions can separately add items to small cards\n  infoItems() {\n    const items = new ItemList();\n    const user = this.attrs.user;\n\n    items.add('joined', app.translator.trans('core.forum.user.joined_date_text', { ago: humanTime(user.joinTime()) }));\n\n    return items;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import UserCard from 'flarum/forum/components/UserCard';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport humanTime from 'flarum/common/utils/humanTime';\nimport icon from 'flarum/common/helpers/icon';\nimport app from 'flarum/forum/app';\n\nexport default class UserDirectoryUserCard extends UserCard {\n  /**\n   * Allowing to add additonal items unique to the user directory.\n   *\n   * @return {ItemList<import('mithril').Children>}\n   */\n  infoItems() {\n    const items = super.infoItems();\n    const user = this.attrs.user;\n\n    if (items.has('lastSeen')) items.setPriority('lastSeen', 100);\n    if (items.has('joined')) items.setPriority('joined', 95);\n    if (items.has('points')) items.setPriority('points', 60);\n    if (items.has('best-answer-count')) items.setPriority('best-answer-count', 68);\n    if (items.has('masquerade-bio')) items.setPriority('masquerade-bio', 50);\n\n    items.add(\n      'discussion-count',\n      <div className=\"userStat\">\n        {icon('fas fa-comment')}\n        {app.translator.trans('fof-user-directory.forum.page.usercard.discussion-count', {\n          count: user.discussionCount(),\n        })}\n      </div>,\n      70\n    );\n\n    items.add(\n      'comment-count',\n      <div className=\"userStat\">\n        {icon('fas fa-comments')}\n        {app.translator.trans('fof-user-directory.forum.page.usercard.post-count', {\n          count: user.commentCount(),\n        })}\n      </div>,\n      69\n    );\n\n    return items;\n  }\n}\n","import Component from 'flarum/common/Component';\nimport UserCard from 'flarum/forum/components/UserCard';\nimport SmallUserCard from './SmallUserCard';\nimport UserDirectoryUserCard from './UserDirectoryUserCard';\n\nexport default class UserDirectoryListItem extends Component {\n  view(vnode) {\n    const { user, useSmallCards } = this.attrs;\n\n    const attributes = {\n      user,\n      className: `UserCard--directory${useSmallCards ? ' UserCard--small' : ''}`,\n      controlsButtonClassName: 'Button Button--icon Button--flat',\n    };\n\n    return <div className=\"User\">{useSmallCards ? SmallUserCard.component(attributes) : UserDirectoryUserCard.component(attributes)}</div>;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport UserDirectoryListItem from './UserDirectoryListItem';\n\n/**\n * Based on Flarum's DiscussionList\n */\nexport default class UserDirectoryList extends Component {\n  view() {\n    const { state } = this.attrs;\n\n    const params = state.getParams();\n    const useSmallCards = app.forum.attribute('userDirectorySmallCards');\n    let loading;\n\n    if (state.isLoading()) {\n      loading = LoadingIndicator.component();\n    } else if (state.moreResults) {\n      loading = Button.component(\n        {\n          className: 'Button',\n          onclick: state.loadMore.bind(state),\n        },\n        app.translator.trans('fof-user-directory.forum.page.load_more_button')\n      );\n    }\n\n    if (state.empty()) {\n      const text = app.translator.trans('fof-user-directory.forum.page.empty_text');\n      return <div className=\"DiscussionList\">{Placeholder.component({ text })}</div>;\n    }\n\n    return (\n      <div\n        className={\n          'UserDirectoryList' +\n          (state.isSearchResults() ? ' UserDirectoryList--searchResults' : '') +\n          (useSmallCards ? ' UserDirectoryList--small-cards' : '')\n        }\n      >\n        <ul className=\"UserDirectoryList-users\">\n          {state.users.map((user) => {\n            return (\n              <li key={user.id()} data-id={user.id()}>\n                {UserDirectoryListItem.component({ user, params, useSmallCards })}\n              </li>\n            );\n          })}\n        </ul>\n        <div className=\"UserDirectoryList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n}\n","/**\n * The sort options.\n * We use a class and not just a POJO/function because we want extensions to be able to extend it\n */\nexport default class SortMap {\n  sortMap() {\n    return {\n      username_az: 'username',\n      username_za: '-username',\n      newest: '-joinedAt',\n      oldest: 'joinedAt',\n      most_discussions: '-discussionCount',\n      least_discussions: 'discussionCount',\n    };\n  }\n}\n","/**\n * Based on Flarum's DiscussionListState\n */\nimport SortMap from '../../common/utils/SortMap';\n\nexport default class UserDirectoryState {\n  constructor(params = {}, app = window.app) {\n    this.params = params;\n\n    this.app = app;\n\n    this.users = [];\n\n    this.moreResults = false;\n\n    this.loading = false;\n\n    this.qBuilder = {};\n  }\n\n  requestParams() {\n    const params = { include: [], filter: {} };\n\n    const sortKey = this.params.sort || app.forum.attribute('userDirectoryDefaultSort');\n\n    // sort might be set to null if no sort params has been passed\n    params.sort = this.sortMap()[sortKey];\n\n    if (this.params.q) {\n      params.filter.q = this.params.q;\n    }\n\n    return params;\n  }\n\n  sortMap() {\n    return {\n      default: '',\n      ...new SortMap().sortMap(),\n    };\n  }\n\n  getParams() {\n    return this.params;\n  }\n\n  clear() {\n    this.users = [];\n    m.redraw();\n  }\n\n  refreshParams(newParams) {\n    if (!this.hasUsers() || Object.keys(newParams).some((key) => this.getParams()[key] !== newParams[key])) {\n      const q = '';\n      this.params = newParams;\n\n      if (newParams.qBuilder) {\n        Object.assign(this.qBuilder, newParams.qBuilder || {});\n        this.params.q = Object.values(this.qBuilder).join(' ').trim();\n      }\n\n      if (!this.params.q && q) {\n        this.params.q = q;\n      }\n\n      this.refresh();\n    }\n  }\n\n  refresh() {\n    this.loading = true;\n\n    this.clear();\n\n    return this.loadResults().then(\n      (results) => {\n        this.users = [];\n        this.parseResults(results);\n      },\n      () => {\n        this.loading = false;\n        m.redraw();\n      }\n    );\n  }\n\n  loadResults(offset) {\n    const preloadedUsers = this.app.preloadedApiDocument();\n\n    if (preloadedUsers) {\n      return Promise.resolve(preloadedUsers);\n    }\n\n    const params = this.requestParams();\n    params.page = { offset };\n    params.include = params.include.join(',');\n\n    return this.app.store.find('users', params);\n  }\n\n  loadMore() {\n    this.loading = true;\n\n    this.loadResults(this.users.length).then(this.parseResults.bind(this));\n  }\n\n  parseResults(results) {\n    this.users.push(...results);\n\n    this.loading = false;\n    this.moreResults = !!results.payload.links && !!results.payload.links.next;\n\n    m.redraw();\n\n    return results;\n  }\n\n  hasUsers() {\n    return this.users.length > 0;\n  }\n\n  isLoading() {\n    return this.loading;\n  }\n\n  isSearchResults() {\n    return !!this.params.q;\n  }\n\n  empty() {\n    return !this.hasUsers() && !this.isLoading();\n  }\n}\n","import Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\n\nexport default class CheckableButton extends Button {\n  /**\n   * Get the template for the button's content.\n   *\n   * @return {*}\n   * @protected\n   */\n  getButtonContent(children) {\n    const prev = super.getButtonContent(children);\n\n    if (this.attrs.checked) prev.push(icon('fas fa-check', { className: 'Button-icon ButtonCheck' }));\n\n    return prev;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/KeyboardNavigatable'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/ItemList'];","/**\n * @abstract\n */\nexport default class AbstractType {\n  constructor() {\n    this.suggestions = [];\n    this.loading = false;\n  }\n\n  /**\n   * The `type` property of the Models used in suggestions and applied filters for this type\n   * @return {String}\n   */\n  resourceType() {\n    //\n  }\n\n  /**\n   * Executed when the search query changes\n   * The method should update this.suggestions with the new results\n   * If asynchronous loading is used, this.loading should be set to true during the process\n   * @param {String} query\n   */\n  search(query) {\n    //\n  }\n\n  /**\n   * Renders the \"kind\" label next to the value indicating what kind of information that result is\n   * Should probably just be a translated text\n   * @param {Model} resource\n   * @return {vnode}\n   */\n  renderKind(resource) {\n    //\n  }\n\n  /**\n   * Renders the Label containing the suggestion's value\n   * Should be a vdom template using the .UserDirectorySearchLabel class or similar\n   * @param {Model} resource\n   * @return {vnode}\n   */\n  renderLabel(resource) {\n    //\n  }\n\n  /**\n   * Applies a filter on a params object to use in the page request\n   * @param {Object} params Object. Might or might not contain a `q` property or `sort` property. In the future, `filters` object might be supported\n   * @param {Model} resource\n   */\n  applyFilter(params, resource) {\n    //\n  }\n\n  /**\n   * Used to populate the search field on page load with values from the querystring\n   * A promise must be returned, and the UI will auto-update once the promise returns\n   * @param {Object} params Object with a `q` and `sort` property. `filters` might be supported in the future\n   * @return {Promise<Model[]>}\n   */\n  initializeFromParams(params) {\n    //\n  }\n}\n","import app from 'flarum/forum/app';\nimport AbstractType from './AbstractType';\n\n/* global m */\n\nexport default class TextFilter extends AbstractType {\n  resourceType() {\n    return 'fof-user-directory-text';\n  }\n\n  search(query) {\n    if (!query) {\n      this.suggestions = [];\n      return;\n    }\n\n    this.suggestions = [\n      app.store.createRecord('fof-user-directory-text', {\n        attributes: {\n          text: query,\n        },\n      }),\n    ];\n  }\n\n  renderKind() {\n    return app.translator.trans('fof-user-directory.forum.search.kinds.text');\n  }\n\n  renderLabel(resource) {\n    return m('.UserDirectorySearchLabel', resource.text());\n  }\n\n  applyFilter(params, resource) {\n    params.q = params.q ? params.q + ' ' : '';\n    params.q += resource.text();\n  }\n\n  initializeFromParams(params) {\n    if (!params.q) {\n      return Promise.resolve([]);\n    }\n\n    return Promise.resolve(\n      params.q\n        .split(' ')\n        // Words with : are gambits and we will ignore them\n        .filter((word) => word.indexOf(':') === -1)\n        .map((word) =>\n          app.store.createRecord('fof-user-directory-text', {\n            attributes: {\n              text: word,\n            },\n          })\n        )\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Group'];","import app from 'flarum/forum/app';\nimport Group from 'flarum/common/models/Group';\nimport icon from 'flarum/common/helpers/icon';\nimport AbstractType from './AbstractType';\n\n/* global m */\n\nexport default class GroupFilter extends AbstractType {\n  resourceType() {\n    return 'groups';\n  }\n\n  search(query) {\n    this.suggestions = [];\n\n    if (!query) {\n      return;\n    }\n\n    query = query.toLowerCase();\n\n    app.store.all('groups').forEach((group) => {\n      // Do not allow Guest group as it wouldn't do anything\n      if (group.id() === Group.GUEST_ID) {\n        return;\n      }\n\n      if (group.nameSingular().toLowerCase().indexOf(query) !== -1 || group.namePlural().toLowerCase().indexOf(query) !== -1) {\n        this.suggestions.push(group);\n      }\n    });\n  }\n\n  renderKind() {\n    return app.translator.trans('fof-user-directory.forum.search.kinds.group');\n  }\n\n  renderLabel(group) {\n    return m(\n      '.UserDirectorySearchLabel',\n      group.color()\n        ? {\n            className: 'colored',\n            style: {\n              backgroundColor: group.color(),\n            },\n          }\n        : {},\n      [group.icon() ? [icon(group.icon()), ' '] : null, group.namePlural()]\n    );\n  }\n\n  applyFilter(params, group) {\n    params.q = params.q ? params.q + ' ' : '';\n    params.q += 'group:' + group.id();\n  }\n\n  initializeFromParams(params) {\n    if (!params.q) {\n      return Promise.resolve([]);\n    }\n\n    const qWithSpacesAround = ' ' + params.q + ' ';\n\n    const groups = [];\n\n    const queryGroups = qWithSpacesAround.split(' ').filter((q) => q.startsWith('group:'));\n\n    app.store.all('groups').forEach((group) => {\n      queryGroups.forEach((queryGroup) => {\n        const groupIds = queryGroup.replace('group:', '').split(',');\n        if (groupIds.includes(group.id())) {\n          groups.push(group);\n        }\n      });\n    });\n\n    return Promise.resolve(groups);\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport KeyboardNavigatable from 'flarum/common/utils/KeyboardNavigatable';\nimport ItemList from 'flarum/utils/ItemList';\nimport TextFilter from '../searchTypes/TextFilter';\nimport GroupFilter from '../searchTypes/GroupFilter';\n\nexport default class SearchField extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.searchIndex = 0;\n    this.navigator = new KeyboardNavigatable();\n    this.navigator\n      .when((event) => {\n        // Do not handle keyboard when TAB is pressed and there's nothing in field\n        // Without this it's impossible to TAB out of the field\n        return event.key !== 'Tab' || !!this.filter;\n      })\n      .onUp(() => {\n        if (this.searchIndex > 0) {\n          this.searchIndex--;\n          m.redraw();\n        }\n      })\n      .onDown(() => {\n        if (this.searchIndex < this.allSuggestions().length - 1) {\n          this.searchIndex++;\n          m.redraw();\n        }\n      })\n      .onSelect(() => {\n        if (this.filter) {\n          this.selectResult(this.allSuggestions()[this.searchIndex]);\n          m.redraw();\n        } else {\n          this.applyFiltering();\n        }\n      })\n      .onRemove(() => {\n        this.appliedFilters.pop();\n      });\n\n    this.availableFilters = this.filterTypes().toArray();\n    this.appliedFilters = [];\n\n    this.filter = '';\n    this.focused = false;\n\n    // When the page loads, initialize UI with filters from the parameters\n    this.availableFilters.forEach((filter) => {\n      filter\n        .initializeFromParams({\n          sort: m.route.param('sort'),\n          q: m.route.param('q'),\n        })\n        .then((resources) => {\n          this.appliedFilters.push(...resources);\n          m.redraw();\n        });\n    });\n  }\n\n  view() {\n    const suggestions = this.allSuggestions();\n\n    const loading = this.availableFilters.some((filter) => filter.loading);\n\n    return (\n      <div className=\"Form-group Usersearchbox\">\n        <label className={`UserDirectorySearchInput FormControl ${this.focused ? 'focus' : ''}`}>\n          <span className=\"UserDirectorySearchInput-selected\">\n            {this.appliedFilters.map((recipient, index) => (\n              <span\n                className=\"UserDirectorySearchInput-filter\"\n                onclick={() => {\n                  this.appliedFilters.splice(index, 1);\n                  this.applyFiltering();\n                }}\n                title={this.searchResultKind(recipient)}\n              >\n                {this.recipientLabel(recipient)}\n              </span>\n            ))}\n          </span>\n          <input\n            className=\"FormControl\"\n            placeholder={app.translator.trans('fof-user-directory.forum.search.field.placeholder')}\n            value={this.filter}\n            oninput={withAttr('value', (value) => {\n              this.filter = value;\n              this.performNewSearch();\n            })}\n            onkeydown={this.navigator.navigate.bind(this.navigator)}\n            onfocus={() => {\n              this.focused = true;\n            }}\n            onblur={() => {\n              this.focused = false;\n            }}\n          />\n          {loading && <LoadingIndicator />}\n          {!!suggestions.length && (\n            <ul className=\"Dropdown-menu\">\n              {suggestions.map((result, index) => (\n                <li\n                  className={this.searchIndex === index ? 'active' : ''}\n                  onclick={() => {\n                    this.selectResult(result);\n                    this.applyFiltering();\n                  }}\n                >\n                  <button type=\"button\">\n                    <span className=\"UserDirectorySearchKind\">{this.searchResultKind(result)}</span>\n                    {this.recipientLabel(result)}\n                  </button>\n                </li>\n              ))}\n            </ul>\n          )}\n        </label>\n      </div>\n    );\n  }\n\n  filterTypes() {\n    const items = new ItemList();\n\n    items.add('text', new TextFilter(), 10);\n    items.add('group', new GroupFilter(), 20);\n\n    return items;\n  }\n\n  filterForResource(resource) {\n    return this.availableFilters.find((f) => f.resourceType() === resource.data.type);\n  }\n\n  recipientLabel(resource) {\n    const filter = this.filterForResource(resource);\n\n    if (filter) {\n      return filter.renderLabel(resource);\n    }\n\n    return '[unknown]';\n  }\n\n  searchResultKind(resource) {\n    const filter = this.filterForResource(resource);\n\n    if (filter) {\n      return filter.renderKind(resource);\n    }\n\n    return '[unknown]';\n  }\n\n  selectResult(result) {\n    if (!result) {\n      return;\n    }\n\n    this.appliedFilters.push(result);\n    this.clearSuggestions();\n  }\n\n  clearSuggestions() {\n    this.filter = '';\n    this.availableFilters.forEach((filter) => {\n      filter.search('');\n    });\n  }\n\n  allSuggestions() {\n    return [].concat(...this.availableFilters.map((filter) => filter.suggestions));\n  }\n\n  performNewSearch() {\n    this.searchIndex = 0;\n\n    this.availableFilters.forEach((filter) => {\n      filter.search(this.filter);\n    });\n\n    this.attrs.state.refreshParams({ ...this.attrs.state.getParams(), qBuilder: this.qBuilder() });\n  }\n\n  qBuilder(params = {}) {\n    this.appliedFilters.forEach((resource) => {\n      const filter = this.filterForResource(resource);\n\n      if (filter) {\n        filter.applyFilter(params, resource);\n      } else {\n        console.warn('Cannot find filter class for resource', resource);\n      }\n    });\n    return { filter: `${this.filter} ${params.q || ''}` };\n  }\n\n  applyFiltering() {\n    const params = {\n      sort: m.route.param('sort'),\n    };\n\n    this.qBuilder(params);\n\n    m.route.set(app.route('fof_user_directory', params));\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Select from 'flarum/common/components/Select';\nimport Button from 'flarum/common/components/Button';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport extractText from 'flarum/common/utils/extractText';\nimport UserDirectoryList from './UserDirectoryList';\nimport UserDirectoryState from '../states/UserDirectoryState';\nimport CheckableButton from './CheckableButton';\nimport SearchField from './SearchField';\nimport Separator from 'flarum/common/components/Separator';\n\n/**\n * This page re-uses Flarum's IndexPage CSS classes\n */\nexport default class UserDirectoryPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.state = new UserDirectoryState({});\n    this.state.refreshParams(app.search.params());\n\n    this.bodyClass = 'User--directory';\n\n    let idSegments = [];\n    if (this.params().q) {\n      Array.from(this.params().q.matchAll(/group:([\\d,]+)/g)).forEach((match) => {\n        idSegments.push(match[1]);\n      });\n    }\n    this.enabledGroupFilters = idSegments\n      .join(',')\n      .split(',')\n      .filter((id) => id);\n\n    this.enabledSpecialGroupFilters = [];\n    if (app.initializers.has('flarum-suspend') && app.forum.attribute('hasSuspendPermission')) {\n      // If there is a special group filter int the params, enable it here\n      if (this.params()?.q?.includes('is:suspended')) {\n        this.enabledSpecialGroupFilters['flarum-suspend'] = 'is:suspended';\n      }\n    }\n\n    app.history.push('users', app.translator.trans('fof-user-directory.forum.header.back_to_user_directory_tooltip'));\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    app.setTitle(extractText(app.translator.trans('fof-user-directory.forum.page.nav')));\n  }\n\n  view() {\n    return (\n      <div className=\"IndexPage\">\n        {IndexPage.prototype.hero()}\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"IndexPage-nav sideNav\">\n              <ul>{listItems(this.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"IndexPage-results sideNavOffset\">\n              <div className=\"IndexPage-toolbar\">\n                <ul className=\"IndexPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\n                <ul className=\"IndexPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n              </div>\n              <UserDirectoryList state={this.state} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Our own sidebar. Re-uses Index.sidebarItems as the base\n   * Elements added here will only show up on the user directory page\n   *\n   * @return {ItemList}\n   */\n  sidebarItems() {\n    const items = IndexPage.prototype.sidebarItems();\n\n    items.setContent(\n      'nav',\n      SelectDropdown.component(\n        {\n          buttonClassName: 'Button',\n          className: 'App-titleControl',\n        },\n        this.navItems().toArray()\n      )\n    );\n\n    return items;\n  }\n\n  /**\n   * Our own sidebar navigation. Re-uses Index.navItems as the base\n   * Elements added here will only show up on the user directory page\n   *\n   * @return {ItemList}\n   */\n  navItems() {\n    const items = IndexPage.prototype.navItems();\n    const params = this.stickyParams();\n\n    items.add(\n      'fof-user-directory',\n      LinkButton.component(\n        {\n          href: app.route('fof_user_directory', params),\n          icon: 'far fa-address-book',\n        },\n        app.translator.trans('fof-user-directory.forum.page.nav')\n      ),\n      85\n    );\n\n    return items;\n  }\n\n  viewItems() {\n    const items = new ItemList();\n    const sortMap = this.state.sortMap();\n\n    const sortOptions = {};\n    for (const i in sortMap) {\n      sortOptions[i] = app.translator.trans('fof-user-directory.lib.sort.' + i);\n    }\n\n    items.add(\n      'sort',\n      Select.component({\n        options: sortOptions,\n        value: this.state.getParams().sort || app.forum.attribute('userDirectoryDefaultSort'),\n        onchange: this.changeParams.bind(this),\n      }),\n      100\n    );\n\n    items.add(\n      'filterGroups',\n      Dropdown.component(\n        {\n          caretIcon: 'fas fa-filter',\n          label: app.translator.trans('fof-user-directory.forum.page.filter_button'),\n          buttonClassName: 'FormControl',\n          className: 'GroupFilterDropdown',\n        },\n        this.groupItems().toArray()\n      ),\n      80\n    );\n\n    items.add(\n      'search',\n      SearchField.component({\n        state: this.state,\n      }),\n      60\n    );\n\n    return items;\n  }\n\n  groupItems() {\n    const items = new ItemList();\n\n    app.store\n      .all('groups')\n      .filter((group) => group.id() !== '2' && group.id() !== '3')\n      .forEach((group) => {\n        items.add(\n          group.namePlural(),\n          CheckableButton.component(\n            {\n              className: 'GroupFilterButton',\n              icon: group.icon(),\n              checked: this.enabledGroupFilters.includes(group.id()),\n              onclick: () => {\n                const id = group.id();\n                if (this.enabledGroupFilters.includes(id)) {\n                  this.enabledGroupFilters = this.enabledGroupFilters.filter((e) => e != id);\n                } else {\n                  this.enabledGroupFilters.push(id);\n                  // Empty the special group filters\n                  this.enabledSpecialGroupFilters = [];\n                }\n\n                this.changeParams(this.params().sort);\n              },\n            },\n            group.namePlural()\n          )\n        );\n      });\n\n    if (app.initializers.has('flarum-suspend') && app.forum.attribute('hasSuspendPermission')) {\n      items.add(\n        'suspend',\n        CheckableButton.component(\n          {\n            className: 'GroupFilterButton',\n            icon: 'fas fa-ban',\n            checked: this.enabledSpecialGroupFilters['flarum-suspend'] === 'is:suspended',\n            onclick: () => {\n              const id = 'flarum-suspend';\n              if (this.enabledSpecialGroupFilters[id] === 'is:suspended') {\n                this.enabledSpecialGroupFilters[id] = '';\n              } else {\n                this.enabledSpecialGroupFilters[id] = 'is:suspended';\n                // Empty the group filters\n                this.enabledGroupFilters = [];\n              }\n\n              this.changeParams(this.params().sort);\n            },\n          },\n          app.translator.trans('flarum-suspend.forum.user_badge.suspended_tooltip')\n        ),\n        90\n      );\n\n      items.add('seperator', Separator.component(), 50);\n    }\n\n    return items;\n  }\n\n  actionItems() {\n    const items = new ItemList();\n\n    items.add(\n      'refresh',\n      Button.component({\n        title: app.translator.trans('fof-user-directory.forum.page.refresh_tooltip'),\n        icon: 'fas fa-sync',\n        className: 'Button Button--icon',\n        onclick: () => {\n          this.state.refresh();\n          if (app.session.user) {\n            app.store.find('users', app.session.user.id());\n            m.redraw();\n          }\n        },\n      })\n    );\n\n    return items;\n  }\n\n  /**\n   * Redirect to the index page using the given sort parameter.\n   *\n   * @param {String} sort\n   */\n  changeParams(sort) {\n    const params = this.params();\n\n    if (sort === app.forum.attribute('userDirectoryDefaultSort')) {\n      delete params.sort;\n    } else {\n      params.sort = sort;\n    }\n\n    let moreQ = '';\n    for (const filter in this.enabledSpecialGroupFilters) {\n      moreQ += this.enabledSpecialGroupFilters[filter] + ' ';\n    }\n\n    if (this.enabledGroupFilters.length > 0) {\n      const groupsQ = this.enabledGroupFilters.reduce((prev, curr) => {\n        return `${prev}${prev ? ' ' : ''}group:${curr}`;\n      }, '');\n\n      params.qBuilder = { groups: groupsQ };\n    } else {\n      params.qBuilder = { groups: '', q: moreQ.trim() };\n    }\n\n    this.state.refreshParams(params);\n\n    const routeParams = { ...params };\n    delete routeParams.qBuilder;\n\n    m.route.set(app.route('fof_user_directory', routeParams));\n  }\n\n  stickyParams() {\n    return {\n      sort: m.route.param('sort'),\n      q: m.route.param('q'),\n    };\n  }\n\n  params() {\n    return this.stickyParams();\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\n/**\n * Special model used only client-side to hold a free text search value in the search field\n */\nexport default class Text extends Model {\n  text = Model.attribute('text');\n}\n","import CheckableButton from './CheckableButton';\nimport SearchField from './SearchField';\nimport SmallUserCard from './SmallUserCard';\nimport UserDirectoryList from './UserDirectoryList';\nimport UserDirectoryListItem from './UserDirectoryListItem';\nimport UserDirectoryPage from './UserDirectoryPage';\nimport UserDirectoryUserCard from './UserDirectoryUserCard';\n\nexport const components = {\n  CheckableButton,\n  SearchField,\n  SmallUserCard,\n  UserDirectoryList,\n  UserDirectoryListItem,\n  UserDirectoryPage,\n  UserDirectoryUserCard,\n};\n","import AbstractType from './AbstractType';\nimport GroupFilter from './GroupFilter';\nimport TextFilter from './TextFilter';\n\nexport const searchTypes = {\n  AbstractType,\n  GroupFilter,\n  TextFilter,\n};\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport UsersSearchSource from 'flarum/common/components/UsersSearchSource';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport UserDirectoryPage from './components/UserDirectoryPage';\nimport UserDirectoryList from './components/UserDirectoryList';\nimport UserDirectoryListItem from './components/UserDirectoryListItem';\nimport UserDirectoryState from './states/UserDirectoryState';\nimport SortMap from '../common/utils/SortMap';\nimport CheckableButton from './components/CheckableButton';\nimport Text from './models/Text';\n\n// Allow other extensions to extend the page\nexport { UserDirectoryPage, UserDirectoryList, UserDirectoryListItem, UserDirectoryState, SortMap, CheckableButton };\n\nexport const linkGroupMentions = function () {\n  if (app.forum.attribute('canSeeUserDirectoryLink') && app.forum.attribute('userDirectoryLinkGroupMentions')) {\n    this.$('.GroupMention').each(function () {\n      if ($(this).hasClass('GroupMention--linked')) return;\n\n      const name = $(this).find('.GroupMention-name').text();\n      const group = app.store.getBy('groups', 'namePlural', name.slice(1));\n\n      if (group) {\n        const link = $(`<a class=\"GroupMention-link\" href=\"${app.route('fof_user_directory', { q: `group:${group.id()}` })}\"></a>`);\n\n        link.on('click', function (e) {\n          m.route.set(this.getAttribute('href'));\n          e.preventDefault();\n        });\n\n        $(this).addClass('GroupMention--linked').wrap(link);\n      }\n    });\n  }\n};\n\napp.initializers.add('fof-user-directory', (app) => {\n  app.routes.fof_user_directory = {\n    path: '/users',\n    component: UserDirectoryPage,\n  };\n\n  app.store.models['fof-user-directory-text'] = Text;\n\n  extend(UsersSearchSource.prototype, 'view', function (view, query) {\n    if (!view || !app.forum.attribute('canSeeUserDirectoryLink') || app.forum.attribute('userDirectoryDisableGlobalSearchSource')) {\n      return;\n    }\n\n    query = query.toLowerCase();\n\n    view.splice(\n      1,\n      0,\n      m(\n        'li',\n        LinkButton.component(\n          {\n            href: app.route('fof_user_directory', { q: query }),\n            icon: 'fas fa-search',\n          },\n          app.translator.trans('fof-user-directory.forum.search.users_heading', { query })\n        )\n      )\n    );\n  });\n\n  extend(IndexPage.prototype, 'navItems', (items) => {\n    if (app.forum.attribute('canSeeUserDirectoryLink') && app.forum.attribute('canSearchUsers')) {\n      items.add(\n        'fof-user-directory',\n        LinkButton.component(\n          {\n            href: app.route('fof_user_directory'),\n            icon: 'far fa-address-book',\n          },\n          app.translator.trans('fof-user-directory.forum.page.nav')\n        ),\n        85\n      );\n    }\n  });\n\n  extend(CommentPost.prototype, 'oncreate', linkGroupMentions);\n  extend(CommentPost.prototype, 'onupdate', linkGroupMentions);\n});\n\nexport * from './components';\nexport * from './searchTypes';\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_extends","assign","bind","target","i","arguments","length","source","apply","this","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","SmallUserCard","infoItems","items","ItemList","user","attrs","add","app","translator","trans","ago","humanTime","joinTime","UserCard","UserDirectoryUserCard","has","setPriority","className","icon","count","discussionCount","commentCount","UserDirectoryListItem","view","vnode","useSmallCards","attributes","controlsButtonClassName","component","Component","UserDirectoryList","loading","state","params","getParams","attribute","isLoading","LoadingIndicator","moreResults","Button","onclick","loadMore","empty","text","Placeholder","isSearchResults","users","map","id","SortMap","sortMap","username_az","username_za","newest","oldest","most_discussions","least_discussions","UserDirectoryState","window","qBuilder","requestParams","include","filter","sortKey","sort","forum","q","default","clear","m","redraw","refreshParams","newParams","hasUsers","keys","some","values","join","trim","refresh","loadResults","then","results","parseResults","offset","preloadedUsers","preloadedApiDocument","Promise","resolve","page","store","find","push","payload","links","next","CheckableButton","getButtonContent","children","prev","checked","AbstractType","suggestions","resourceType","search","query","renderKind","resource","renderLabel","applyFilter","initializeFromParams","TextFilter","createRecord","split","word","indexOf","GroupFilter","toLowerCase","all","forEach","group","Group","nameSingular","namePlural","color","style","backgroundColor","qWithSpacesAround","groups","queryGroups","startsWith","queryGroup","replace","includes","SearchField","oninit","searchIndex","navigator","KeyboardNavigatable","when","event","onUp","onDown","allSuggestions","onSelect","selectResult","applyFiltering","onRemove","appliedFilters","pop","availableFilters","filterTypes","toArray","focused","route","param","resources","recipient","index","splice","title","searchResultKind","recipientLabel","placeholder","oninput","withAttr","performNewSearch","onkeydown","navigate","onfocus","onblur","result","type","filterForResource","f","data","clearSuggestions","concat","console","warn","set","UserDirectoryPage","bodyClass","idSegments","Array","from","matchAll","match","enabledGroupFilters","enabledSpecialGroupFilters","oncreate","extractText","IndexPage","hero","listItems","sidebarItems","viewItems","actionItems","setContent","SelectDropdown","buttonClassName","navItems","stickyParams","LinkButton","href","sortOptions","Select","options","onchange","changeParams","Dropdown","caretIcon","label","groupItems","e","Separator","moreQ","groupsQ","reduce","curr","routeParams","Page","Text","Model","components","searchTypes","linkGroupMentions","$","each","hasClass","name","getBy","slice","link","on","getAttribute","preventDefault","addClass","wrap","routes","fof_user_directory","path","models","extend","UsersSearchSource","CommentPost"],"sourceRoot":""}