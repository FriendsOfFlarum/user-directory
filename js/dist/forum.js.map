{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/user-directory/webpack/bootstrap","webpack://@fof/user-directory/webpack/runtime/compat get default export","webpack://@fof/user-directory/webpack/runtime/define property getters","webpack://@fof/user-directory/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/user-directory/webpack/runtime/make namespace object","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Page']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/SelectDropdown']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/components/UserCard']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/humanTime']\"","webpack://@fof/user-directory/./src/forum/components/SmallUserCard.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/user-directory/./src/forum/components/UserDirectoryUserCard.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryListItem.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryList.js","webpack://@fof/user-directory/./src/common/utils/SortMap.js","webpack://@fof/user-directory/./src/forum/states/UserDirectoryState.js","webpack://@fof/user-directory/./src/forum/components/CheckableButton.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/KeyboardNavigatable']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['utils/ItemList']\"","webpack://@fof/user-directory/./src/forum/searchTypes/AbstractType.js","webpack://@fof/user-directory/./src/forum/searchTypes/TextFilter.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/models/Group']\"","webpack://@fof/user-directory/./src/forum/searchTypes/GroupFilter.js","webpack://@fof/user-directory/./src/forum/components/SearchField.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@fof/user-directory/./src/forum/components/UserDirectoryPage.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@fof/user-directory/./src/forum/extenders/extendCommentPost.tsx","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/components/UsersSearchSource']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/helpers/textContrastClass']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@fof/user-directory/./src/forum/components/UserDirectoryHero.tsx","webpack://@fof/user-directory/external root \"flarum.core.compat['common/extenders']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/user-directory/./src/forum/models/Text.ts","webpack://@fof/user-directory/./src/forum/extend.ts","webpack://@fof/user-directory/./src/forum/components/index.ts","webpack://@fof/user-directory/./src/forum/searchTypes/index.js","webpack://@fof/user-directory/./src/forum/index.ts","webpack://@fof/user-directory/./src/forum/extenders/extendUsersSearchSource.tsx","webpack://@fof/user-directory/./src/forum/extenders/extendIndexPage.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/SelectDropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Placeholder'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserCard'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/humanTime'];","import UserCard from 'flarum/forum/components/UserCard';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport humanTime from 'flarum/common/utils/humanTime';\n\nexport default class SmallUserCard extends UserCard {\n  //Overriding infoItems so that other extensions can separately add items to small cards\n  infoItems() {\n    const items = new ItemList();\n    const user = this.attrs.user;\n\n    items.add('joined', app.translator.trans('core.forum.user.joined_date_text', { ago: humanTime(user.joinTime()) }));\n\n    return items;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import UserCard from 'flarum/forum/components/UserCard';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport humanTime from 'flarum/common/utils/humanTime';\nimport icon from 'flarum/common/helpers/icon';\nimport app from 'flarum/forum/app';\n\nexport default class UserDirectoryUserCard extends UserCard {\n  /**\n   * Allowing to add additonal items unique to the user directory.\n   *\n   * @return {ItemList<import('mithril').Children>}\n   */\n  infoItems() {\n    const items = super.infoItems();\n    const user = this.attrs.user;\n\n    if (items.has('lastSeen')) items.setPriority('lastSeen', 100);\n    if (items.has('joined')) items.setPriority('joined', 95);\n    if (items.has('points')) items.setPriority('points', 60);\n    if (items.has('best-answer-count')) items.setPriority('best-answer-count', 68);\n    if (items.has('masquerade-bio')) items.setPriority('masquerade-bio', 50);\n\n    items.add(\n      'discussion-count',\n      <div className=\"userStat\">\n        {icon('fas fa-comment')}\n        {app.translator.trans('fof-user-directory.forum.page.usercard.discussion-count', {\n          count: user.discussionCount(),\n        })}\n      </div>,\n      70\n    );\n\n    items.add(\n      'comment-count',\n      <div className=\"userStat\">\n        {icon('fas fa-comments')}\n        {app.translator.trans('fof-user-directory.forum.page.usercard.post-count', {\n          count: user.commentCount(),\n        })}\n      </div>,\n      69\n    );\n\n    return items;\n  }\n}\n","import Component from 'flarum/common/Component';\nimport UserCard from 'flarum/forum/components/UserCard';\nimport SmallUserCard from './SmallUserCard';\nimport UserDirectoryUserCard from './UserDirectoryUserCard';\n\nexport default class UserDirectoryListItem extends Component {\n  view(vnode) {\n    const { user, useSmallCards } = this.attrs;\n\n    const attributes = {\n      user,\n      className: `UserCard--directory${useSmallCards ? ' UserCard--small' : ''}`,\n      controlsButtonClassName: 'Button Button--icon Button--flat',\n    };\n\n    return <div className=\"User\">{useSmallCards ? SmallUserCard.component(attributes) : UserDirectoryUserCard.component(attributes)}</div>;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport UserDirectoryListItem from './UserDirectoryListItem';\n\n/**\n * Based on Flarum's DiscussionList\n */\nexport default class UserDirectoryList extends Component {\n  view() {\n    const { state } = this.attrs;\n\n    const params = state.getParams();\n    const useSmallCards = app.forum.attribute('userDirectorySmallCards');\n    let loading;\n\n    if (state.isLoading()) {\n      loading = LoadingIndicator.component();\n    } else if (state.moreResults) {\n      loading = Button.component(\n        {\n          className: 'Button',\n          onclick: state.loadMore.bind(state),\n        },\n        app.translator.trans('fof-user-directory.forum.page.load_more_button')\n      );\n    }\n\n    if (state.empty()) {\n      const text = app.translator.trans('fof-user-directory.forum.page.empty_text');\n      return <div className=\"DiscussionList\">{Placeholder.component({ text })}</div>;\n    }\n\n    return (\n      <div\n        className={\n          'UserDirectoryList' +\n          (state.isSearchResults() ? ' UserDirectoryList--searchResults' : '') +\n          (useSmallCards ? ' UserDirectoryList--small-cards' : '')\n        }\n      >\n        <ul className=\"UserDirectoryList-users\">\n          {state.users.map((user) => {\n            return (\n              <li key={user.id()} data-id={user.id()}>\n                {UserDirectoryListItem.component({ user, params, useSmallCards })}\n              </li>\n            );\n          })}\n        </ul>\n        <div className=\"UserDirectoryList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n}\n","/**\n * The sort options.\n * We use a class and not just a POJO/function because we want extensions to be able to extend it\n */\nexport default class SortMap {\n  sortMap() {\n    return {\n      username_az: 'username',\n      username_za: '-username',\n      newest: '-joinedAt',\n      oldest: 'joinedAt',\n      most_discussions: '-discussionCount',\n      least_discussions: 'discussionCount',\n    };\n  }\n}\n","/**\n * Based on Flarum's DiscussionListState\n */\nimport SortMap from '../../common/utils/SortMap';\n\nexport default class UserDirectoryState {\n  constructor(params = {}, app = window.app) {\n    this.params = params;\n\n    this.app = app;\n\n    this.users = [];\n\n    this.moreResults = false;\n\n    this.loading = false;\n\n    this.qBuilder = {};\n  }\n\n  requestParams() {\n    const params = { include: [], filter: {} };\n\n    const sortKey = this.params.sort || app.forum.attribute('userDirectoryDefaultSort');\n\n    // sort might be set to null if no sort params has been passed\n    params.sort = this.sortMap()[sortKey];\n\n    if (this.params.q) {\n      params.filter.q = this.params.q;\n    }\n\n    return params;\n  }\n\n  sortMap() {\n    return {\n      default: '',\n      ...new SortMap().sortMap(),\n    };\n  }\n\n  getParams() {\n    return this.params;\n  }\n\n  clear() {\n    this.users = [];\n    m.redraw();\n  }\n\n  refreshParams(newParams) {\n    if (!this.hasUsers() || Object.keys(newParams).some((key) => this.getParams()[key] !== newParams[key])) {\n      const q = '';\n      this.params = newParams;\n\n      if (newParams.qBuilder) {\n        Object.assign(this.qBuilder, newParams.qBuilder || {});\n        this.params.q = Object.values(this.qBuilder).join(' ').trim();\n      }\n\n      if (!this.params.q && q) {\n        this.params.q = q;\n      }\n\n      this.refresh();\n    }\n  }\n\n  refresh() {\n    this.loading = true;\n\n    this.clear();\n\n    return this.loadResults().then(\n      (results) => {\n        this.users = [];\n        this.parseResults(results);\n      },\n      () => {\n        this.loading = false;\n        m.redraw();\n      }\n    );\n  }\n\n  loadResults(offset) {\n    const preloadedUsers = this.app.preloadedApiDocument();\n\n    if (preloadedUsers) {\n      return Promise.resolve(preloadedUsers);\n    }\n\n    const params = this.requestParams();\n    params.page = { offset };\n    params.include = params.include.join(',');\n\n    return this.app.store.find('users', params);\n  }\n\n  loadMore() {\n    this.loading = true;\n\n    this.loadResults(this.users.length).then(this.parseResults.bind(this));\n  }\n\n  parseResults(results) {\n    this.users.push(...results);\n\n    this.loading = false;\n    this.moreResults = !!results.payload.links && !!results.payload.links.next;\n\n    m.redraw();\n\n    return results;\n  }\n\n  hasUsers() {\n    return this.users.length > 0;\n  }\n\n  isLoading() {\n    return this.loading;\n  }\n\n  isSearchResults() {\n    return !!this.params.q;\n  }\n\n  empty() {\n    return !this.hasUsers() && !this.isLoading();\n  }\n}\n","import Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\n\nexport default class CheckableButton extends Button {\n  /**\n   * Get the template for the button's content.\n   *\n   * @return {*}\n   * @protected\n   */\n  getButtonContent(children) {\n    const prev = super.getButtonContent(children);\n\n    if (this.attrs.checked) prev.push(icon('fas fa-check', { className: 'Button-icon ButtonCheck' }));\n\n    return prev;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/KeyboardNavigatable'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/ItemList'];","/**\n * @abstract\n */\nexport default class AbstractType {\n  constructor() {\n    this.suggestions = [];\n    this.loading = false;\n  }\n\n  /**\n   * The `type` property of the Models used in suggestions and applied filters for this type\n   * @return {String}\n   */\n  resourceType() {\n    //\n  }\n\n  /**\n   * Executed when the search query changes\n   * The method should update this.suggestions with the new results\n   * If asynchronous loading is used, this.loading should be set to true during the process\n   * @param {String} query\n   */\n  search(query) {\n    //\n  }\n\n  /**\n   * Renders the \"kind\" label next to the value indicating what kind of information that result is\n   * Should probably just be a translated text\n   * @param {Model} resource\n   * @return {vnode}\n   */\n  renderKind(resource) {\n    //\n  }\n\n  /**\n   * Renders the Label containing the suggestion's value\n   * Should be a vdom template using the .UserDirectorySearchLabel class or similar\n   * @param {Model} resource\n   * @return {vnode}\n   */\n  renderLabel(resource) {\n    //\n  }\n\n  /**\n   * Applies a filter on a params object to use in the page request\n   * @param {Object} params Object. Might or might not contain a `q` property or `sort` property. In the future, `filters` object might be supported\n   * @param {Model} resource\n   */\n  applyFilter(params, resource) {\n    //\n  }\n\n  /**\n   * Used to populate the search field on page load with values from the querystring\n   * A promise must be returned, and the UI will auto-update once the promise returns\n   * @param {Object} params Object with a `q` and `sort` property. `filters` might be supported in the future\n   * @return {Promise<Model[]>}\n   */\n  initializeFromParams(params) {\n    //\n  }\n}\n","import app from 'flarum/forum/app';\nimport AbstractType from './AbstractType';\n\n/* global m */\n\nexport default class TextFilter extends AbstractType {\n  resourceType() {\n    return 'fof-user-directory-text';\n  }\n\n  search(query) {\n    if (!query) {\n      this.suggestions = [];\n      return;\n    }\n\n    this.suggestions = [\n      app.store.createRecord('fof-user-directory-text', {\n        attributes: {\n          text: query,\n        },\n      }),\n    ];\n  }\n\n  renderKind() {\n    return app.translator.trans('fof-user-directory.forum.search.kinds.text');\n  }\n\n  renderLabel(resource) {\n    return m('.UserDirectorySearchLabel', resource.text());\n  }\n\n  applyFilter(params, resource) {\n    params.q = params.q ? params.q + ' ' : '';\n    params.q += resource.text();\n  }\n\n  initializeFromParams(params) {\n    if (!params.q) {\n      return Promise.resolve([]);\n    }\n\n    return Promise.resolve(\n      params.q\n        .split(' ')\n        // Words with : are gambits and we will ignore them\n        .filter((word) => word.indexOf(':') === -1)\n        .map((word) =>\n          app.store.createRecord('fof-user-directory-text', {\n            attributes: {\n              text: word,\n            },\n          })\n        )\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Group'];","import app from 'flarum/forum/app';\nimport Group from 'flarum/common/models/Group';\nimport icon from 'flarum/common/helpers/icon';\nimport AbstractType from './AbstractType';\n\n/* global m */\n\nexport default class GroupFilter extends AbstractType {\n  resourceType() {\n    return 'groups';\n  }\n\n  search(query) {\n    this.suggestions = [];\n\n    if (!query) {\n      return;\n    }\n\n    query = query.toLowerCase();\n\n    app.store.all('groups').forEach((group) => {\n      // Do not allow Guest group as it wouldn't do anything\n      if (group.id() === Group.GUEST_ID) {\n        return;\n      }\n\n      if (group.nameSingular().toLowerCase().indexOf(query) !== -1 || group.namePlural().toLowerCase().indexOf(query) !== -1) {\n        this.suggestions.push(group);\n      }\n    });\n  }\n\n  renderKind() {\n    return app.translator.trans('fof-user-directory.forum.search.kinds.group');\n  }\n\n  renderLabel(group) {\n    return m(\n      '.UserDirectorySearchLabel',\n      group.color()\n        ? {\n            className: 'colored',\n            style: {\n              backgroundColor: group.color(),\n            },\n          }\n        : {},\n      [group.icon() ? [icon(group.icon()), ' '] : null, group.namePlural()]\n    );\n  }\n\n  applyFilter(params, group) {\n    params.q = params.q ? params.q + ' ' : '';\n    params.q += 'group:' + group.id();\n  }\n\n  initializeFromParams(params) {\n    if (!params.q) {\n      return Promise.resolve([]);\n    }\n\n    const qWithSpacesAround = ' ' + params.q + ' ';\n\n    const groups = [];\n\n    const queryGroups = qWithSpacesAround.split(' ').filter((q) => q.startsWith('group:'));\n\n    app.store.all('groups').forEach((group) => {\n      queryGroups.forEach((queryGroup) => {\n        const groupIds = queryGroup.replace('group:', '').split(',');\n        if (groupIds.includes(group.id())) {\n          groups.push(group);\n        }\n      });\n    });\n\n    return Promise.resolve(groups);\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport KeyboardNavigatable from 'flarum/common/utils/KeyboardNavigatable';\nimport ItemList from 'flarum/utils/ItemList';\nimport TextFilter from '../searchTypes/TextFilter';\nimport GroupFilter from '../searchTypes/GroupFilter';\n\nexport default class SearchField extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.searchIndex = 0;\n    this.navigator = new KeyboardNavigatable();\n    this.navigator\n      .when((event) => {\n        // Do not handle keyboard when TAB is pressed and there's nothing in field\n        // Without this it's impossible to TAB out of the field\n        return event.key !== 'Tab' || !!this.filter;\n      })\n      .onUp(() => {\n        if (this.searchIndex > 0) {\n          this.searchIndex--;\n          m.redraw();\n        }\n      })\n      .onDown(() => {\n        if (this.searchIndex < this.allSuggestions().length - 1) {\n          this.searchIndex++;\n          m.redraw();\n        }\n      })\n      .onSelect(() => {\n        if (this.filter) {\n          this.selectResult(this.allSuggestions()[this.searchIndex]);\n          m.redraw();\n        } else {\n          this.applyFiltering();\n        }\n      })\n      .onRemove(() => {\n        this.appliedFilters.pop();\n      });\n\n    this.availableFilters = this.filterTypes().toArray();\n    this.appliedFilters = [];\n\n    this.filter = '';\n    this.focused = false;\n\n    // When the page loads, initialize UI with filters from the parameters\n    this.availableFilters.forEach((filter) => {\n      filter\n        .initializeFromParams({\n          sort: m.route.param('sort'),\n          q: m.route.param('q'),\n        })\n        .then((resources) => {\n          this.appliedFilters.push(...resources);\n          m.redraw();\n        });\n    });\n  }\n\n  view() {\n    const suggestions = this.allSuggestions();\n\n    const loading = this.availableFilters.some((filter) => filter.loading);\n\n    return (\n      <div className=\"Form-group Usersearchbox\">\n        <label className={`UserDirectorySearchInput FormControl ${this.focused ? 'focus' : ''}`}>\n          <span className=\"UserDirectorySearchInput-selected\">\n            {this.appliedFilters.map((recipient, index) => (\n              <span\n                className=\"UserDirectorySearchInput-filter\"\n                onclick={() => {\n                  this.appliedFilters.splice(index, 1);\n                  this.applyFiltering();\n                }}\n                title={this.searchResultKind(recipient)}\n              >\n                {this.recipientLabel(recipient)}\n              </span>\n            ))}\n          </span>\n          <input\n            className=\"FormControl\"\n            placeholder={app.translator.trans('fof-user-directory.forum.search.field.placeholder')}\n            value={this.filter}\n            oninput={withAttr('value', (value) => {\n              this.filter = value;\n              this.performNewSearch();\n            })}\n            onkeydown={this.navigator.navigate.bind(this.navigator)}\n            onfocus={() => {\n              this.focused = true;\n            }}\n            onblur={() => {\n              this.focused = false;\n            }}\n          />\n          {loading && <LoadingIndicator />}\n          {!!suggestions.length && (\n            <ul className=\"Dropdown-menu\">\n              {suggestions.map((result, index) => (\n                <li\n                  className={this.searchIndex === index ? 'active' : ''}\n                  onclick={() => {\n                    this.selectResult(result);\n                    this.applyFiltering();\n                  }}\n                >\n                  <button type=\"button\">\n                    <span className=\"UserDirectorySearchKind\">{this.searchResultKind(result)}</span>\n                    {this.recipientLabel(result)}\n                  </button>\n                </li>\n              ))}\n            </ul>\n          )}\n        </label>\n      </div>\n    );\n  }\n\n  filterTypes() {\n    const items = new ItemList();\n\n    items.add('text', new TextFilter(), 10);\n    items.add('group', new GroupFilter(), 20);\n\n    return items;\n  }\n\n  filterForResource(resource) {\n    return this.availableFilters.find((f) => f.resourceType() === resource.data.type);\n  }\n\n  recipientLabel(resource) {\n    const filter = this.filterForResource(resource);\n\n    if (filter) {\n      return filter.renderLabel(resource);\n    }\n\n    return '[unknown]';\n  }\n\n  searchResultKind(resource) {\n    const filter = this.filterForResource(resource);\n\n    if (filter) {\n      return filter.renderKind(resource);\n    }\n\n    return '[unknown]';\n  }\n\n  selectResult(result) {\n    if (!result) {\n      return;\n    }\n\n    this.appliedFilters.push(result);\n    this.clearSuggestions();\n  }\n\n  clearSuggestions() {\n    this.filter = '';\n    this.availableFilters.forEach((filter) => {\n      filter.search('');\n    });\n  }\n\n  allSuggestions() {\n    return [].concat(...this.availableFilters.map((filter) => filter.suggestions));\n  }\n\n  performNewSearch() {\n    this.searchIndex = 0;\n\n    this.availableFilters.forEach((filter) => {\n      filter.search(this.filter);\n    });\n\n    this.attrs.state.refreshParams({ ...this.attrs.state.getParams(), qBuilder: this.qBuilder() });\n  }\n\n  qBuilder(params = {}) {\n    this.appliedFilters.forEach((resource) => {\n      const filter = this.filterForResource(resource);\n\n      if (filter) {\n        filter.applyFilter(params, resource);\n      } else {\n        console.warn('Cannot find filter class for resource', resource);\n      }\n    });\n    return { filter: `${this.filter} ${params.q || ''}` };\n  }\n\n  applyFiltering() {\n    const params = {\n      sort: m.route.param('sort'),\n    };\n\n    this.qBuilder(params);\n\n    m.route.set(app.route('fof_user_directory', params));\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Select from 'flarum/common/components/Select';\nimport Button from 'flarum/common/components/Button';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport extractText from 'flarum/common/utils/extractText';\nimport UserDirectoryList from './UserDirectoryList';\nimport UserDirectoryState from '../states/UserDirectoryState';\nimport CheckableButton from './CheckableButton';\nimport SearchField from './SearchField';\nimport Separator from 'flarum/common/components/Separator';\n\n/**\n * This page re-uses Flarum's IndexPage CSS classes\n */\nexport default class UserDirectoryPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.state = new UserDirectoryState({});\n    this.state.refreshParams(app.search.params());\n\n    this.bodyClass = 'User--directory';\n\n    let idSegments = [];\n    if (this.params().q) {\n      Array.from(this.params().q.matchAll(/group:([\\d,]+)/g)).forEach((match) => {\n        idSegments.push(match[1]);\n      });\n    }\n    this.enabledGroupFilters = idSegments\n      .join(',')\n      .split(',')\n      .filter((id) => id);\n\n    this.enabledSpecialGroupFilters = [];\n    if (app.initializers.has('flarum-suspend') && app.forum.attribute('hasSuspendPermission')) {\n      // If there is a special group filter int the params, enable it here\n      if (this.params()?.q?.includes('is:suspended')) {\n        this.enabledSpecialGroupFilters['flarum-suspend'] = 'is:suspended';\n      }\n    }\n\n    app.history.push('users', app.translator.trans('fof-user-directory.forum.header.back_to_user_directory_tooltip'));\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    app.setTitle(extractText(app.translator.trans('fof-user-directory.forum.page.nav')));\n  }\n\n  view() {\n    return (\n      <div className=\"IndexPage\">\n        {IndexPage.prototype.hero()}\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"IndexPage-nav sideNav\">\n              <ul>{listItems(this.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"IndexPage-results sideNavOffset\">\n              <div className=\"IndexPage-toolbar\">\n                <ul className=\"IndexPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\n                <ul className=\"IndexPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n              </div>\n              <UserDirectoryList state={this.state} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Our own sidebar. Re-uses Index.sidebarItems as the base\n   * Elements added here will only show up on the user directory page\n   *\n   * @return {ItemList}\n   */\n  sidebarItems() {\n    const items = IndexPage.prototype.sidebarItems();\n\n    items.setContent(\n      'nav',\n      SelectDropdown.component(\n        {\n          buttonClassName: 'Button',\n          className: 'App-titleControl',\n        },\n        this.navItems().toArray()\n      )\n    );\n\n    return items;\n  }\n\n  /**\n   * Our own sidebar navigation. Re-uses Index.navItems as the base\n   * Elements added here will only show up on the user directory page\n   *\n   * @return {ItemList}\n   */\n  navItems() {\n    const items = IndexPage.prototype.navItems();\n    const params = this.stickyParams();\n\n    items.add(\n      'fof-user-directory',\n      LinkButton.component(\n        {\n          href: app.route('fof_user_directory', params),\n          icon: 'far fa-address-book',\n        },\n        app.translator.trans('fof-user-directory.forum.page.nav')\n      ),\n      85\n    );\n\n    return items;\n  }\n\n  viewItems() {\n    const items = new ItemList();\n    const sortMap = this.state.sortMap();\n\n    const sortOptions = {};\n    for (const i in sortMap) {\n      sortOptions[i] = app.translator.trans('fof-user-directory.lib.sort.' + i);\n    }\n\n    items.add(\n      'sort',\n      Select.component({\n        options: sortOptions,\n        value: this.state.getParams().sort || app.forum.attribute('userDirectoryDefaultSort'),\n        onchange: this.changeParams.bind(this),\n      }),\n      100\n    );\n\n    items.add(\n      'filterGroups',\n      Dropdown.component(\n        {\n          caretIcon: 'fas fa-filter',\n          label: app.translator.trans('fof-user-directory.forum.page.filter_button'),\n          buttonClassName: 'FormControl',\n          className: 'GroupFilterDropdown',\n        },\n        this.groupItems().toArray()\n      ),\n      80\n    );\n\n    items.add(\n      'search',\n      SearchField.component({\n        state: this.state,\n      }),\n      60\n    );\n\n    return items;\n  }\n\n  groupItems() {\n    const items = new ItemList();\n\n    app.store\n      .all('groups')\n      .filter((group) => group.id() !== '2' && group.id() !== '3')\n      .forEach((group) => {\n        items.add(\n          group.namePlural(),\n          CheckableButton.component(\n            {\n              className: 'GroupFilterButton',\n              icon: group.icon(),\n              checked: this.enabledGroupFilters.includes(group.id()),\n              onclick: () => {\n                const id = group.id();\n                if (this.enabledGroupFilters.includes(id)) {\n                  this.enabledGroupFilters = this.enabledGroupFilters.filter((e) => e != id);\n                } else {\n                  this.enabledGroupFilters.push(id);\n                  // Empty the special group filters\n                  this.enabledSpecialGroupFilters = [];\n                }\n\n                this.changeParams(this.params().sort);\n              },\n            },\n            group.namePlural()\n          )\n        );\n      });\n\n    if (app.initializers.has('flarum-suspend') && app.forum.attribute('hasSuspendPermission')) {\n      items.add(\n        'suspend',\n        CheckableButton.component(\n          {\n            className: 'GroupFilterButton',\n            icon: 'fas fa-ban',\n            checked: this.enabledSpecialGroupFilters['flarum-suspend'] === 'is:suspended',\n            onclick: () => {\n              const id = 'flarum-suspend';\n              if (this.enabledSpecialGroupFilters[id] === 'is:suspended') {\n                this.enabledSpecialGroupFilters[id] = '';\n              } else {\n                this.enabledSpecialGroupFilters[id] = 'is:suspended';\n                // Empty the group filters\n                this.enabledGroupFilters = [];\n              }\n\n              this.changeParams(this.params().sort);\n            },\n          },\n          app.translator.trans('flarum-suspend.forum.user_badge.suspended_tooltip')\n        ),\n        90\n      );\n\n      items.add('seperator', Separator.component(), 50);\n    }\n\n    return items;\n  }\n\n  actionItems() {\n    const items = new ItemList();\n\n    items.add(\n      'refresh',\n      Button.component({\n        title: app.translator.trans('fof-user-directory.forum.page.refresh_tooltip'),\n        icon: 'fas fa-sync',\n        className: 'Button Button--icon',\n        onclick: () => {\n          this.state.refresh();\n          if (app.session.user) {\n            app.store.find('users', app.session.user.id());\n            m.redraw();\n          }\n        },\n      })\n    );\n\n    return items;\n  }\n\n  /**\n   * Redirect to the index page using the given sort parameter.\n   *\n   * @param {String} sort\n   */\n  changeParams(sort) {\n    const params = this.params();\n\n    if (sort === app.forum.attribute('userDirectoryDefaultSort')) {\n      delete params.sort;\n    } else {\n      params.sort = sort;\n    }\n\n    let moreQ = '';\n    for (const filter in this.enabledSpecialGroupFilters) {\n      moreQ += this.enabledSpecialGroupFilters[filter] + ' ';\n    }\n\n    if (this.enabledGroupFilters.length > 0) {\n      const groupsQ = this.enabledGroupFilters.reduce((prev, curr) => {\n        return `${prev}${prev ? ' ' : ''}group:${curr}`;\n      }, '');\n\n      params.qBuilder = { groups: groupsQ };\n    } else {\n      params.qBuilder = { groups: '', q: moreQ.trim() };\n    }\n\n    this.state.refreshParams(params);\n\n    const routeParams = { ...params };\n    delete routeParams.qBuilder;\n\n    m.route.set(app.route('fof_user_directory', routeParams));\n  }\n\n  stickyParams() {\n    return {\n      sort: m.route.param('sort'),\n      q: m.route.param('q'),\n    };\n  }\n\n  params() {\n    return this.stickyParams();\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport Group from 'flarum/common/models/Group';\n\nexport const linkGroupMentions = function () {\n  if (app.forum.attribute<boolean>('canSeeUserDirectoryLink') && app.forum.attribute<boolean>('userDirectoryLinkGroupMentions')) {\n    // @ts-ignore\n    this.$('.GroupMention').each(function () {\n      // @ts-ignore\n      if ($(this).hasClass('GroupMention--linked')) return;\n\n      // @ts-ignore\n      const name = $(this).find('.GroupMention-name').text();\n      const group = app.store.getBy<Group>('groups', 'namePlural', name.slice(1));\n\n      if (group) {\n        const link = $(`<a class=\"GroupMention-link\" href=\"${app.route('fof_user_directory', { q: `group:${group.id()}` })}\"></a>`);\n\n        link.on('click', function (e) {\n          // @ts-ignore\n          m.route.set(this.getAttribute('href'));\n          e.preventDefault();\n        });\n\n        // @ts-ignore\n        $(this).addClass('GroupMention--linked').wrap(link);\n      }\n    });\n  }\n};\n\nexport default function extendCommentPost() {\n  extend(CommentPost.prototype, 'oncreate', linkGroupMentions);\n  extend(CommentPost.prototype, 'onupdate', linkGroupMentions);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UsersSearchSource'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/textContrastClass'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport icon from 'flarum/common/helpers/icon';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport classList from 'flarum/common/utils/classList';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\n\nexport default class UserDirectoryHero extends Component {\n  view() {\n    const color = this.heroColor();\n\n    return (\n      <header\n        className={classList('Hero', 'UserDirectoryHero', { 'UserDirectoryHero--colored': color, [textContrastClass(color)]: color })}\n        style={color ? { '--hero-bg': color } : undefined}\n      >\n        <div className=\"container\">{this.viewItems().toArray()}</div>\n      </header>\n    );\n  }\n\n  viewItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('content', <div className=\"containerNarrow\">{this.contentItems().toArray()}</div>, 80);\n\n    return items;\n  }\n\n  contentItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'user-directory-title',\n      <h1 className=\"Hero-title\">\n        {icon(this.heroIcon())} {app.translator.trans('fof-user-directory.forum.hero.title')}\n      </h1>,\n      100\n    );\n\n    return items;\n  }\n\n  heroColor(): string | null {\n    // Example return a color string to display a colored hero\n    //return app.forum.attribute<string>('themeSecondaryColor');\n    return null;\n  }\n\n  heroIcon(): string {\n    return 'far fa-address-book';\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\n/**\n * Special model used only client-side to hold a free text search value in the search field\n */\nexport default class Text extends Model {\n  text = Model.attribute('text');\n}\n","import Extend from 'flarum/common/extenders';\nimport UserDirectoryPage from './components/UserDirectoryPage';\nimport Text from './models/Text';\n\nexport default [\n  new Extend.Routes() //\n    .add('fof_user_directory', '/users', UserDirectoryPage),\n\n  new Extend.Store() //\n    .add('fof-user-directory-text', Text),\n];\n","import CheckableButton from './CheckableButton';\nimport SearchField from './SearchField';\nimport SmallUserCard from './SmallUserCard';\nimport UserDirectoryList from './UserDirectoryList';\nimport UserDirectoryListItem from './UserDirectoryListItem';\nimport UserDirectoryPage from './UserDirectoryPage';\nimport UserDirectoryUserCard from './UserDirectoryUserCard';\n\nexport const components = {\n  CheckableButton,\n  SearchField,\n  SmallUserCard,\n  UserDirectoryList,\n  UserDirectoryListItem,\n  UserDirectoryPage,\n  UserDirectoryUserCard,\n};\n","import AbstractType from './AbstractType';\nimport GroupFilter from './GroupFilter';\nimport TextFilter from './TextFilter';\n\nexport const searchTypes = {\n  AbstractType,\n  GroupFilter,\n  TextFilter,\n};\n","import app from 'flarum/forum/app';\n\nimport UserDirectoryPage from './components/UserDirectoryPage';\nimport UserDirectoryList from './components/UserDirectoryList';\nimport UserDirectoryListItem from './components/UserDirectoryListItem';\nimport UserDirectoryState from './states/UserDirectoryState';\nimport SortMap from '../common/utils/SortMap';\nimport CheckableButton from './components/CheckableButton';\n\nimport extendCommentPost from './extenders/extendCommentPost';\nimport extendUsersSearchSource from './extenders/extendUsersSearchSource';\nimport extendIndexPage from './extenders/extendIndexPage';\n\nexport { default as extend } from './extend';\n\n// Allow other extensions to extend the page.\n// Removing this and using the usual export ./components will break integrations using these, so they must stay for now.\n// TODO: Remove in Flarum 2.0\nexport { UserDirectoryPage, UserDirectoryList, UserDirectoryListItem, UserDirectoryState, SortMap, CheckableButton };\n\napp.initializers.add('fof-user-directory', function () {\n  extendCommentPost();\n  extendUsersSearchSource();\n  extendIndexPage();\n});\n\nexport * from './components';\nexport * from './searchTypes';\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport UsersSearchSource from 'flarum/forum/components/UsersSearchSource';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nexport default function extendUsersSearchSource() {\n  extend(UsersSearchSource.prototype, 'view', function (view, query: string) {\n    if (!view || !app.forum.attribute<boolean>('canSeeUserDirectoryLink') || app.forum.attribute<boolean>('userDirectoryDisableGlobalSearchSource')) {\n      return;\n    }\n\n    query = query.toLowerCase();\n\n    view.splice(\n      1,\n      0,\n      <li>\n        <LinkButton className=\"Button Button--link\" href={app.route('fof_user_directory', { q: query })} icon=\"fas fa-search\">\n          {app.translator.trans('fof-user-directory.forum.search.users_heading', { query })}\n        </LinkButton>\n      </li>\n    );\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend, override } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport UserDirectoryHero from '../components/UserDirectoryHero';\n\nexport default function extendIndexPage() {\n  extend(IndexPage.prototype, 'navItems', (items) => {\n    if (app.forum.attribute<boolean>('canSeeUserDirectoryLink') && app.forum.attribute<boolean>('canSearchUsers')) {\n      items.add(\n        'fof-user-directory',\n        <LinkButton href={app.route('fof_user_directory')} icon=\"far fa-address-book\">\n          {app.translator.trans('fof-user-directory.forum.page.nav')}\n        </LinkButton>,\n        85\n      );\n    }\n  });\n\n  override(IndexPage.prototype, 'hero', function (original: any) {\n    if (app.current.get('routeName') === 'fof_user_directory') {\n      return <UserDirectoryHero />;\n    }\n\n    return original();\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_extends","assign","bind","n","e","arguments","length","t","r","apply","_setPrototypeOf","setPrototypeOf","__proto__","_inheritsLoose","create","constructor","SmallUserCard","_UserCard","infoItems","items","ItemList","user","this","attrs","add","app","translator","trans","ago","humanTime","joinTime","UserCard","UserDirectoryUserCard","has","setPriority","m","className","icon","count","discussionCount","commentCount","UserDirectoryListItem","_Component","view","vnode","_this$attrs","useSmallCards","attributes","controlsButtonClassName","component","Component","UserDirectoryList","loading","state","params","getParams","attribute","isLoading","LoadingIndicator","moreResults","Button","onclick","loadMore","empty","text","Placeholder","isSearchResults","users","map","id","SortMap","sortMap","username_az","username_za","newest","oldest","most_discussions","least_discussions","UserDirectoryState","window","qBuilder","_proto","requestParams","include","filter","sortKey","sort","forum","q","default","clear","redraw","refreshParams","newParams","_this","hasUsers","keys","some","values","join","trim","refresh","_this2","loadResults","then","results","parseResults","offset","preloadedUsers","preloadedApiDocument","Promise","resolve","page","store","find","_this$users","push","payload","links","next","CheckableButton","_Button","getButtonContent","children","prev","checked","AbstractType","suggestions","resourceType","search","query","renderKind","resource","renderLabel","applyFilter","initializeFromParams","TextFilter","_AbstractType","createRecord","split","word","indexOf","GroupFilter","toLowerCase","all","forEach","group","Group","nameSingular","namePlural","color","style","backgroundColor","qWithSpacesAround","groups","queryGroups","startsWith","queryGroup","replace","includes","SearchField","oninit","searchIndex","navigator","KeyboardNavigatable","when","event","onUp","onDown","allSuggestions","onSelect","selectResult","applyFiltering","onRemove","appliedFilters","pop","availableFilters","filterTypes","toArray","focused","route","param","resources","_this$appliedFilters","recipient","index","splice","title","searchResultKind","recipientLabel","placeholder","oninput","withAttr","performNewSearch","onkeydown","navigate","onfocus","onblur","result","type","filterForResource","f","data","clearSuggestions","_ref","concat","_this3","_this4","console","warn","set","UserDirectoryPage","_Page","bodyClass","_this$params","idSegments","Array","from","matchAll","match","enabledGroupFilters","enabledSpecialGroupFilters","oncreate","extractText","IndexPage","hero","listItems","sidebarItems","viewItems","actionItems","setContent","SelectDropdown","buttonClassName","navItems","stickyParams","LinkButton","href","sortOptions","i","Select","options","onchange","changeParams","Dropdown","caretIcon","label","groupItems","Separator","moreQ","groupsQ","reduce","curr","routeParams","Page","linkGroupMentions","$","each","hasClass","name","getBy","slice","link","on","getAttribute","preventDefault","addClass","wrap","UserDirectoryHero","_classList","heroColor","classList","textContrastClass","undefined","contentItems","heroIcon","Text","_Model","_len","args","_key","Model","Extend","components","searchTypes","extend","CommentPost","UsersSearchSource","override","original"],"sourceRoot":""}