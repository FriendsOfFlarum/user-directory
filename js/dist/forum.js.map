{"version":3,"sources":["webpack://@fof/user-directory/webpack/bootstrap","webpack://@fof/user-directory/external \"flarum.core.compat['common/app']\"","webpack://@fof/user-directory/./src/common/utils/SortMap.js","webpack://@fof/user-directory/external \"flarum.core.compat['common/components/Button']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/Component']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/components/IndexPage']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/helpers/listItems']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/extend']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/components/UsersSearchSource']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/components/Page']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/components/Select']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/components/SelectDropdown']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/components/Placeholder']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/components/UserCard']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/user-directory/external \"flarum.core.compat['common/components/Separator']\"","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryListItem.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryList.js","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/user-directory/./src/forum/states/UserDirectoryState.js","webpack://@fof/user-directory/./src/forum/components/CheckableButton.js","webpack://@fof/user-directory/./src/forum/components/SearchField.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryPage.js","webpack://@fof/user-directory/./src/forum/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","SortMap","sortMap","username_az","username_za","newest","oldest","most_discussions","least_discussions","_inheritsLoose","subClass","superClass","constructor","__proto__","UserDirectoryListItem","view","user","this","attrs","className","UserCard","component","controlsButtonClassName","Component","UserDirectoryList","loading","state","params","getParams","isLoading","LoadingIndicator","moreResults","Button","onclick","loadMore","app","translator","trans","empty","text","Placeholder","isSearchResults","users","map","id","data-id","_extends","assign","target","arguments","length","source","apply","UserDirectoryState","window","qBuilder","requestParams","include","filter","sortKey","sort","forum","attribute","q","default","clear","redraw","refreshParams","newParams","hasUsers","keys","some","values","join","trim","refresh","loadResults","then","results","parseResults","offset","preloadedUsers","preloadedApiDocument","Promise","resolve","page","store","find","push","payload","links","next","CheckableButton","getButtonContent","children","prev","checked","icon","SearchField","oninit","vnode","placeholder","oninput","withAttr","performNewSearch","UserDirectoryPage","search","bodyClass","idSegments","Array","from","matchAll","forEach","match","enabledGroupFilters","split","enabledSpecialGroupFilters","history","IndexPage","hero","listItems","sidebarItems","toArray","viewItems","actionItems","items","replace","SelectDropdown","buttonClassName","navItems","stickyParams","add","LinkButton","href","route","ItemList","sortOptions","Select","options","onchange","changeParams","Dropdown","caretIcon","label","groupItems","all","group","namePlural","includes","e","initializers","has","Separator","title","session","moreQ","groups","param","Page","routes","fof_user_directory","path","extend","UsersSearchSource","query","toLowerCase","splice"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","module.exports = flarum.core.compat['common/app'];","/**\n * The sort options.\n * We use a class and not just a POJO/function because we want extensions to be able to extend it\n */\nexport default class SortMap {\n    sortMap() {\n        return {\n            username_az: 'username',\n            username_za: '-username',\n            newest: '-joinedAt',\n            oldest: 'joinedAt',\n            most_discussions: '-discussionCount',\n            least_discussions: 'discussionCount',\n        };\n    }\n}\n","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/components/IndexPage'];","module.exports = flarum.core.compat['common/components/LinkButton'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['common/helpers/listItems'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/components/UsersSearchSource'];","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['common/components/Select'];","module.exports = flarum.core.compat['common/components/SelectDropdown'];","module.exports = flarum.core.compat['common/components/Dropdown'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/components/Placeholder'];","module.exports = flarum.core.compat['common/components/UserCard'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/utils/withAttr'];","module.exports = flarum.core.compat['common/components/Separator'];","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Component from 'flarum/common/Component';\nimport UserCard from 'flarum/common/components/UserCard';\n\nexport default class UserDirectoryListItem extends Component {\n    view() {\n        const { user } = this.attrs;\n\n        return (\n            <div className=\"User\">\n                {UserCard.component({\n                    user,\n                    className: 'UserCard--directory',\n                    controlsButtonClassName: 'Button Button--icon Button--flat',\n                })}\n            </div>\n        );\n    }\n}\n","import app from 'flarum/common/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport UserDirectoryListItem from './UserDirectoryListItem';\n\n/**\n * Based on Flarum's DiscussionList\n */\nexport default class UserDirectoryList extends Component {\n    view() {\n        const { state } = this.attrs;\n\n        const params = state.getParams();\n        let loading;\n\n        if (state.isLoading()) {\n            loading = LoadingIndicator.component();\n        } else if (state.moreResults) {\n            loading = Button.component(\n                {\n                    className: 'Button',\n                    onclick: state.loadMore.bind(state),\n                },\n                app.translator.trans('fof-user-directory.forum.page.load_more_button')\n            );\n        }\n\n        if (state.empty()) {\n            const text = app.translator.trans('fof-user-directory.forum.page.empty_text');\n            return <div className=\"DiscussionList\">{Placeholder.component({ text })}</div>;\n        }\n\n        return (\n            <div className={'UserDirectoryList' + (state.isSearchResults() ? ' UserDirectoryList--searchResults' : '')}>\n                <ul className=\"UserDirectoryList-users\">\n                    {state.users.map((user) => {\n                        return (\n                            <li key={user.id()} data-id={user.id()}>\n                                {UserDirectoryListItem.component({ user, params })}\n                            </li>\n                        );\n                    })}\n                </ul>\n                <div className=\"UserDirectoryList-loadMore\">{loading}</div>\n            </div>\n        );\n    }\n}\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","/**\n * Based on Flarum's DiscussionListState\n */\nimport SortMap from '../../common/utils/SortMap';\n\nexport default class UserDirectoryState {\n    constructor(params = {}, app = window.app) {\n        this.params = params;\n\n        this.app = app;\n\n        this.users = [];\n\n        this.moreResults = false;\n\n        this.loading = false;\n\n        this.qBuilder = {};\n    }\n\n    requestParams() {\n        const params = { include: [], filter: {} };\n\n        const sortKey = this.params.sort || app.forum.attribute('userDirectoryDefaultSort');\n\n        // sort might be set to null if no sort params has been passed\n        params.sort = this.sortMap()[sortKey];\n\n        if (this.params.q) {\n            params.filter.q = this.params.q;\n        }\n\n        return params;\n    }\n\n    sortMap() {\n        return {\n            default: '',\n            ...new SortMap().sortMap(),\n        };\n    }\n\n    getParams() {\n        return this.params;\n    }\n\n    clear() {\n        this.users = [];\n        m.redraw();\n    }\n\n    refreshParams(newParams) {\n        if (!this.hasUsers() || Object.keys(newParams).some((key) => this.getParams()[key] !== newParams[key])) {\n            this.params = newParams;\n            Object.assign(this.qBuilder, newParams.qBuilder || {});\n            this.params.q = Object.values(this.qBuilder).join(' ').trim();\n            this.refresh();\n        }\n    }\n\n    refresh() {\n        this.loading = true;\n\n        this.clear();\n\n        return this.loadResults().then(\n            (results) => {\n                this.users = [];\n                this.parseResults(results);\n            },\n            () => {\n                this.loading = false;\n                m.redraw();\n            }\n        );\n    }\n\n    loadResults(offset) {\n        const preloadedUsers = this.app.preloadedApiDocument();\n\n        if (preloadedUsers) {\n            return Promise.resolve(preloadedUsers);\n        }\n\n        const params = this.requestParams();\n        params.page = { offset };\n        params.include = params.include.join(',');\n\n        return this.app.store.find('users', params);\n    }\n\n    loadMore() {\n        this.loading = true;\n\n        this.loadResults(this.users.length).then(this.parseResults.bind(this));\n    }\n\n    parseResults(results) {\n        this.users.push(...results);\n\n        this.loading = false;\n        this.moreResults = !!results.payload.links && !!results.payload.links.next;\n\n        m.redraw();\n\n        return results;\n    }\n\n    hasUsers() {\n        return this.users.length > 0;\n    }\n\n    isLoading() {\n        return this.loading;\n    }\n\n    isSearchResults() {\n        return !!this.params.q;\n    }\n\n    empty() {\n        return !this.hasUsers() && !this.isLoading();\n    }\n}\n","import Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\n\nexport default class CheckableButton extends Button {\n    /**\n     * Get the template for the button's content.\n     *\n     * @return {*}\n     * @protected\n     */\n    getButtonContent(children) {\n        const prev = super.getButtonContent(children);\n\n        if (this.attrs.checked) prev.push(icon('fas fa-check', { className: 'Button-icon ButtonCheck' }));\n\n        return prev;\n    }\n}\n","import app from 'flarum/common/app';\nimport Component from 'flarum/common/Component';\nimport withAttr from 'flarum/common/utils/withAttr';\n\nexport default class SearchField extends Component {\n    oninit(vnode) {\n        super.oninit(vnode);\n    }\n\n    view() {\n        return (\n            <div className=\"Form-group Usersearchbox\">\n                <input\n                    className=\"FormControl\"\n                    placeholder={app.translator.trans('fof-user-directory.forum.search.field.placeholder')}\n                    value={this.filter}\n                    oninput={withAttr('value', (value) => {\n                        this.filter = value;\n                        this.performNewSearch();\n                    })}\n                />\n            </div>\n        );\n    }\n\n    performNewSearch() {\n        this.attrs.state.refreshParams({ ...this.attrs.state.getParams(), qBuilder: { filter: this.filter } });\n    }\n}\n","import app from 'flarum/common/app';\nimport Page from 'flarum/common/components/Page';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\nimport IndexPage from 'flarum/common/components/IndexPage';\nimport Select from 'flarum/common/components/Select';\nimport Button from 'flarum/common/components/Button';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport UserDirectoryList from './UserDirectoryList';\nimport UserDirectoryState from '../states/UserDirectoryState';\nimport CheckableButton from './CheckableButton';\nimport SearchField from './SearchField';\nimport Separator from 'flarum/common/components/Separator';\n\n/**\n * This page re-uses Flarum's IndexPage CSS classes\n */\nexport default class UserDirectoryPage extends Page {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.state = new UserDirectoryState({});\n        this.state.refreshParams(app.search.params());\n\n        this.bodyClass = 'User--directory';\n\n        let idSegments = [];\n        if (this.params().q) {\n            Array.from(this.params().q.matchAll(/group:([\\d,]+)/g)).forEach((match) => {\n                idSegments.push(match[1]);\n            });\n        }\n        this.enabledGroupFilters = idSegments\n            .join(',')\n            .split(',')\n            .filter((id) => id);\n\n        this.enabledSpecialGroupFilters = [];\n\n        app.history.push('users', app.translator.trans('fof-user-directory.forum.header.back_to_user_directory_tooltip'));\n    }\n\n    view() {\n        return (\n            <div className=\"IndexPage\">\n                {IndexPage.prototype.hero()}\n                <div className=\"container\">\n                    <div className=\"sideNavContainer\">\n                        <nav className=\"IndexPage-nav sideNav\">\n                            <ul>{listItems(this.sidebarItems().toArray())}</ul>\n                        </nav>\n                        <div className=\"IndexPage-results sideNavOffset\">\n                            <div className=\"IndexPage-toolbar\">\n                                <ul className=\"IndexPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\n                                <ul className=\"IndexPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n                            </div>\n                            <UserDirectoryList state={this.state} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    /**\n     * Our own sidebar. Re-uses Index.sidebarItems as the base\n     * Elements added here will only show up on the user directory page\n     *\n     * @return {ItemList}\n     */\n    sidebarItems() {\n        const items = IndexPage.prototype.sidebarItems();\n\n        items.replace(\n            'nav',\n            SelectDropdown.component(\n                {\n                    buttonClassName: 'Button',\n                    className: 'App-titleControl',\n                },\n                this.navItems().toArray()\n            )\n        );\n\n        return items;\n    }\n\n    /**\n     * Our own sidebar navigation. Re-uses Index.navItems as the base\n     * Elements added here will only show up on the user directory page\n     *\n     * @return {ItemList}\n     */\n    navItems() {\n        const items = IndexPage.prototype.navItems();\n        const params = this.stickyParams();\n\n        items.add(\n            'fof-user-directory',\n            LinkButton.component(\n                {\n                    href: app.route('fof_user_directory', params),\n                    icon: 'far fa-address-book',\n                },\n                app.translator.trans('fof-user-directory.forum.page.nav')\n            ),\n            85\n        );\n\n        return items;\n    }\n\n    viewItems() {\n        const items = new ItemList();\n        const sortMap = this.state.sortMap();\n\n        const sortOptions = {};\n        for (const i in sortMap) {\n            sortOptions[i] = app.translator.trans('fof-user-directory.lib.sort.' + i);\n        }\n\n        items.add(\n            'sort',\n            Select.component({\n                options: sortOptions,\n                value: this.params().sort || app.forum.attribute('userDirectoryDefaultSort'),\n                onchange: this.changeParams.bind(this),\n            })\n        );\n\n        items.add(\n            'filterGroups',\n            Dropdown.component(\n                {\n                    caretIcon: 'fas fa-filter',\n                    label: app.translator.trans('fof-user-directory.forum.page.filter_button'),\n                    buttonClassName: 'FormControl',\n                    className: 'GroupFilterDropdown',\n                },\n                this.groupItems().toArray()\n            )\n        );\n\n        items.add(\n            'search',\n            SearchField.component({\n                state: this.state,\n            })\n        );\n\n        return items;\n    }\n\n    groupItems() {\n        const items = new ItemList();\n\n        app.store\n            .all('groups')\n            .filter((group) => group.id() !== '2' && group.id() !== '3')\n            .forEach((group) => {\n                items.add(\n                    group.namePlural(),\n                    CheckableButton.component(\n                        {\n                            className: 'GroupFilterButton',\n                            icon: group.icon(),\n                            checked: this.enabledGroupFilters.includes(group.id()),\n                            onclick: () => {\n                                const id = group.id();\n                                if (this.enabledGroupFilters.includes(id)) {\n                                    this.enabledGroupFilters = this.enabledGroupFilters.filter((e) => e != id);\n                                } else {\n                                    this.enabledGroupFilters.push(id);\n                                }\n\n                                this.changeParams(this.params().sort);\n                            },\n                        },\n                        group.namePlural()\n                    )\n                );\n            });\n\n        if (app.initializers.has('flarum-suspend') && app.forum.attribute('hasSuspendPermission')) {\n            items.add(\n                'suspend',\n                CheckableButton.component(\n                    {\n                        className: 'GroupFilterButton',\n                        icon: 'fas fa-ban',\n                        checked: this.enabledSpecialGroupFilters['flarum-suspend'] === 'is:suspended',\n                        onclick: () => {\n                            const id = 'flarum-suspend';\n                            if (this.enabledSpecialGroupFilters[id] === 'is:suspended') {\n                                this.enabledSpecialGroupFilters[id] = '';\n                            } else {\n                                this.enabledSpecialGroupFilters[id] = 'is:suspended';\n                            }\n\n                            this.changeParams(this.params().sort);\n                        },\n                    },\n                    app.translator.trans('flarum-suspend.forum.user_badge.suspended_tooltip')\n                ),\n                90\n            );\n\n            items.add('seperator', Separator.component(), 50);\n        }\n\n        return items;\n    }\n\n    actionItems() {\n        const items = new ItemList();\n\n        items.add(\n            'refresh',\n            Button.component({\n                title: app.translator.trans('fof-user-directory.forum.page.refresh_tooltip'),\n                icon: 'fas fa-sync',\n                className: 'Button Button--icon',\n                onclick: () => {\n                    this.state.refresh();\n                    if (app.session.user) {\n                        app.store.find('users', app.session.user.id());\n                        m.redraw();\n                    }\n                },\n            })\n        );\n\n        return items;\n    }\n\n    /**\n     * Redirect to the index page using the given sort parameter.\n     *\n     * @param {String} sort\n     */\n    changeParams(sort) {\n        const params = this.params();\n\n        if (sort === app.forum.attribute('userDirectoryDefaultSort')) {\n            delete params.sort;\n        } else {\n            params.sort = sort;\n        }\n\n        let moreQ = '';\n        for (var filter in this.enabledSpecialGroupFilters) {\n            moreQ += this.enabledSpecialGroupFilters[filter] + ' ';\n        }\n\n        if (this.enabledGroupFilters.length > 0) {\n            params.qBuilder = { groups: 'group:' + this.enabledGroupFilters.join(',') };\n        } else {\n            params.qBuilder = { groups: '', q: moreQ.trim() };\n        }\n\n        this.state.refreshParams(params);\n    }\n\n    stickyParams() {\n        return {\n            sort: m.route.param('sort'),\n            q: m.route.param('q'),\n        };\n    }\n\n    params() {\n        return this.stickyParams();\n    }\n}\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/common/app';\nimport UsersSearchSource from 'flarum/common/components/UsersSearchSource';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport IndexPage from 'flarum/common/components/IndexPage';\nimport UserDirectoryPage from './components/UserDirectoryPage';\nimport UserDirectoryList from './components/UserDirectoryList';\nimport UserDirectoryListItem from './components/UserDirectoryListItem';\nimport UserDirectoryState from './states/UserDirectoryState';\nimport SortMap from '../common/utils/SortMap';\nimport CheckableButton from './components/CheckableButton';\n\n// Allow other extensions to extend the page\nexport { UserDirectoryPage, UserDirectoryList, UserDirectoryListItem, UserDirectoryState, SortMap, CheckableButton };\n\napp.initializers.add('fof-user-directory', (app) => {\n    app.routes.fof_user_directory = {\n        path: '/users',\n        component: UserDirectoryPage,\n    };\n\n    extend(UsersSearchSource.prototype, 'view', function (view, query) {\n        if (!view) {\n            return;\n        }\n\n        query = query.toLowerCase();\n\n        view.splice(\n            1,\n            0,\n            m(\n                'li',\n                LinkButton.component(\n                    {\n                        href: app.route('fof_user_directory', { q: query }),\n                        icon: 'fas fa-search',\n                    },\n                    app.translator.trans('fof-user-directory.forum.search.users_heading', { query })\n                )\n            )\n        );\n    });\n\n    extend(IndexPage.prototype, 'navItems', (items) => {\n        if (app.forum.attribute('canSeeUserDirectoryLink')) {\n            items.add(\n                'fof-user-directory',\n                LinkButton.component(\n                    {\n                        href: app.route('fof_user_directory'),\n                        icon: 'far fa-address-book',\n                    },\n                    app.translator.trans('fof-user-directory.forum.page.nav')\n                ),\n                85\n            );\n        }\n    });\n});\n"],"sourceRoot":""}