{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/user-directory/webpack/bootstrap","webpack://@fof/user-directory/webpack/runtime/compat get default export","webpack://@fof/user-directory/webpack/runtime/define property getters","webpack://@fof/user-directory/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/user-directory/webpack/runtime/make namespace object","webpack://@fof/user-directory/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/UsersSearchSource']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/IndexPage']\"","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/user-directory/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Page']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/SelectDropdown']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['forum/components/UserCard']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/humanTime']\"","webpack://@fof/user-directory/./src/forum/components/SmallUserCard.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryListItem.js","webpack://@fof/user-directory/./src/forum/components/UserDirectoryList.js","webpack://@fof/user-directory/./src/common/utils/SortMap.js","webpack://@fof/user-directory/./src/forum/states/UserDirectoryState.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/user-directory/./src/forum/components/CheckableButton.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['common/utils/KeyboardNavigatable']\"","webpack://@fof/user-directory/external root \"flarum.core.compat['utils/ItemList']\"","webpack://@fof/user-directory/./src/forum/searchTypes/AbstractType.js","webpack://@fof/user-directory/./src/forum/searchTypes/TextFilter.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/models/Group']\"","webpack://@fof/user-directory/./src/forum/searchTypes/GroupFilter.js","webpack://@fof/user-directory/./src/forum/components/SearchField.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@fof/user-directory/./src/forum/components/UserDirectoryPage.js","webpack://@fof/user-directory/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/user-directory/./src/forum/models/Text.ts","webpack://@fof/user-directory/./src/forum/components/index.js","webpack://@fof/user-directory/./src/forum/searchTypes/index.js","webpack://@fof/user-directory/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/UsersSearchSource'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/IndexPage'];","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/SelectDropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Placeholder'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserCard'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/humanTime'];","import UserCard from 'flarum/forum/components/UserCard';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport humanTime from 'flarum/common/utils/humanTime';\n\nexport default class SmallUserCard extends UserCard {\n  //Overriding infoItems so that other extensions can separately add items to small cards\n  infoItems() {\n    const items = new ItemList();\n    const user = this.attrs.user;\n\n    items.add('joined', app.translator.trans('core.forum.user.joined_date_text', { ago: humanTime(user.joinTime()) }));\n\n    return items;\n  }\n}\n","import Component from 'flarum/common/Component';\nimport UserCard from 'flarum/forum/components/UserCard';\nimport SmallUserCard from './SmallUserCard';\n\nexport default class UserDirectoryListItem extends Component {\n  view(vnode) {\n    const { user, useSmallCards } = this.attrs;\n\n    const attributes = {\n      user,\n      className: `UserCard--directory${useSmallCards ? ' UserCard--small' : ''}`,\n      controlsButtonClassName: 'Button Button--icon Button--flat',\n    };\n\n    return <div className=\"User\">{useSmallCards ? SmallUserCard.component(attributes) : UserCard.component(attributes)}</div>;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport UserDirectoryListItem from './UserDirectoryListItem';\n\n/**\n * Based on Flarum's DiscussionList\n */\nexport default class UserDirectoryList extends Component {\n  view() {\n    const { state } = this.attrs;\n\n    const params = state.getParams();\n    const useSmallCards = app.forum.attribute('userDirectorySmallCards');\n    let loading;\n\n    if (state.isLoading()) {\n      loading = LoadingIndicator.component();\n    } else if (state.moreResults) {\n      loading = Button.component(\n        {\n          className: 'Button',\n          onclick: state.loadMore.bind(state),\n        },\n        app.translator.trans('fof-user-directory.forum.page.load_more_button')\n      );\n    }\n\n    if (state.empty()) {\n      const text = app.translator.trans('fof-user-directory.forum.page.empty_text');\n      return <div className=\"DiscussionList\">{Placeholder.component({ text })}</div>;\n    }\n\n    return (\n      <div\n        className={\n          'UserDirectoryList' +\n          (state.isSearchResults() ? ' UserDirectoryList--searchResults' : '') +\n          (useSmallCards ? ' UserDirectoryList--small-cards' : '')\n        }\n      >\n        <ul className=\"UserDirectoryList-users\">\n          {state.users.map((user) => {\n            return (\n              <li key={user.id()} data-id={user.id()}>\n                {UserDirectoryListItem.component({ user, params, useSmallCards })}\n              </li>\n            );\n          })}\n        </ul>\n        <div className=\"UserDirectoryList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n}\n","/**\n * The sort options.\n * We use a class and not just a POJO/function because we want extensions to be able to extend it\n */\nexport default class SortMap {\n  sortMap() {\n    return {\n      username_az: 'username',\n      username_za: '-username',\n      newest: '-joinedAt',\n      oldest: 'joinedAt',\n      most_discussions: '-discussionCount',\n      least_discussions: 'discussionCount',\n    };\n  }\n}\n","/**\n * Based on Flarum's DiscussionListState\n */\nimport SortMap from '../../common/utils/SortMap';\n\nexport default class UserDirectoryState {\n  constructor(params = {}, app = window.app) {\n    this.params = params;\n\n    this.app = app;\n\n    this.users = [];\n\n    this.moreResults = false;\n\n    this.loading = false;\n\n    this.qBuilder = {};\n  }\n\n  requestParams() {\n    const params = { include: [], filter: {} };\n\n    const sortKey = this.params.sort || app.forum.attribute('userDirectoryDefaultSort');\n\n    // sort might be set to null if no sort params has been passed\n    params.sort = this.sortMap()[sortKey];\n\n    if (this.params.q) {\n      params.filter.q = this.params.q;\n    }\n\n    return params;\n  }\n\n  sortMap() {\n    return {\n      default: '',\n      ...new SortMap().sortMap(),\n    };\n  }\n\n  getParams() {\n    return this.params;\n  }\n\n  clear() {\n    this.users = [];\n    m.redraw();\n  }\n\n  refreshParams(newParams) {\n    if (!this.hasUsers() || Object.keys(newParams).some((key) => this.getParams()[key] !== newParams[key])) {\n      const q = '';\n      this.params = newParams;\n\n      if (newParams.qBuilder) {\n        Object.assign(this.qBuilder, newParams.qBuilder || {});\n        this.params.q = Object.values(this.qBuilder).join(' ').trim();\n      }\n\n      if (!this.params.q && q) {\n        this.params.q = q;\n      }\n\n      this.refresh();\n    }\n  }\n\n  refresh() {\n    this.loading = true;\n\n    this.clear();\n\n    return this.loadResults().then(\n      (results) => {\n        this.users = [];\n        this.parseResults(results);\n      },\n      () => {\n        this.loading = false;\n        m.redraw();\n      }\n    );\n  }\n\n  loadResults(offset) {\n    const preloadedUsers = this.app.preloadedApiDocument();\n\n    if (preloadedUsers) {\n      return Promise.resolve(preloadedUsers);\n    }\n\n    const params = this.requestParams();\n    params.page = { offset };\n    params.include = params.include.join(',');\n\n    return this.app.store.find('users', params);\n  }\n\n  loadMore() {\n    this.loading = true;\n\n    this.loadResults(this.users.length).then(this.parseResults.bind(this));\n  }\n\n  parseResults(results) {\n    this.users.push(...results);\n\n    this.loading = false;\n    this.moreResults = !!results.payload.links && !!results.payload.links.next;\n\n    m.redraw();\n\n    return results;\n  }\n\n  hasUsers() {\n    return this.users.length > 0;\n  }\n\n  isLoading() {\n    return this.loading;\n  }\n\n  isSearchResults() {\n    return !!this.params.q;\n  }\n\n  empty() {\n    return !this.hasUsers() && !this.isLoading();\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\n\nexport default class CheckableButton extends Button {\n  /**\n   * Get the template for the button's content.\n   *\n   * @return {*}\n   * @protected\n   */\n  getButtonContent(children) {\n    const prev = super.getButtonContent(children);\n\n    if (this.attrs.checked) prev.push(icon('fas fa-check', { className: 'Button-icon ButtonCheck' }));\n\n    return prev;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/KeyboardNavigatable'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/ItemList'];","/**\n * @abstract\n */\nexport default class AbstractType {\n  constructor() {\n    this.suggestions = [];\n    this.loading = false;\n  }\n\n  /**\n   * The `type` property of the Models used in suggestions and applied filters for this type\n   * @return {String}\n   */\n  resourceType() {\n    //\n  }\n\n  /**\n   * Executed when the search query changes\n   * The method should update this.suggestions with the new results\n   * If asynchronous loading is used, this.loading should be set to true during the process\n   * @param {String} query\n   */\n  search(query) {\n    //\n  }\n\n  /**\n   * Renders the \"kind\" label next to the value indicating what kind of information that result is\n   * Should probably just be a translated text\n   * @param {Model} resource\n   * @return {vnode}\n   */\n  renderKind(resource) {\n    //\n  }\n\n  /**\n   * Renders the Label containing the suggestion's value\n   * Should be a vdom template using the .UserDirectorySearchLabel class or similar\n   * @param {Model} resource\n   * @return {vnode}\n   */\n  renderLabel(resource) {\n    //\n  }\n\n  /**\n   * Applies a filter on a params object to use in the page request\n   * @param {Object} params Object. Might or might not contain a `q` property or `sort` property. In the future, `filters` object might be supported\n   * @param {Model} resource\n   */\n  applyFilter(params, resource) {\n    //\n  }\n\n  /**\n   * Used to populate the search field on page load with values from the querystring\n   * A promise must be returned, and the UI will auto-update once the promise returns\n   * @param {Object} params Object with a `q` and `sort` property. `filters` might be supported in the future\n   * @return {Promise<Model[]>}\n   */\n  initializeFromParams(params) {\n    //\n  }\n}\n","import app from 'flarum/forum/app';\nimport AbstractType from './AbstractType';\n\n/* global m */\n\nexport default class TextFilter extends AbstractType {\n  resourceType() {\n    return 'fof-user-directory-text';\n  }\n\n  search(query) {\n    if (!query) {\n      this.suggestions = [];\n      return;\n    }\n\n    this.suggestions = [\n      app.store.createRecord('fof-user-directory-text', {\n        attributes: {\n          text: query,\n        },\n      }),\n    ];\n  }\n\n  renderKind() {\n    return app.translator.trans('fof-user-directory.forum.search.kinds.text');\n  }\n\n  renderLabel(resource) {\n    return m('.UserDirectorySearchLabel', resource.text());\n  }\n\n  applyFilter(params, resource) {\n    params.q = params.q ? params.q + ' ' : '';\n    params.q += resource.text();\n  }\n\n  initializeFromParams(params) {\n    if (!params.q) {\n      return Promise.resolve([]);\n    }\n\n    return Promise.resolve(\n      params.q\n        .split(' ')\n        // Words with : are gambits and we will ignore them\n        .filter((word) => word.indexOf(':') === -1)\n        .map((word) =>\n          app.store.createRecord('fof-user-directory-text', {\n            attributes: {\n              text: word,\n            },\n          })\n        )\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Group'];","import app from 'flarum/forum/app';\nimport Group from 'flarum/common/models/Group';\nimport icon from 'flarum/common/helpers/icon';\nimport AbstractType from './AbstractType';\n\n/* global m */\n\nexport default class GroupFilter extends AbstractType {\n  resourceType() {\n    return 'groups';\n  }\n\n  search(query) {\n    this.suggestions = [];\n\n    if (!query) {\n      return;\n    }\n\n    query = query.toLowerCase();\n\n    app.store.all('groups').forEach((group) => {\n      // Do not allow Guest group as it wouldn't do anything\n      if (group.id() === Group.GUEST_ID) {\n        return;\n      }\n\n      if (group.nameSingular().toLowerCase().indexOf(query) !== -1 || group.namePlural().toLowerCase().indexOf(query) !== -1) {\n        this.suggestions.push(group);\n      }\n    });\n  }\n\n  renderKind() {\n    return app.translator.trans('fof-user-directory.forum.search.kinds.group');\n  }\n\n  renderLabel(group) {\n    return m(\n      '.UserDirectorySearchLabel',\n      group.color()\n        ? {\n            className: 'colored',\n            style: {\n              backgroundColor: group.color(),\n            },\n          }\n        : {},\n      [group.icon() ? [icon(group.icon()), ' '] : null, group.namePlural()]\n    );\n  }\n\n  applyFilter(params, group) {\n    params.q = params.q ? params.q + ' ' : '';\n    params.q += 'group:' + group.id();\n  }\n\n  initializeFromParams(params) {\n    if (!params.q) {\n      return Promise.resolve([]);\n    }\n\n    const qWithSpacesAround = ' ' + params.q + ' ';\n\n    const groups = [];\n\n    app.store.all('groups').forEach((group) => {\n      if (qWithSpacesAround.indexOf('group:' + group.id()) !== -1) {\n        groups.push(group);\n      }\n    });\n\n    return Promise.resolve(groups);\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport KeyboardNavigatable from 'flarum/common/utils/KeyboardNavigatable';\nimport ItemList from 'flarum/utils/ItemList';\nimport TextFilter from '../searchTypes/TextFilter';\nimport GroupFilter from '../searchTypes/GroupFilter';\n\nexport default class SearchField extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.searchIndex = 0;\n    this.navigator = new KeyboardNavigatable();\n    this.navigator\n      .when((event) => {\n        // Do not handle keyboard when TAB is pressed and there's nothing in field\n        // Without this it's impossible to TAB out of the field\n        return event.key !== 'Tab' || !!this.filter;\n      })\n      .onUp(() => {\n        if (this.searchIndex > 0) {\n          this.searchIndex--;\n          m.redraw();\n        }\n      })\n      .onDown(() => {\n        if (this.searchIndex < this.allSuggestions().length - 1) {\n          this.searchIndex++;\n          m.redraw();\n        }\n      })\n      .onSelect(() => {\n        if (this.filter) {\n          this.selectResult(this.allSuggestions()[this.searchIndex]);\n          m.redraw();\n        } else {\n          this.applyFiltering();\n        }\n      })\n      .onRemove(() => {\n        this.appliedFilters.pop();\n      });\n\n    this.availableFilters = this.filterTypes().toArray();\n    this.appliedFilters = [];\n\n    this.filter = '';\n    this.focused = false;\n\n    // When the page loads, initialize UI with filters from the parameters\n    this.availableFilters.forEach((filter) => {\n      filter\n        .initializeFromParams({\n          sort: m.route.param('sort'),\n          q: m.route.param('q'),\n        })\n        .then((resources) => {\n          this.appliedFilters.push(...resources);\n          m.redraw();\n        });\n    });\n  }\n\n  view() {\n    const suggestions = this.allSuggestions();\n\n    const loading = this.availableFilters.some((filter) => filter.loading);\n\n    return (\n      <div className=\"Form-group Usersearchbox\">\n        <div className={`UserDirectorySearchInput FormControl ${this.focused ? 'focus' : ''}`}>\n          <span className=\"UserDirectorySearchInput-selected\">\n            {this.appliedFilters.map((recipient, index) => (\n              <span\n                className=\"UserDirectorySearchInput-filter\"\n                onclick={() => {\n                  this.appliedFilters.splice(index, 1);\n                  this.applyFiltering();\n                }}\n                title={this.searchResultKind(recipient)}\n              >\n                {this.recipientLabel(recipient)}\n              </span>\n            ))}\n          </span>\n          <input\n            className=\"FormControl\"\n            placeholder={app.translator.trans('fof-user-directory.forum.search.field.placeholder')}\n            value={this.filter}\n            oninput={withAttr('value', (value) => {\n              this.filter = value;\n              this.performNewSearch();\n            })}\n            onkeydown={this.navigator.navigate.bind(this.navigator)}\n            onfocus={() => {\n              this.focused = true;\n            }}\n            onblur={() => {\n              this.focused = false;\n            }}\n          />\n          {loading && <LoadingIndicator />}\n          {!!suggestions.length && (\n            <ul className=\"Dropdown-menu\">\n              {suggestions.map((result, index) => (\n                <li\n                  className={this.searchIndex === index ? 'active' : ''}\n                  onclick={() => {\n                    this.selectResult(result);\n                    this.applyFiltering();\n                  }}\n                >\n                  <button type=\"button\">\n                    <span className=\"UserDirectorySearchKind\">{this.searchResultKind(result)}</span>\n                    {this.recipientLabel(result)}\n                  </button>\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  filterTypes() {\n    const items = new ItemList();\n\n    items.add('text', new TextFilter(), 10);\n    items.add('group', new GroupFilter(), 20);\n\n    return items;\n  }\n\n  filterForResource(resource) {\n    return this.availableFilters.find((f) => f.resourceType() === resource.data.type);\n  }\n\n  recipientLabel(resource) {\n    const filter = this.filterForResource(resource);\n\n    if (filter) {\n      return filter.renderLabel(resource);\n    }\n\n    return '[unknown]';\n  }\n\n  searchResultKind(resource) {\n    const filter = this.filterForResource(resource);\n\n    if (filter) {\n      return filter.renderKind(resource);\n    }\n\n    return '[unknown]';\n  }\n\n  selectResult(result) {\n    if (!result) {\n      return;\n    }\n\n    this.appliedFilters.push(result);\n    this.clearSuggestions();\n  }\n\n  clearSuggestions() {\n    this.filter = '';\n    this.availableFilters.forEach((filter) => {\n      filter.search('');\n    });\n  }\n\n  allSuggestions() {\n    return [].concat(...this.availableFilters.map((filter) => filter.suggestions));\n  }\n\n  performNewSearch() {\n    this.searchIndex = 0;\n\n    this.availableFilters.forEach((filter) => {\n      filter.search(this.filter);\n    });\n\n    this.attrs.state.refreshParams({ ...this.attrs.state.getParams(), qBuilder: this.qBuilder() });\n  }\n\n  qBuilder(params = {}) {\n    this.appliedFilters.forEach((resource) => {\n      const filter = this.filterForResource(resource);\n\n      if (filter) {\n        filter.applyFilter(params, resource);\n      } else {\n        console.warn('Cannot find filter class for resource', resource);\n      }\n    });\n    return { filter: `${this.filter} ${params.q || ''}` };\n  }\n\n  applyFiltering() {\n    const params = {\n      sort: m.route.param('sort'),\n    };\n\n    this.qBuilder(params);\n\n    m.route.set(app.route('fof_user_directory', params));\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Select from 'flarum/common/components/Select';\nimport Button from 'flarum/common/components/Button';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport UserDirectoryList from './UserDirectoryList';\nimport UserDirectoryState from '../states/UserDirectoryState';\nimport CheckableButton from './CheckableButton';\nimport SearchField from './SearchField';\nimport Separator from 'flarum/common/components/Separator';\n\n/**\n * This page re-uses Flarum's IndexPage CSS classes\n */\nexport default class UserDirectoryPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.state = new UserDirectoryState({});\n    this.state.refreshParams(app.search.params());\n\n    this.bodyClass = 'User--directory';\n\n    let idSegments = [];\n    if (this.params().q) {\n      Array.from(this.params().q.matchAll(/group:([\\d,]+)/g)).forEach((match) => {\n        idSegments.push(match[1]);\n      });\n    }\n    this.enabledGroupFilters = idSegments\n      .join(',')\n      .split(',')\n      .filter((id) => id);\n\n    this.enabledSpecialGroupFilters = [];\n    if (app.initializers.has('flarum-suspend') && app.forum.attribute('hasSuspendPermission')) {\n      // If there is a special group filter int the params, enable it here\n      if (this.params()?.q?.includes('is:suspended')) {\n        this.enabledSpecialGroupFilters['flarum-suspend'] = 'is:suspended';\n      }\n    }\n\n    app.history.push('users', app.translator.trans('fof-user-directory.forum.header.back_to_user_directory_tooltip'));\n  }\n\n  view() {\n    return (\n      <div className=\"IndexPage\">\n        {IndexPage.prototype.hero()}\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"IndexPage-nav sideNav\">\n              <ul>{listItems(this.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"IndexPage-results sideNavOffset\">\n              <div className=\"IndexPage-toolbar\">\n                <ul className=\"IndexPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\n                <ul className=\"IndexPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n              </div>\n              <UserDirectoryList state={this.state} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Our own sidebar. Re-uses Index.sidebarItems as the base\n   * Elements added here will only show up on the user directory page\n   *\n   * @return {ItemList}\n   */\n  sidebarItems() {\n    const items = IndexPage.prototype.sidebarItems();\n\n    items.replace(\n      'nav',\n      SelectDropdown.component(\n        {\n          buttonClassName: 'Button',\n          className: 'App-titleControl',\n        },\n        this.navItems().toArray()\n      )\n    );\n\n    return items;\n  }\n\n  /**\n   * Our own sidebar navigation. Re-uses Index.navItems as the base\n   * Elements added here will only show up on the user directory page\n   *\n   * @return {ItemList}\n   */\n  navItems() {\n    const items = IndexPage.prototype.navItems();\n    const params = this.stickyParams();\n\n    items.add(\n      'fof-user-directory',\n      LinkButton.component(\n        {\n          href: app.route('fof_user_directory', params),\n          icon: 'far fa-address-book',\n        },\n        app.translator.trans('fof-user-directory.forum.page.nav')\n      ),\n      85\n    );\n\n    return items;\n  }\n\n  viewItems() {\n    const items = new ItemList();\n    const sortMap = this.state.sortMap();\n\n    const sortOptions = {};\n    for (const i in sortMap) {\n      sortOptions[i] = app.translator.trans('fof-user-directory.lib.sort.' + i);\n    }\n\n    items.add(\n      'sort',\n      Select.component({\n        options: sortOptions,\n        value: this.state.getParams().sort || app.forum.attribute('userDirectoryDefaultSort'),\n        onchange: this.changeParams.bind(this),\n      })\n    );\n\n    items.add(\n      'filterGroups',\n      Dropdown.component(\n        {\n          caretIcon: 'fas fa-filter',\n          label: app.translator.trans('fof-user-directory.forum.page.filter_button'),\n          buttonClassName: 'FormControl',\n          className: 'GroupFilterDropdown',\n        },\n        this.groupItems().toArray()\n      )\n    );\n\n    items.add(\n      'search',\n      SearchField.component({\n        state: this.state,\n      })\n    );\n\n    return items;\n  }\n\n  groupItems() {\n    const items = new ItemList();\n\n    app.store\n      .all('groups')\n      .filter((group) => group.id() !== '2' && group.id() !== '3')\n      .forEach((group) => {\n        items.add(\n          group.namePlural(),\n          CheckableButton.component(\n            {\n              className: 'GroupFilterButton',\n              icon: group.icon(),\n              checked: this.enabledGroupFilters.includes(group.id()),\n              onclick: () => {\n                const id = group.id();\n                if (this.enabledGroupFilters.includes(id)) {\n                  this.enabledGroupFilters = this.enabledGroupFilters.filter((e) => e != id);\n                } else {\n                  this.enabledGroupFilters.push(id);\n                  // Empty the special group filters\n                  this.enabledSpecialGroupFilters = [];\n                }\n\n                this.changeParams(this.params().sort);\n              },\n            },\n            group.namePlural()\n          )\n        );\n      });\n\n    if (app.initializers.has('flarum-suspend') && app.forum.attribute('hasSuspendPermission')) {\n      items.add(\n        'suspend',\n        CheckableButton.component(\n          {\n            className: 'GroupFilterButton',\n            icon: 'fas fa-ban',\n            checked: this.enabledSpecialGroupFilters['flarum-suspend'] === 'is:suspended',\n            onclick: () => {\n              const id = 'flarum-suspend';\n              if (this.enabledSpecialGroupFilters[id] === 'is:suspended') {\n                this.enabledSpecialGroupFilters[id] = '';\n              } else {\n                this.enabledSpecialGroupFilters[id] = 'is:suspended';\n                // Empty the group filters\n                this.enabledGroupFilters = [];\n              }\n\n              this.changeParams(this.params().sort);\n            },\n          },\n          app.translator.trans('flarum-suspend.forum.user_badge.suspended_tooltip')\n        ),\n        90\n      );\n\n      items.add('seperator', Separator.component(), 50);\n    }\n\n    return items;\n  }\n\n  actionItems() {\n    const items = new ItemList();\n\n    items.add(\n      'refresh',\n      Button.component({\n        title: app.translator.trans('fof-user-directory.forum.page.refresh_tooltip'),\n        icon: 'fas fa-sync',\n        className: 'Button Button--icon',\n        onclick: () => {\n          this.state.refresh();\n          if (app.session.user) {\n            app.store.find('users', app.session.user.id());\n            m.redraw();\n          }\n        },\n      })\n    );\n\n    return items;\n  }\n\n  /**\n   * Redirect to the index page using the given sort parameter.\n   *\n   * @param {String} sort\n   */\n  changeParams(sort) {\n    const params = this.params();\n\n    if (sort === app.forum.attribute('userDirectoryDefaultSort')) {\n      delete params.sort;\n    } else {\n      params.sort = sort;\n    }\n\n    let moreQ = '';\n    for (const filter in this.enabledSpecialGroupFilters) {\n      moreQ += this.enabledSpecialGroupFilters[filter] + ' ';\n    }\n\n    if (this.enabledGroupFilters.length > 0) {\n      const groupsQ = this.enabledGroupFilters.reduce((prev, curr) => {\n        return `${prev}${prev ? ' ' : ''}group:${curr}`;\n      }, '');\n\n      params.qBuilder = { groups: groupsQ };\n    } else {\n      params.qBuilder = { groups: '', q: moreQ.trim() };\n    }\n\n    this.state.refreshParams(params);\n\n    const routeParams = { ...params };\n    delete routeParams.qBuilder;\n\n    m.route.set(app.route('fof_user_directory', routeParams));\n  }\n\n  stickyParams() {\n    return {\n      sort: m.route.param('sort'),\n      q: m.route.param('q'),\n    };\n  }\n\n  params() {\n    return this.stickyParams();\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\n/**\n * Special model used only client-side to hold a free text search value in the search field\n */\nexport default class Text extends Model {\n  text = Model.attribute('text');\n}\n","import CheckableButton from './CheckableButton';\nimport SearchField from './SearchField';\nimport SmallUserCard from './SmallUserCard';\nimport UserDirectoryList from './UserDirectoryList';\nimport UserDirectoryListItem from './UserDirectoryListItem';\nimport UserDirectoryPage from './UserDirectoryPage';\n\nexport const components = {\n  CheckableButton,\n  SearchField,\n  SmallUserCard,\n  UserDirectoryList,\n  UserDirectoryListItem,\n  UserDirectoryPage,\n};\n","import AbstractType from './AbstractType';\nimport GroupFilter from './GroupFilter';\nimport TextFilter from './TextFilter';\n\nexport const searchTypes = {\n  AbstractType,\n  GroupFilter,\n  TextFilter,\n};\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport UsersSearchSource from 'flarum/common/components/UsersSearchSource';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport IndexPage from 'flarum/common/components/IndexPage';\nimport UserDirectoryPage from './components/UserDirectoryPage';\nimport UserDirectoryList from './components/UserDirectoryList';\nimport UserDirectoryListItem from './components/UserDirectoryListItem';\nimport UserDirectoryState from './states/UserDirectoryState';\nimport SortMap from '../common/utils/SortMap';\nimport CheckableButton from './components/CheckableButton';\nimport Text from './models/Text';\n\n// Allow other extensions to extend the page\nexport { UserDirectoryPage, UserDirectoryList, UserDirectoryListItem, UserDirectoryState, SortMap, CheckableButton };\n\napp.initializers.add('fof-user-directory', (app) => {\n  app.routes.fof_user_directory = {\n    path: '/users',\n    component: UserDirectoryPage,\n  };\n\n  app.store.models['fof-user-directory-text'] = Text;\n\n  extend(UsersSearchSource.prototype, 'view', function (view, query) {\n    if (!view || app.forum.attribute('userDirectoryDisableGlobalSearchSource')) {\n      return;\n    }\n\n    query = query.toLowerCase();\n\n    view.splice(\n      1,\n      0,\n      m(\n        'li',\n        LinkButton.component(\n          {\n            href: app.route('fof_user_directory', { q: query }),\n            icon: 'fas fa-search',\n          },\n          app.translator.trans('fof-user-directory.forum.search.users_heading', { query })\n        )\n      )\n    );\n  });\n\n  extend(IndexPage.prototype, 'navItems', (items) => {\n    if (app.forum.attribute('canSeeUserDirectoryLink')) {\n      items.add(\n        'fof-user-directory',\n        LinkButton.component(\n          {\n            href: app.route('fof_user_directory'),\n            icon: 'far fa-address-book',\n          },\n          app.translator.trans('fof-user-directory.forum.page.nav')\n        ),\n        85\n      );\n    }\n  });\n});\n\nexport * from './components';\nexport * from './searchTypes';\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_extends","assign","target","i","arguments","length","source","apply","this","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","SmallUserCard","infoItems","items","ItemList","user","attrs","add","app","translator","trans","ago","humanTime","joinTime","UserCard","UserDirectoryListItem","view","vnode","useSmallCards","attributes","className","controlsButtonClassName","component","Component","UserDirectoryList","loading","state","params","getParams","isLoading","LoadingIndicator","moreResults","Button","onclick","loadMore","bind","empty","text","Placeholder","isSearchResults","users","map","id","SortMap","sortMap","username_az","username_za","newest","oldest","most_discussions","least_discussions","UserDirectoryState","window","qBuilder","requestParams","include","filter","sortKey","sort","forum","attribute","q","default","clear","m","redraw","refreshParams","newParams","hasUsers","keys","some","values","join","trim","refresh","loadResults","then","results","parseResults","offset","preloadedUsers","preloadedApiDocument","Promise","resolve","page","store","find","push","payload","links","next","CheckableButton","getButtonContent","children","prev","checked","icon","AbstractType","suggestions","resourceType","search","query","renderKind","resource","renderLabel","applyFilter","initializeFromParams","TextFilter","split","word","indexOf","GroupFilter","toLowerCase","forEach","group","Group","nameSingular","namePlural","color","style","backgroundColor","qWithSpacesAround","groups","SearchField","oninit","searchIndex","navigator","KeyboardNavigatable","when","event","onUp","onDown","allSuggestions","onSelect","selectResult","applyFiltering","onRemove","appliedFilters","pop","availableFilters","filterTypes","toArray","focused","route","param","resources","recipient","index","splice","title","searchResultKind","recipientLabel","placeholder","oninput","withAttr","performNewSearch","onkeydown","navigate","onfocus","onblur","result","type","filterForResource","f","data","clearSuggestions","concat","console","warn","set","UserDirectoryPage","bodyClass","idSegments","Array","from","matchAll","match","enabledGroupFilters","enabledSpecialGroupFilters","includes","IndexPage","listItems","sidebarItems","viewItems","actionItems","replace","SelectDropdown","buttonClassName","navItems","stickyParams","LinkButton","href","sortOptions","Select","options","onchange","changeParams","Dropdown","caretIcon","label","groupItems","e","Separator","moreQ","groupsQ","reduce","curr","routeParams","Page","Text","Model","components","searchTypes","routes","fof_user_directory","path","models","extend","UsersSearchSource"],"sourceRoot":""}